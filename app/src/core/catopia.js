const a2_0x49c5ee=a2_0x57c1;(function(_0x4400c6,_0x38d84a){const _0x11f158=a2_0x57c1,_0x2fc678=_0x4400c6();while(!![]){try{const _0x23572a=parseInt(_0x11f158(0x1da))/0x1+-parseInt(_0x11f158(0x1d4))/0x2+-parseInt(_0x11f158(0x207))/0x3*(parseInt(_0x11f158(0x1df))/0x4)+parseInt(_0x11f158(0x1cc))/0x5*(parseInt(_0x11f158(0x215))/0x6)+-parseInt(_0x11f158(0x1b6))/0x7+-parseInt(_0x11f158(0x1ba))/0x8+parseInt(_0x11f158(0x1ae))/0x9;if(_0x23572a===_0x38d84a)break;else _0x2fc678['push'](_0x2fc678['shift']());}catch(_0x547198){_0x2fc678['push'](_0x2fc678['shift']());}}}(a2_0x6dce,0xe31ba));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x697e9b from'../utils/logger.js';function a2_0x6dce(){const _0x2e1775=['/api/v1/seed?limit=3000','Successfully\x20get\x20player\x20pet','push','Successfully\x20Get\x20Seed\x20List','/api/v1/user/daily-mission/','delay','mission','accessToken','disconnect','Error\x20:\x20','/api/v1/user-collection/claim-gold','https://api.catopia.io','buyingGrapes','petTypeId','WSS\x20Connected...','4785tkePPW','plantString','message','land','type','pet','claimMission','Getting\x20Seed\x20List...','582228xFYAHx','name','/api/v1/players/pet?limit=3000','Upgrading\x20pet\x20','getSeedList','WSS\x20Handshake\x20completed\x20and\x20connected.','349651JTWakj','getUser','getLands','POST','plant','9368LUhkDh','\x20GEM\x20&\x20','Harvesting\x20all...','getChest','reduce','success','title','gem','socket','find','WSS\x20Disconnected:\x20','GET','/api/v1/players/land?limit=3000','query','Connecting\x20to\x20WSS...','getPet','plantSeed','refreshToken','Successfully\x20Get\x20Misisons','/api/v1/auth/telegram','login','data','level','error','fetch','chest','count','connect_timeout','POSt','/api/v1/players/plant','connect','WSS\x20Connection\x20Timeout','WSS\x20Connection\x20Closed\x20','/api/v1/store/buy','Claiming\x20Missions\x20','info','account','/api/v1/chest/open-multiple','Getting\x20player\x20pet...','connect_error','807UryhCc','WSS\x20Handshake\x20Timeout','/api/v1/user-collection?limit=3000','initWss','/api/v1/players/chest?limit=3000','seed','/claim','Try\x20to\x20Login...','petCompanion','Socket\x20ID:\x20','Successfully\x20Claim\x20Misisons','upgradePet','harvestAll','Getting\x20Missions...','11622ZixFqw','\x20GOLD','token','Successfully\x20Get\x20User\x20Land\x20Info','missions','...','Planting\x20Gapes\x20seed\x20to\x20land...','/api/v1/players/plant?limit=3000','wss://cowtopia-ws.tonfarmer.com','Buying\x20Grapes...','29031012cxqcGp','WSS\x20Error\x20:\x20','Successfully\x20Opening\x20Multiple\x20Chest','Successfully\x20Upgrading\x20Pet','WSS\x20Connection\x20Error:\x20','getAvailablePlant','map','Successfully\x20Claim\x20Gold,\x20got\x20','12323192CjjPLc','claimedCoin','Claiming\x20Gold...','/api/v1/user/daily-mission?limit=3000','14537808ckPnlB','petTypeList','getMission'];a2_0x6dce=function(){return _0x2e1775;};return a2_0x6dce();}import{io}from'socket.io-client';import{PetList}from'./pet_list.js';function a2_0x57c1(_0xf7489,_0x536f0c){const _0x6dcee3=a2_0x6dce();return a2_0x57c1=function(_0x57c139,_0x5f2bec){_0x57c139=_0x57c139-0x1a5;let _0x157843=_0x6dcee3[_0x57c139];return _0x157843;},a2_0x57c1(_0xf7489,_0x536f0c);}export class Catopia extends API{constructor(_0x9143d5,_0x25b58c,_0x246ee4,_0x181c5e){const _0x3230dd=a2_0x57c1;super(_0x25b58c,_0x3230dd(0x1c8),_0x181c5e),this[_0x3230dd(0x203)]=_0x9143d5,this[_0x3230dd(0x1ec)]=_0x25b58c,this['queryObj']=_0x246ee4;}async[a2_0x49c5ee(0x1f3)](){const _0x52f3b8=a2_0x49c5ee;try{await Helper[_0x52f3b8(0x1c2)](0x1f4,this[_0x52f3b8(0x203)],_0x52f3b8(0x20e),this);const _0x37b22c=await this[_0x52f3b8(0x1f7)](_0x52f3b8(0x1f2),'POST',undefined,{'initData':this['query']});await Helper[_0x52f3b8(0x1c2)](0x3e8,this['account'],'Successfully\x20Login',this),this[_0x52f3b8(0x1a6)]=_0x37b22c[_0x52f3b8(0x1f4)][_0x52f3b8(0x1c4)],this[_0x52f3b8(0x1f0)]=_0x37b22c['refreshToken'];}catch(_0x710f2){throw _0x710f2;}}async[a2_0x49c5ee(0x1db)](_0x5196bd=![]){const _0x9a8232=a2_0x49c5ee;try{if(_0x5196bd)await Helper[_0x9a8232(0x1c2)](0x1f4,this[_0x9a8232(0x203)],'Getting\x20User\x20Info...',this);const _0x30902d=await this[_0x9a8232(0x1f7)](_0x9a8232(0x209),_0x9a8232(0x1ea),this[_0x9a8232(0x1a6)]);if(_0x30902d[_0x9a8232(0x1e4)]==!![]){if(_0x5196bd)await Helper[_0x9a8232(0x1c2)](0x3e8,this[_0x9a8232(0x203)],'Successfully\x20Get\x20User\x20Info',this);this['user']=_0x30902d['data'];}else await Helper[_0x9a8232(0x1c2)](0x1388,this[_0x9a8232(0x203)],'Error\x20:\x20'+_0x30902d['message'],this);}catch(_0xfebcad){throw _0xfebcad;}}async[a2_0x49c5ee(0x20a)](){return new Promise(async(_0x5416ef,_0x35f72d)=>{const _0x55ae6f=a2_0x57c1;await Helper[_0x55ae6f(0x1c2)](0x3e8,this[_0x55ae6f(0x203)],_0x55ae6f(0x1ed),this),this['socket']=io(_0x55ae6f(0x1ac),{'auth':{'token':this['plainToken']},'transports':['websocket']}),this[_0x55ae6f(0x1e7)]['on'](_0x55ae6f(0x1fd),async()=>{const _0x16e67f=_0x55ae6f;await Helper[_0x16e67f(0x1c2)](0x3e8,this[_0x16e67f(0x203)],_0x16e67f(0x1cb),this),a2_0x697e9b[_0x16e67f(0x202)](_0x16e67f(0x1d9)),a2_0x697e9b['info'](_0x16e67f(0x210)+this['socket']['id']),_0x5416ef();}),this[_0x55ae6f(0x1e7)]['on'](_0x55ae6f(0x206),async _0x2b4c19=>{const _0x51e683=_0x55ae6f;await Helper['delay'](0x3e8,this[_0x51e683(0x203)],_0x51e683(0x1b2)+_0x2b4c19[_0x51e683(0x1ce)],this),a2_0x697e9b[_0x51e683(0x1f6)]('WSS\x20Handshake\x20Error:\x20'+_0x2b4c19[_0x51e683(0x1ce)]),_0x35f72d(_0x2b4c19);}),this[_0x55ae6f(0x1e7)]['on'](_0x55ae6f(0x1fa),async()=>{const _0x38f8ea=_0x55ae6f;await Helper['delay'](0x3e8,this['account'],_0x38f8ea(0x1fe),this),a2_0x697e9b[_0x38f8ea(0x1f6)](_0x38f8ea(0x208)),_0x35f72d(new Error(_0x38f8ea(0x208)));}),this[_0x55ae6f(0x1e7)]['on']('error',async _0x59bb20=>{const _0x2fd982=_0x55ae6f;await Helper['delay'](0x3e8,this[_0x2fd982(0x203)],_0x2fd982(0x1af)+_0x59bb20[_0x2fd982(0x1ce)],this),a2_0x697e9b[_0x2fd982(0x1f6)]('WSS\x20Error\x20:\x20'+_0x59bb20[_0x2fd982(0x1ce)]),_0x35f72d(_0x59bb20);}),this[_0x55ae6f(0x1e7)]['on'](_0x55ae6f(0x1c5),async _0x2b5e53=>{const _0x9585dd=_0x55ae6f;await Helper[_0x9585dd(0x1c2)](0x3e8,this[_0x9585dd(0x203)],_0x9585dd(0x1ff)+_0x2b5e53+'...',this),a2_0x697e9b[_0x9585dd(0x202)](_0x9585dd(0x1e9)+_0x2b5e53);});});}async[a2_0x49c5ee(0x1bc)](_0x263e0c=![]){const _0x4368b6=a2_0x49c5ee;try{if(_0x263e0c)await Helper[_0x4368b6(0x1c2)](0x1f4,this[_0x4368b6(0x203)],_0x4368b6(0x214),this);this[_0x4368b6(0x1a8)]=[];const _0x415581=await this['fetch'](_0x4368b6(0x1b9),_0x4368b6(0x1ea),this[_0x4368b6(0x1a6)]);if(_0x415581[_0x4368b6(0x1e4)]){if(_0x263e0c)await Helper[_0x4368b6(0x1c2)](0x3e8,this['account'],_0x4368b6(0x1f1),this);this[_0x4368b6(0x1a8)]=_0x415581[_0x4368b6(0x1f4)];}else await Helper[_0x4368b6(0x1c2)](0x1388,this[_0x4368b6(0x203)],_0x4368b6(0x1c6)+_0x415581[_0x4368b6(0x1ce)],this);}catch(_0x7c3277){throw _0x7c3277;}}async[a2_0x49c5ee(0x1d2)](_0x1f99ae){const _0x41c1dc=a2_0x49c5ee;try{await Helper[_0x41c1dc(0x1c2)](0x1f4,this[_0x41c1dc(0x203)],_0x41c1dc(0x201)+_0x1f99ae[_0x41c1dc(0x1c3)][_0x41c1dc(0x1e5)]+_0x41c1dc(0x1a9),this);const _0x363807=await this[_0x41c1dc(0x1f7)](_0x41c1dc(0x1c1)+_0x1f99ae['id']+_0x41c1dc(0x20d),_0x41c1dc(0x1dd),this[_0x41c1dc(0x1a6)]);_0x363807['success']?(await Helper['delay'](0x3e8,this[_0x41c1dc(0x203)],_0x41c1dc(0x211),this),await this[_0x41c1dc(0x1db)](),await this[_0x41c1dc(0x1bc)]()):await Helper[_0x41c1dc(0x1c2)](0x1388,this[_0x41c1dc(0x203)],_0x41c1dc(0x1c6)+_0x363807['message'],this);}catch(_0x4dca5d){throw _0x4dca5d;}}async[a2_0x49c5ee(0x1d8)](){const _0x35bd1e=a2_0x49c5ee;try{await Helper[_0x35bd1e(0x1c2)](0x1f4,this[_0x35bd1e(0x203)],_0x35bd1e(0x1d3),this);const _0xe69491=await this[_0x35bd1e(0x1f7)](_0x35bd1e(0x1bd),_0x35bd1e(0x1ea),this['token']);_0xe69491[_0x35bd1e(0x1e4)]?(await Helper[_0x35bd1e(0x1c2)](0x3e8,this[_0x35bd1e(0x203)],_0x35bd1e(0x1c0),this),this[_0x35bd1e(0x20c)]=_0xe69491['data']):await Helper[_0x35bd1e(0x1c2)](0x1388,this[_0x35bd1e(0x203)],_0x35bd1e(0x1c6)+_0xe69491['message'],this);}catch(_0x4277b9){throw _0x4277b9;}}async['getAvailablePlant'](_0x1d77bd=![]){const _0x4bdea6=a2_0x49c5ee;try{if(_0x1d77bd)await Helper[_0x4bdea6(0x1c2)](0x1f4,this[_0x4bdea6(0x203)],'Getting\x20Player\x20Plant...',this);const _0x4436b1=await this[_0x4bdea6(0x1f7)](_0x4bdea6(0x1ab),'GET',this[_0x4bdea6(0x1a6)]);if(_0x4436b1['success']){if(_0x1d77bd)await Helper[_0x4bdea6(0x1c2)](0x3e8,this[_0x4bdea6(0x203)],'Successfully\x20Get\x20Player\x20Plant',this);this[_0x4bdea6(0x1de)]=_0x4436b1[_0x4bdea6(0x1f4)];const _0x592b21=this[_0x4bdea6(0x1de)][_0x4bdea6(0x1e3)]((_0x3ec008,_0x68511e)=>{const _0x71be0a=_0x4bdea6,_0x543823=_0x68511e[_0x71be0a(0x1d5)]['toLowerCase']();return _0x3ec008[_0x543823]=(_0x3ec008[_0x543823]||0x0)+0x1,_0x3ec008;},{});this[_0x4bdea6(0x1cd)]=Object['entries'](_0x592b21)[_0x4bdea6(0x1b4)](([_0x37b70f,_0x540c97])=>_0x540c97+'\x20'+_0x37b70f+(_0x540c97>0x1?'s':''))['join']('\x20');}else await Helper[_0x4bdea6(0x1c2)](0x1388,this[_0x4bdea6(0x203)],_0x4bdea6(0x1c6)+_0x4436b1['message'],this);}catch(_0x22884f){throw _0x22884f;}}async[a2_0x49c5ee(0x1c9)](){const _0xbb4c69=a2_0x49c5ee;try{await Helper[_0xbb4c69(0x1c2)](0x1f4,this[_0xbb4c69(0x203)],_0xbb4c69(0x1ad),this);const _0x3a878f=await this[_0xbb4c69(0x1f7)](_0xbb4c69(0x200),_0xbb4c69(0x1dd),this['token'],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0xbb4c69(0x1db)](),_0x3a878f[_0xbb4c69(0x1e4)]?(await Helper[_0xbb4c69(0x1c2)](0x3e8,this[_0xbb4c69(0x203)],'Successfully\x20Buying\x201\x20Grapes',this),await this[_0xbb4c69(0x1b3)]()):(await Helper[_0xbb4c69(0x1c2)](0x1388,this[_0xbb4c69(0x203)],''+_0x3a878f[_0xbb4c69(0x1ce)],this),await this[_0xbb4c69(0x213)]());}catch(_0x3735d0){throw _0x3735d0;}}async['getLands'](_0x5e54c2=![]){const _0xe105c4=a2_0x49c5ee;try{if(_0x5e54c2)await Helper[_0xe105c4(0x1c2)](0x1f4,this['account'],'Getting\x20User\x20Land\x20Info...',this);const _0x2ad78f=await this[_0xe105c4(0x1f7)](_0xe105c4(0x1eb),_0xe105c4(0x1ea),this[_0xe105c4(0x1a6)]);if(_0x2ad78f[_0xe105c4(0x1e4)]){if(_0x5e54c2)await Helper[_0xe105c4(0x1c2)](0x3e8,this[_0xe105c4(0x203)],_0xe105c4(0x1a7),this);this[_0xe105c4(0x1cf)]=_0x2ad78f[_0xe105c4(0x1f4)];}else await Helper[_0xe105c4(0x1c2)](0x1388,this['account'],_0xe105c4(0x1c6)+_0x2ad78f['message'],this);}catch(_0x5c1ce8){throw _0x5c1ce8;}}async[a2_0x49c5ee(0x1ef)](_0x55878b){const _0x49582e=a2_0x49c5ee;try{await Helper[_0x49582e(0x1c2)](0x1f4,this[_0x49582e(0x203)],_0x49582e(0x1aa),this);const _0x27ed85=await this[_0x49582e(0x1f7)](_0x49582e(0x1fc),_0x49582e(0x1fb),this[_0x49582e(0x1a6)],{'plantId':this[_0x49582e(0x1de)][0x0]['id'],'landId':_0x55878b});_0x27ed85['success']?(await Helper[_0x49582e(0x1c2)](0x3e8,this[_0x49582e(0x203)],'Successfully\x20planting\x20grapes\x20to\x20land\x20'+_0x55878b,this),await this[_0x49582e(0x1dc)](),await this[_0x49582e(0x1b3)]()):await Helper[_0x49582e(0x1c2)](0x1388,this['account'],_0x49582e(0x1c6)+_0x27ed85[_0x49582e(0x1ce)],this);}catch(_0x3b95eb){throw _0x3b95eb;}}async['harvestAll'](){const _0x1bbca6=a2_0x49c5ee;try{await Helper[_0x1bbca6(0x1c2)](0x1f4,this['account'],_0x1bbca6(0x1e1),this);const _0x4c9ed6=await this['fetch']('/api/v1/players/plant/harvestAll',_0x1bbca6(0x1fb),this[_0x1bbca6(0x1a6)]);_0x4c9ed6[_0x1bbca6(0x1e4)]?(await Helper[_0x1bbca6(0x1c2)](0x7d0,this['account'],'Successfully\x20Harvest\x20All\x20Plant\x20Got\x20'+_0x4c9ed6[_0x1bbca6(0x1f4)][_0x1bbca6(0x1e6)]+_0x1bbca6(0x1e0)+_0x4c9ed6[_0x1bbca6(0x1f4)]['gold']+'\x20GOLD',this),await this[_0x1bbca6(0x1db)](),await this[_0x1bbca6(0x1dc)](),await this[_0x1bbca6(0x1b3)]()):await Helper['delay'](0x7d0,this[_0x1bbca6(0x203)],''+_0x4c9ed6['message'],this);}catch(_0x216271){throw _0x216271;}}async[a2_0x49c5ee(0x1ee)](_0x691310){const _0x3d1259=a2_0x49c5ee;try{if(_0x691310)await Helper[_0x3d1259(0x1c2)](0x1f4,this[_0x3d1259(0x203)],_0x3d1259(0x205),this);const _0x3fe086=await this['fetch'](_0x3d1259(0x1d6),_0x3d1259(0x1ea),this['token']);if(_0x3fe086[_0x3d1259(0x1e4)]){if(_0x691310)await Helper[_0x3d1259(0x1c2)](0xbb8,this[_0x3d1259(0x203)],_0x3d1259(0x1be),this);this['pet']=_0x3fe086[_0x3d1259(0x1f4)];}else await Helper['delay'](0xbb8,this[_0x3d1259(0x203)],''+_0x3fe086['message'],this);}catch(_0x345741){throw _0x345741;}}async['buyChest'](){const _0x116806=a2_0x49c5ee;try{await Helper[_0x116806(0x1c2)](0x1f4,this[_0x116806(0x203)],'Buying\x20common\x20chest...',this);const _0xfac76f=await this['fetch']('/api/v1/store/buy','POST',this[_0x116806(0x1a6)],{'storeId':0x2,'price':0x7530,'unit':0x1});_0xfac76f[_0x116806(0x1e4)]?(await this[_0x116806(0x1db)](),await this[_0x116806(0x1e2)]()):await Helper[_0x116806(0x1c2)](0xbb8,this[_0x116806(0x203)],''+_0xfac76f[_0x116806(0x1ce)],this);}catch(_0x46ab10){throw _0x46ab10;}}async['getChest'](){const _0x5cd7c6=a2_0x49c5ee;try{const _0x461281=await this['fetch'](_0x5cd7c6(0x20b),_0x5cd7c6(0x1ea),this['token']);_0x461281[_0x5cd7c6(0x1e4)]?this['chest']=_0x461281[_0x5cd7c6(0x1f4)]:await Helper[_0x5cd7c6(0x1c2)](0xbb8,this[_0x5cd7c6(0x203)],''+res[_0x5cd7c6(0x1ce)],this);}catch(_0x5cae46){throw _0x5cae46;}}async['openChest'](){const _0x41a941=a2_0x49c5ee;try{await Helper['delay'](0x1f4,this[_0x41a941(0x203)],'Opening\x20multipe\x20chest...',this);const _0x5043b6=await this[_0x41a941(0x1f7)](_0x41a941(0x204),_0x41a941(0x1dd),this[_0x41a941(0x1a6)],{'petTypeIds':PetList[_0x41a941(0x20f)][_0x41a941(0x1e8)](_0x2a03fa=>_0x2a03fa[_0x41a941(0x1d0)]=='A')[_0x41a941(0x1f4)],'chestIds':this[_0x41a941(0x1f8)]['map'](_0xcfeb26=>{return _0xcfeb26['id'];})});_0x5043b6[_0x41a941(0x1e4)]?(await this['getChest'](),await Helper[_0x41a941(0x1c2)](0x3e8,this['account'],_0x41a941(0x1b0),this)):await Helper[_0x41a941(0x1c2)](0xbb8,this[_0x41a941(0x203)],''+_0x5043b6[_0x41a941(0x1ce)],this);}catch(_0x988886){throw _0x988886;}}async[a2_0x49c5ee(0x212)](_0x324e84){const _0x1a67bd=a2_0x49c5ee;try{await Helper[_0x1a67bd(0x1c2)](0x1f4,this[_0x1a67bd(0x203)],_0x1a67bd(0x1d7)+_0x324e84[_0x1a67bd(0x1d5)]+_0x1a67bd(0x1a9),this);const _0x4f93f9=await this[_0x1a67bd(0x1f7)]('/api/v1/players/pet/upgrade',_0x1a67bd(0x1dd),this['token'],{'level':_0x324e84[_0x1a67bd(0x1f5)],'petTypeId':PetList[_0x1a67bd(0x1bb)][_0x1a67bd(0x1e8)](_0x4f9f0e=>_0x4f9f0e[_0x1a67bd(0x1d5)]==_0x324e84[_0x1a67bd(0x1d5)])[_0x1a67bd(0x1ca)]});_0x4f93f9[_0x1a67bd(0x1e4)]?(await this[_0x1a67bd(0x1ee)](),await Helper[_0x1a67bd(0x1c2)](0x3e8,this[_0x1a67bd(0x203)],_0x1a67bd(0x1b1),this)):await Helper[_0x1a67bd(0x1c2)](0xbb8,this[_0x1a67bd(0x203)],''+_0x4f93f9[_0x1a67bd(0x1ce)],this);}catch(_0x178407){throw _0x178407;}}async['claimGold'](){const _0x109ad7=a2_0x49c5ee;try{await Helper[_0x109ad7(0x1c2)](0x1f4,this['account'],_0x109ad7(0x1b8),this);const _0x776016=await this[_0x109ad7(0x1f7)](_0x109ad7(0x1c7),_0x109ad7(0x1dd),this['token']);_0x776016[_0x109ad7(0x1e4)]?(await this[_0x109ad7(0x1db)](),await Helper[_0x109ad7(0x1c2)](0x3e8,this[_0x109ad7(0x203)],_0x109ad7(0x1b5)+_0x776016[_0x109ad7(0x1f4)][_0x109ad7(0x1b7)]+_0x109ad7(0x1a5),this)):await Helper['delay'](0xbb8,this[_0x109ad7(0x203)],''+_0x776016[_0x109ad7(0x1ce)],this);}catch(_0x5db67d){throw _0x5db67d;}}async['generateUpgradablePet'](){const _0x4af266=a2_0x49c5ee;let _0x2682fd=[];for(const _0x4b2fd2 of this[_0x4af266(0x1d1)]){const _0xd4445=_0x2682fd[_0x4af266(0x1e8)](_0x2f6beb=>_0x2f6beb['name']===_0x4b2fd2['name']&&_0x2f6beb[_0x4af266(0x1f5)]===_0x4b2fd2[_0x4af266(0x1f5)]);_0xd4445?_0xd4445[_0x4af266(0x1f9)]+=0x1:_0x2682fd[_0x4af266(0x1bf)]({..._0x4b2fd2,'count':0x1});}return _0x2682fd=_0x2682fd['filter'](_0x24a343=>_0x24a343[_0x4af266(0x1f9)]>=0x5),_0x2682fd;}}