function a2_0x49e5(_0x4452e4,_0x3598da){const _0x535fc8=a2_0x535f();return a2_0x49e5=function(_0x49e5a6,_0x661621){_0x49e5a6=_0x49e5a6-0x17e;let _0x377546=_0x535fc8[_0x49e5a6];return _0x377546;},a2_0x49e5(_0x4452e4,_0x3598da);}const a2_0x15ff9c=a2_0x49e5;(function(_0x27c694,_0x19ac21){const _0x3b0435=a2_0x49e5,_0x27bc45=_0x27c694();while(!![]){try{const _0x2f597c=-parseInt(_0x3b0435(0x1d2))/0x1+parseInt(_0x3b0435(0x1c4))/0x2*(-parseInt(_0x3b0435(0x181))/0x3)+parseInt(_0x3b0435(0x187))/0x4+-parseInt(_0x3b0435(0x1d1))/0x5*(parseInt(_0x3b0435(0x1c0))/0x6)+parseInt(_0x3b0435(0x1c5))/0x7+parseInt(_0x3b0435(0x1f4))/0x8*(-parseInt(_0x3b0435(0x1ab))/0x9)+parseInt(_0x3b0435(0x1c3))/0xa;if(_0x2f597c===_0x19ac21)break;else _0x27bc45['push'](_0x27bc45['shift']());}catch(_0x5ecc95){_0x27bc45['push'](_0x27bc45['shift']());}}}(a2_0x535f,0x1d0ae));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x20f5d3 from'../utils/logger.js';import{io}from'socket.io-client';import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x2b628a,_0x1824ec,_0x30755b,_0xd2f96a){const _0x45310a=a2_0x49e5;super(_0x1824ec,_0x45310a(0x1ed),_0xd2f96a),this[_0x45310a(0x186)]=_0x2b628a,this[_0x45310a(0x1b9)]=_0x1824ec,this['queryObj']=_0x30755b;}async[a2_0x15ff9c(0x1de)](){const _0x55313d=a2_0x15ff9c;try{await Helper[_0x55313d(0x1ee)](0x1f4,this[_0x55313d(0x186)],'Try\x20to\x20Login...',this);const _0x430a5c=await this[_0x55313d(0x1ec)](_0x55313d(0x1eb),'POST',undefined,{'initData':this[_0x55313d(0x1b9)]});await Helper[_0x55313d(0x1ee)](0x3e8,this[_0x55313d(0x186)],'Successfully\x20Login',this),this['token']=_0x430a5c[_0x55313d(0x1e3)][_0x55313d(0x1ce)],this[_0x55313d(0x1c9)]=_0x430a5c[_0x55313d(0x1c9)];}catch(_0x4ff662){throw _0x4ff662;}}async[a2_0x15ff9c(0x1d8)](_0x4e379f=![]){const _0x56caf4=a2_0x15ff9c;try{if(_0x4e379f)await Helper[_0x56caf4(0x1ee)](0x1f4,this[_0x56caf4(0x186)],_0x56caf4(0x1e9),this);const _0x362309=await this[_0x56caf4(0x1ec)](_0x56caf4(0x1ea),'GET',this[_0x56caf4(0x1c1)]);if(_0x362309[_0x56caf4(0x1a1)]==!![]){if(_0x4e379f)await Helper['delay'](0x3e8,this['account'],_0x56caf4(0x1b0),this);this['user']=_0x362309[_0x56caf4(0x1e3)];}else await Helper[_0x56caf4(0x1ee)](0x1388,this[_0x56caf4(0x186)],_0x56caf4(0x1d0)+_0x362309['message'],this);}catch(_0x27e5bf){throw _0x27e5bf;}}async['initWss'](){return new Promise(async(_0x19057d,_0x19ca59)=>{const _0x269bca=a2_0x49e5;await Helper[_0x269bca(0x1ee)](0x3e8,this['account'],_0x269bca(0x1b1),this),this[_0x269bca(0x18a)]=io('wss://cowtopia-ws.tonfarmer.com',{'auth':{'token':this[_0x269bca(0x191)]},'transports':[_0x269bca(0x1f2)]}),this['socket']['on'](_0x269bca(0x185),async()=>{const _0x3efff0=_0x269bca;await Helper[_0x3efff0(0x1ee)](0x3e8,this[_0x3efff0(0x186)],_0x3efff0(0x1f3),this),a2_0x20f5d3['info'](_0x3efff0(0x1ad)),a2_0x20f5d3[_0x3efff0(0x1b3)](_0x3efff0(0x18b)+this[_0x3efff0(0x18a)]['id']),_0x19057d();}),this[_0x269bca(0x18a)]['on']('connect_error',async _0xb24362=>{const _0x35ce8a=_0x269bca;await Helper[_0x35ce8a(0x1ee)](0x3e8,this[_0x35ce8a(0x186)],_0x35ce8a(0x1b2)+_0xb24362[_0x35ce8a(0x1c6)],this),a2_0x20f5d3['error'](_0x35ce8a(0x1e8)+_0xb24362[_0x35ce8a(0x1c6)]),_0x19ca59(_0xb24362);}),this[_0x269bca(0x18a)]['on']('connect_timeout',async()=>{const _0x4ed150=_0x269bca;await Helper['delay'](0x3e8,this['account'],_0x4ed150(0x1d9),this),a2_0x20f5d3['error']('WSS\x20Handshake\x20Timeout'),_0x19ca59(new Error(_0x4ed150(0x1be)));}),this['socket']['on'](_0x269bca(0x17e),async _0x18d5ce=>{const _0x528090=_0x269bca;await Helper['delay'](0x3e8,this[_0x528090(0x186)],_0x528090(0x192)+_0x18d5ce[_0x528090(0x1c6)],this),a2_0x20f5d3[_0x528090(0x17e)](_0x528090(0x192)+_0x18d5ce[_0x528090(0x1c6)]),_0x19ca59(_0x18d5ce);}),this[_0x269bca(0x18a)]['on'](_0x269bca(0x17f),async _0x2f1268=>{const _0x14c1fa=_0x269bca;await Helper['delay'](0x3e8,this[_0x14c1fa(0x186)],'WSS\x20Connection\x20Closed\x20'+_0x2f1268+'...',this),a2_0x20f5d3[_0x14c1fa(0x1b3)](_0x14c1fa(0x1a2)+_0x2f1268);});});}async['getMission'](_0x213e47=![]){const _0x1203a1=a2_0x15ff9c;try{if(_0x213e47)await Helper['delay'](0x1f4,this[_0x1203a1(0x186)],'Getting\x20Missions...',this);this[_0x1203a1(0x1db)]=[];const _0x317995=await this[_0x1203a1(0x1ec)]('/api/v1/user/daily-mission?limit=3000','GET',this['token']);if(_0x317995['success']){if(_0x213e47)await Helper['delay'](0x3e8,this[_0x1203a1(0x186)],'Successfully\x20Get\x20Misisons',this);this[_0x1203a1(0x1db)]=_0x317995[_0x1203a1(0x1e3)];}else await Helper[_0x1203a1(0x1ee)](0x1388,this[_0x1203a1(0x186)],_0x1203a1(0x1d0)+_0x317995[_0x1203a1(0x1c6)],this);}catch(_0x35fa50){throw _0x35fa50;}}async[a2_0x15ff9c(0x182)](_0x186189){const _0x202ca3=a2_0x15ff9c;try{await Helper[_0x202ca3(0x1ee)](0x1f4,this[_0x202ca3(0x186)],_0x202ca3(0x197)+_0x186189[_0x202ca3(0x1e0)][_0x202ca3(0x1e5)]+_0x202ca3(0x1ba),this);const _0xab00cb=await this['fetch'](_0x202ca3(0x1df)+_0x186189['id']+_0x202ca3(0x184),'POST',this[_0x202ca3(0x1c1)]);_0xab00cb[_0x202ca3(0x1a1)]?(await Helper['delay'](0x3e8,this['account'],_0x202ca3(0x1cf),this),await this['getUser'](),await this['getMission']()):await Helper['delay'](0x1388,this[_0x202ca3(0x186)],'Error\x20:\x20'+_0xab00cb[_0x202ca3(0x1c6)],this);}catch(_0x95a53c){throw _0x95a53c;}}async[a2_0x15ff9c(0x18f)](){const _0x2d9943=a2_0x15ff9c;try{await Helper['delay'](0x1f4,this[_0x2d9943(0x186)],_0x2d9943(0x1e6),this);const _0x5e087a=await this[_0x2d9943(0x1ec)](_0x2d9943(0x1a4),'GET',this['token']);_0x5e087a[_0x2d9943(0x1a1)]?(await Helper[_0x2d9943(0x1ee)](0x3e8,this[_0x2d9943(0x186)],_0x2d9943(0x1b6),this),this[_0x2d9943(0x1bd)]=_0x5e087a[_0x2d9943(0x1e3)]):await Helper['delay'](0x1388,this[_0x2d9943(0x186)],_0x2d9943(0x1d0)+_0x5e087a['message'],this);}catch(_0x9fc92f){throw _0x9fc92f;}}async[a2_0x15ff9c(0x180)](_0x46b9c4=![]){const _0x1747a5=a2_0x15ff9c;try{if(_0x46b9c4)await Helper[_0x1747a5(0x1ee)](0x1f4,this['account'],_0x1747a5(0x194),this);const _0x323efa=await this[_0x1747a5(0x1ec)](_0x1747a5(0x1d6),_0x1747a5(0x189),this[_0x1747a5(0x1c1)]);if(_0x323efa[_0x1747a5(0x1a1)]){if(_0x46b9c4)await Helper[_0x1747a5(0x1ee)](0x3e8,this['account'],_0x1747a5(0x1b8),this);this[_0x1747a5(0x1a6)]=_0x323efa['data'];const _0x2f1fa6=this[_0x1747a5(0x1a6)][_0x1747a5(0x1f0)]((_0x5ca47a,_0x199743)=>{const _0x3aadfc=_0x1747a5,_0x215d8f=_0x199743[_0x3aadfc(0x1d3)][_0x3aadfc(0x1c2)]();return _0x5ca47a[_0x215d8f]=(_0x5ca47a[_0x215d8f]||0x0)+0x1,_0x5ca47a;},{});this[_0x1747a5(0x19a)]=Object[_0x1747a5(0x183)](_0x2f1fa6)[_0x1747a5(0x1d7)](([_0x429d7b,_0x32efaa])=>_0x32efaa+'\x20'+_0x429d7b+(_0x32efaa>0x1?'s':''))[_0x1747a5(0x1ae)]('\x20');}else await Helper[_0x1747a5(0x1ee)](0x1388,this[_0x1747a5(0x186)],_0x1747a5(0x1d0)+_0x323efa[_0x1747a5(0x1c6)],this);}catch(_0x34db40){throw _0x34db40;}}async[a2_0x15ff9c(0x195)](){const _0x88706b=a2_0x15ff9c;try{await Helper[_0x88706b(0x1ee)](0x1f4,this[_0x88706b(0x186)],_0x88706b(0x1da),this);const _0x4e90f3=await this[_0x88706b(0x1ec)]('/api/v1/store/buy','POST',this[_0x88706b(0x1c1)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x88706b(0x1d8)](),_0x4e90f3[_0x88706b(0x1a1)]?(await Helper[_0x88706b(0x1ee)](0x3e8,this['account'],_0x88706b(0x1bb),this),await this[_0x88706b(0x180)]()):(await Helper['delay'](0x1388,this[_0x88706b(0x186)],''+_0x4e90f3['message'],this),await this[_0x88706b(0x1e1)]());}catch(_0x383bfc){throw _0x383bfc;}}async['getLands'](_0x3753f0=![]){const _0x2d2fbb=a2_0x15ff9c;try{if(_0x3753f0)await Helper[_0x2d2fbb(0x1ee)](0x1f4,this[_0x2d2fbb(0x186)],_0x2d2fbb(0x1ac),this);const _0x255138=await this[_0x2d2fbb(0x1ec)](_0x2d2fbb(0x1cc),_0x2d2fbb(0x189),this['token']);if(_0x255138[_0x2d2fbb(0x1a1)]){if(_0x3753f0)await Helper[_0x2d2fbb(0x1ee)](0x3e8,this['account'],_0x2d2fbb(0x1e4),this);this[_0x2d2fbb(0x1dd)]=_0x255138[_0x2d2fbb(0x1e3)];}else await Helper[_0x2d2fbb(0x1ee)](0x1388,this[_0x2d2fbb(0x186)],_0x2d2fbb(0x1d0)+_0x255138['message'],this);}catch(_0x13cb2c){throw _0x13cb2c;}}async[a2_0x15ff9c(0x1ca)](_0x18b7cf){const _0x576d26=a2_0x15ff9c;try{await Helper['delay'](0x1f4,this[_0x576d26(0x186)],_0x576d26(0x18e),this);const _0x1d2377=await this[_0x576d26(0x1ec)](_0x576d26(0x1bf),_0x576d26(0x1c7),this[_0x576d26(0x1c1)],{'plantId':this[_0x576d26(0x1a6)][0x0]['id'],'landId':_0x18b7cf});_0x1d2377[_0x576d26(0x1a1)]?(await Helper['delay'](0x3e8,this['account'],_0x576d26(0x1d4)+_0x18b7cf,this),await this[_0x576d26(0x188)](),await this['getAvailablePlant']()):await Helper[_0x576d26(0x1ee)](0x1388,this[_0x576d26(0x186)],'Error\x20:\x20'+_0x1d2377[_0x576d26(0x1c6)],this);}catch(_0x380b6c){throw _0x380b6c;}}async['harvestAll'](){const _0x2ef70f=a2_0x15ff9c;try{await Helper[_0x2ef70f(0x1ee)](0x1f4,this[_0x2ef70f(0x186)],_0x2ef70f(0x19b),this);const _0x1bbd9f=await this[_0x2ef70f(0x1ec)](_0x2ef70f(0x18d),'POSt',this[_0x2ef70f(0x1c1)]);_0x1bbd9f[_0x2ef70f(0x1a1)]?(await Helper[_0x2ef70f(0x1ee)](0x7d0,this['account'],'Successfully\x20Harvest\x20All\x20Plant\x20Got\x20'+_0x1bbd9f[_0x2ef70f(0x1e3)][_0x2ef70f(0x1cd)]+'\x20GEM\x20&\x20'+_0x1bbd9f['data'][_0x2ef70f(0x1ef)]+'\x20GOLD',this),await this[_0x2ef70f(0x1d8)](),await this[_0x2ef70f(0x188)](),await this[_0x2ef70f(0x180)]()):await Helper['delay'](0x7d0,this['account'],''+_0x1bbd9f[_0x2ef70f(0x1c6)],this);}catch(_0x3cb062){throw _0x3cb062;}}async[a2_0x15ff9c(0x1aa)](_0x2aecc7){const _0x56b5e1=a2_0x15ff9c;try{if(_0x2aecc7)await Helper[_0x56b5e1(0x1ee)](0x1f4,this['account'],_0x56b5e1(0x1b5),this);const _0x1c494e=await this[_0x56b5e1(0x1ec)]('/api/v1/players/pet?limit=3000',_0x56b5e1(0x189),this[_0x56b5e1(0x1c1)]);if(_0x1c494e[_0x56b5e1(0x1a1)]){if(_0x2aecc7)await Helper[_0x56b5e1(0x1ee)](0xbb8,this[_0x56b5e1(0x186)],'Successfully\x20get\x20player\x20pet',this);this['pet']=_0x1c494e[_0x56b5e1(0x1e3)];}else await Helper[_0x56b5e1(0x1ee)](0xbb8,this[_0x56b5e1(0x186)],''+_0x1c494e['message'],this);}catch(_0x3e8029){throw _0x3e8029;}}async['buyChest'](){const _0x410c5d=a2_0x15ff9c;try{await Helper[_0x410c5d(0x1ee)](0x1f4,this[_0x410c5d(0x186)],_0x410c5d(0x1a5),this);const _0x2b6e49=await this[_0x410c5d(0x1ec)](_0x410c5d(0x1dc),_0x410c5d(0x1bc),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x2b6e49[_0x410c5d(0x1a1)]?(await this[_0x410c5d(0x1d8)](),await this['getChest']()):await Helper['delay'](0xbb8,this[_0x410c5d(0x186)],''+_0x2b6e49['message'],this);}catch(_0x3778a0){throw _0x3778a0;}}async[a2_0x15ff9c(0x1a0)](){const _0x49adc6=a2_0x15ff9c;try{const _0x29b5b9=await this[_0x49adc6(0x1ec)](_0x49adc6(0x196),_0x49adc6(0x189),this['token']);_0x29b5b9[_0x49adc6(0x1a1)]?this[_0x49adc6(0x19d)]=_0x29b5b9[_0x49adc6(0x1e3)]:await Helper['delay'](0xbb8,this[_0x49adc6(0x186)],''+res[_0x49adc6(0x1c6)],this);}catch(_0x2de339){throw _0x2de339;}}async['openChest'](){const _0x143ae0=a2_0x15ff9c;try{await Helper[_0x143ae0(0x1ee)](0x1f4,this[_0x143ae0(0x186)],'Opening\x20multipe\x20chest...',this);const _0x1b5c2b=await this[_0x143ae0(0x1ec)](_0x143ae0(0x1a8),_0x143ae0(0x1bc),this[_0x143ae0(0x1c1)],{'petTypeIds':PetList[_0x143ae0(0x19f)][_0x143ae0(0x19e)](_0xe21caa=>_0xe21caa['type']=='A')[_0x143ae0(0x1e3)],'chestIds':this['chest'][_0x143ae0(0x1d7)](_0x1be1ff=>{return _0x1be1ff['id'];})});_0x1b5c2b[_0x143ae0(0x1a1)]?(await this['getChest'](),await Helper[_0x143ae0(0x1ee)](0x3e8,this[_0x143ae0(0x186)],_0x143ae0(0x1a7),this)):await Helper[_0x143ae0(0x1ee)](0xbb8,this[_0x143ae0(0x186)],''+_0x1b5c2b[_0x143ae0(0x1c6)],this);}catch(_0x55c04f){throw _0x55c04f;}}async[a2_0x15ff9c(0x190)](_0x4fe1b1){const _0x365491=a2_0x15ff9c;try{await Helper[_0x365491(0x1ee)](0x1f4,this[_0x365491(0x186)],_0x365491(0x1b7)+_0x4fe1b1[_0x365491(0x1d3)]+_0x365491(0x1ba),this);const _0x415b77=await this[_0x365491(0x1ec)](_0x365491(0x1b4),_0x365491(0x1bc),this['token'],{'level':_0x4fe1b1['level'],'petTypeId':PetList[_0x365491(0x1f1)][_0x365491(0x19e)](_0x157ab0=>_0x157ab0['name']==_0x4fe1b1[_0x365491(0x1d3)])[_0x365491(0x1a3)]});_0x415b77[_0x365491(0x1a1)]?(await this[_0x365491(0x1aa)](),await Helper[_0x365491(0x1ee)](0x3e8,this[_0x365491(0x186)],_0x365491(0x1c8),this)):await Helper[_0x365491(0x1ee)](0xbb8,this['account'],''+_0x415b77['message'],this);}catch(_0x2a50ec){throw _0x2a50ec;}}async[a2_0x15ff9c(0x1e2)](){const _0x12c4b9=a2_0x15ff9c;try{await Helper[_0x12c4b9(0x1ee)](0x1f4,this['account'],_0x12c4b9(0x18c),this);const _0x308836=await this[_0x12c4b9(0x1ec)]('/api/v1/user-collection/claim-gold',_0x12c4b9(0x1bc),this[_0x12c4b9(0x1c1)]);_0x308836[_0x12c4b9(0x1a1)]?(await this[_0x12c4b9(0x1d8)](),await Helper[_0x12c4b9(0x1ee)](0x3e8,this['account'],_0x12c4b9(0x1e7)+_0x308836[_0x12c4b9(0x1e3)][_0x12c4b9(0x193)]+_0x12c4b9(0x1cb),this)):await Helper[_0x12c4b9(0x1ee)](0xbb8,this['account'],''+_0x308836[_0x12c4b9(0x1c6)],this);}catch(_0xeab7ee){throw _0xeab7ee;}}async[a2_0x15ff9c(0x199)](){const _0x360b1c=a2_0x15ff9c;let _0x321253=[];for(const _0x4ceb8d of this[_0x360b1c(0x19c)]){const _0x31429b=_0x321253[_0x360b1c(0x19e)](_0x3561b1=>_0x3561b1['name']===_0x4ceb8d[_0x360b1c(0x1d3)]&&_0x3561b1[_0x360b1c(0x1a9)]===_0x4ceb8d['level']);_0x31429b?_0x31429b[_0x360b1c(0x1d5)]+=0x1:_0x321253[_0x360b1c(0x1af)]({..._0x4ceb8d,'count':0x1});}return _0x321253=_0x321253[_0x360b1c(0x198)](_0x5bf4fe=>_0x5bf4fe[_0x360b1c(0x1d5)]>=0x5),_0x321253;}}function a2_0x535f(){const _0x472603=['Successfully\x20planting\x20grapes\x20to\x20land\x20','count','/api/v1/players/plant?limit=3000','map','getUser','WSS\x20Connection\x20Timeout','Buying\x20Grapes...','missions','/api/v1/store/buy','land','login','/api/v1/user/daily-mission/','mission','harvestAll','claimGold','data','Successfully\x20Get\x20User\x20Land\x20Info','title','Getting\x20Seed\x20List...','Successfully\x20Claim\x20Gold,\x20got\x20','WSS\x20Handshake\x20Error:\x20','Getting\x20User\x20Info...','/api/v1/user-collection?limit=3000','/api/v1/auth/telegram','fetch','https://api.catopia.io','delay','gold','reduce','petTypeList','websocket','WSS\x20Connected...','24wtEpVj','error','disconnect','getAvailablePlant','51594rPVWyE','claimMission','entries','/claim','connect','account','933220GoFkEb','getLands','GET','socket','Socket\x20ID:\x20','Claiming\x20Gold...','/api/v1/players/plant/harvestAll','Planting\x20Gapes\x20seed\x20to\x20land...','getSeedList','upgradePet','plainToken','WSS\x20Error\x20:\x20','claimedCoin','Getting\x20Player\x20Plant...','buyingGrapes','/api/v1/players/chest?limit=3000','Claiming\x20Missions\x20','filter','generateUpgradablePet','plantString','Harvesting\x20all...','pet','chest','find','petCompanion','getChest','success','WSS\x20Disconnected:\x20','petTypeId','/api/v1/seed?limit=3000','Buying\x20common\x20chest...','plant','Successfully\x20Opening\x20Multiple\x20Chest','/api/v1/chest/open-multiple','level','getPet','519885cHwZIT','Getting\x20User\x20Land\x20Info...','WSS\x20Handshake\x20completed\x20and\x20connected.','join','push','Successfully\x20Get\x20User\x20Info','Connecting\x20to\x20WSS...','WSS\x20Connection\x20Error:\x20','info','/api/v1/players/pet/upgrade','Getting\x20player\x20pet...','Successfully\x20Get\x20Seed\x20List','Upgrading\x20pet\x20','Successfully\x20Get\x20Player\x20Plant','query','...','Successfully\x20Buying\x201\x20Grapes','POST','seed','WSS\x20Handshake\x20Timeout','/api/v1/players/plant','6imbvYT','token','toLowerCase','3102430GTPGZy','16GbLQpn','1038758CIlVZa','message','POSt','Successfully\x20Upgrading\x20Pet','refreshToken','plantSeed','\x20GOLD','/api/v1/players/land?limit=3000','gem','accessToken','Successfully\x20Claim\x20Misisons','Error\x20:\x20','614015BgVqAz','139302CGGxbn','name'];a2_0x535f=function(){return _0x472603;};return a2_0x535f();}