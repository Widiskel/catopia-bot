function a2_0x57b2(){const _0x1c5590=['Try\x20to\x20Login...','Harvesting\x20all...','8984829HvEXlM','Successfully\x20get\x20player\x20pet','mission','Error\x20:\x20','21728410JSsPpo','Successfully\x20Buying\x201\x20Grapes','claimMission','/api/v1/user/daily-mission/','/api/v1/seed?limit=3000','data','WSS\x20Connected...','pet','fetch','delay','62469tzvPuh','WSS\x20Connection\x20Timeout','petCompanion','Socket\x20ID:\x20','POSt','petTypeId','queryObj','Buying\x20Grapes...','initWss','login','title','gold','https://api.catopia.io','/api/v1/players/plant?limit=3000','\x20GOLD','WSS\x20Handshake\x20completed\x20and\x20connected.','getAvailablePlant','harvestAll','connect_error','/api/v1/user/daily-mission?limit=3000','success','getChest','find','toLowerCase','Getting\x20player\x20pet...','Successfully\x20Get\x20Player\x20Plant','plant','74xRQwNd','getSeedList','getLands','getUser','openChest','plantSeed','Successfully\x20Get\x20User\x20Info','519561Ykqsju','/api/v1/user-collection?limit=3000','/api/v1/players/plant','464395uXAIGw','Upgrading\x20pet\x20','land','\x20GEM\x20&\x20','gem','message','account','WSS\x20Error\x20:\x20','wss://cowtopia-ws.tonfarmer.com','/api/v1/players/land?limit=3000','Successfully\x20Get\x20Misisons','Successfully\x20Login','Successfully\x20Opening\x20Multiple\x20Chest','websocket','count','chest','Claiming\x20Missions\x20','connect_timeout','Connecting\x20to\x20WSS...','WSS\x20Connection\x20Error:\x20','missions','2762384gUhljl','filter','join','Successfully\x20Claim\x20Misisons','Successfully\x20planting\x20grapes\x20to\x20land\x20','WSS\x20Handshake\x20Timeout','Getting\x20Missions...','map','Buying\x20common\x20chest...','level','type','token','/api/v1/players/plant/harvestAll','socket','...','/api/v1/store/buy','push','user','getMission','3537565LZsCIU','6dHjcqs','seed','info','16qTGcqn','getPet','query','buyingGrapes','Successfully\x20Get\x20User\x20Land\x20Info','Getting\x20User\x20Land\x20Info...','Getting\x20Seed\x20List...','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','name','upgradePet','POST','plantString','GET','Successfully\x20Get\x20Seed\x20List','error','/api/v1/players/pet?limit=3000'];a2_0x57b2=function(){return _0x1c5590;};return a2_0x57b2();}const a2_0x30b8ce=a2_0xe2c8;(function(_0x1035f7,_0x2f0f73){const _0x282ba6=a2_0xe2c8,_0x23490e=_0x1035f7();while(!![]){try{const _0x5aaa57=-parseInt(_0x282ba6(0x140))/0x1+parseInt(_0x282ba6(0x136))/0x2*(-parseInt(_0x282ba6(0x11b))/0x3)+-parseInt(_0x282ba6(0x155))/0x4+-parseInt(_0x282ba6(0x168))/0x5+-parseInt(_0x282ba6(0x169))/0x6*(-parseInt(_0x282ba6(0x10d))/0x7)+-parseInt(_0x282ba6(0x16c))/0x8*(parseInt(_0x282ba6(0x13d))/0x9)+parseInt(_0x282ba6(0x111))/0xa;if(_0x5aaa57===_0x2f0f73)break;else _0x23490e['push'](_0x23490e['shift']());}catch(_0x3b1325){_0x23490e['push'](_0x23490e['shift']());}}}(a2_0x57b2,0xacd87));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x26aba1 from'../utils/logger.js';function a2_0xe2c8(_0x103103,_0x52e950){const _0x57b234=a2_0x57b2();return a2_0xe2c8=function(_0xe2c81c,_0x8242e6){_0xe2c81c=_0xe2c81c-0xfe;let _0x40bd9f=_0x57b234[_0xe2c81c];return _0x40bd9f;},a2_0xe2c8(_0x103103,_0x52e950);}import{io}from'socket.io-client';import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x5ab426,_0x59f686,_0x4d27f4){const _0x24e630=a2_0xe2c8;super(_0x59f686,_0x24e630(0x127)),this['account']=_0x5ab426,this[_0x24e630(0x16e)]=_0x59f686,this[_0x24e630(0x121)]=_0x4d27f4;}async[a2_0x30b8ce(0x124)](){const _0x20640a=a2_0x30b8ce;try{await Helper[_0x20640a(0x11a)](0x1f4,this[_0x20640a(0x146)],_0x20640a(0x10b),this);const _0xd91db1=await this['fetch']('/api/v1/auth/telegram',_0x20640a(0x105),undefined,{'initData':this[_0x20640a(0x16e)]});await Helper[_0x20640a(0x11a)](0x3e8,this[_0x20640a(0x146)],_0x20640a(0x14b),this),this['token']=_0xd91db1[_0x20640a(0x116)]['accessToken'],this['refreshToken']=_0xd91db1['refreshToken'];}catch(_0x2be376){throw _0x2be376;}}async[a2_0x30b8ce(0x139)](_0x431572=![]){const _0x5bb165=a2_0x30b8ce;try{if(_0x431572)await Helper[_0x5bb165(0x11a)](0x1f4,this[_0x5bb165(0x146)],'Getting\x20User\x20Info...',this);const _0x5e753d=await this[_0x5bb165(0x119)](_0x5bb165(0x13e),_0x5bb165(0x107),this['token']);if(_0x5e753d[_0x5bb165(0x12f)]==!![]){if(_0x431572)await Helper[_0x5bb165(0x11a)](0x3e8,this[_0x5bb165(0x146)],_0x5bb165(0x13c),this);this[_0x5bb165(0x166)]=_0x5e753d['data'];}else await Helper['delay'](0x1388,this['account'],'Error\x20:\x20'+_0x5e753d['message'],this);}catch(_0x16c544){throw _0x16c544;}}async[a2_0x30b8ce(0x123)](){return new Promise(async(_0x1bd2ba,_0x188dfc)=>{const _0x39bf27=a2_0xe2c8;await Helper['delay'](0x3e8,this[_0x39bf27(0x146)],_0x39bf27(0x152),this),this['socket']=io(_0x39bf27(0x148),{'auth':{'token':this['plainToken']},'transports':[_0x39bf27(0x14d)]}),this[_0x39bf27(0x162)]['on']('connect',async()=>{const _0x4b0a75=_0x39bf27;await Helper[_0x4b0a75(0x11a)](0x3e8,this[_0x4b0a75(0x146)],_0x4b0a75(0x117),this),a2_0x26aba1['info'](_0x4b0a75(0x12a)),a2_0x26aba1[_0x4b0a75(0x16b)](_0x4b0a75(0x11e)+this['socket']['id']),_0x1bd2ba();}),this[_0x39bf27(0x162)]['on'](_0x39bf27(0x12d),async _0x2cf1cc=>{const _0x3ae348=_0x39bf27;await Helper[_0x3ae348(0x11a)](0x3e8,this[_0x3ae348(0x146)],_0x3ae348(0x153)+_0x2cf1cc['message'],this),a2_0x26aba1[_0x3ae348(0x109)]('WSS\x20Handshake\x20Error:\x20'+_0x2cf1cc[_0x3ae348(0x145)]),_0x188dfc(_0x2cf1cc);}),this[_0x39bf27(0x162)]['on'](_0x39bf27(0x151),async()=>{const _0x383eff=_0x39bf27;await Helper[_0x383eff(0x11a)](0x3e8,this[_0x383eff(0x146)],_0x383eff(0x11c),this),a2_0x26aba1['error']('WSS\x20Handshake\x20Timeout'),_0x188dfc(new Error(_0x383eff(0x15a)));}),this['socket']['on'](_0x39bf27(0x109),async _0x5edc47=>{const _0x173334=_0x39bf27;await Helper['delay'](0x3e8,this[_0x173334(0x146)],_0x173334(0x147)+_0x5edc47[_0x173334(0x145)],this),a2_0x26aba1['error'](_0x173334(0x147)+_0x5edc47[_0x173334(0x145)]),_0x188dfc(_0x5edc47);}),this[_0x39bf27(0x162)]['on']('disconnect',async _0x25b219=>{const _0xc80164=_0x39bf27;await Helper['delay'](0x3e8,this[_0xc80164(0x146)],'WSS\x20Connection\x20Closed\x20'+_0x25b219+_0xc80164(0x163),this),a2_0x26aba1['info']('WSS\x20Disconnected:\x20'+_0x25b219);});});}async[a2_0x30b8ce(0x167)](_0x521e7e=![]){const _0x3e4e86=a2_0x30b8ce;try{if(_0x521e7e)await Helper[_0x3e4e86(0x11a)](0x1f4,this['account'],_0x3e4e86(0x15b),this);this[_0x3e4e86(0x154)]=[];const _0x459a6b=await this[_0x3e4e86(0x119)](_0x3e4e86(0x12e),_0x3e4e86(0x107),this[_0x3e4e86(0x160)]);if(_0x459a6b['success']){if(_0x521e7e)await Helper[_0x3e4e86(0x11a)](0x3e8,this[_0x3e4e86(0x146)],_0x3e4e86(0x14a),this);this[_0x3e4e86(0x154)]=_0x459a6b[_0x3e4e86(0x116)];}else await Helper['delay'](0x1388,this['account'],_0x3e4e86(0x110)+_0x459a6b[_0x3e4e86(0x145)],this);}catch(_0x3db687){throw _0x3db687;}}async[a2_0x30b8ce(0x113)](_0x4a4b0e){const _0x5deede=a2_0x30b8ce;try{await Helper[_0x5deede(0x11a)](0x1f4,this['account'],_0x5deede(0x150)+_0x4a4b0e[_0x5deede(0x10f)][_0x5deede(0x125)]+_0x5deede(0x163),this);const _0x327fee=await this['fetch'](_0x5deede(0x114)+_0x4a4b0e['id']+'/claim',_0x5deede(0x105),this[_0x5deede(0x160)]);_0x327fee[_0x5deede(0x12f)]?(await Helper[_0x5deede(0x11a)](0x3e8,this[_0x5deede(0x146)],_0x5deede(0x158),this),await this[_0x5deede(0x139)](),await this[_0x5deede(0x167)]()):await Helper[_0x5deede(0x11a)](0x1388,this[_0x5deede(0x146)],'Error\x20:\x20'+_0x327fee[_0x5deede(0x145)],this);}catch(_0x44e898){throw _0x44e898;}}async[a2_0x30b8ce(0x137)](){const _0x1558fe=a2_0x30b8ce;try{await Helper[_0x1558fe(0x11a)](0x1f4,this[_0x1558fe(0x146)],_0x1558fe(0x101),this);const _0x2acd3c=await this['fetch'](_0x1558fe(0x115),_0x1558fe(0x107),this[_0x1558fe(0x160)]);_0x2acd3c['success']?(await Helper[_0x1558fe(0x11a)](0x3e8,this['account'],_0x1558fe(0x108),this),this[_0x1558fe(0x16a)]=_0x2acd3c[_0x1558fe(0x116)]):await Helper[_0x1558fe(0x11a)](0x1388,this[_0x1558fe(0x146)],_0x1558fe(0x110)+_0x2acd3c[_0x1558fe(0x145)],this);}catch(_0x395528){throw _0x395528;}}async['getAvailablePlant'](_0x1e264f=![]){const _0x4c34dc=a2_0x30b8ce;try{if(_0x1e264f)await Helper[_0x4c34dc(0x11a)](0x1f4,this[_0x4c34dc(0x146)],'Getting\x20Player\x20Plant...',this);const _0x3f6e22=await this[_0x4c34dc(0x119)](_0x4c34dc(0x128),_0x4c34dc(0x107),this[_0x4c34dc(0x160)]);if(_0x3f6e22[_0x4c34dc(0x12f)]){if(_0x1e264f)await Helper[_0x4c34dc(0x11a)](0x3e8,this[_0x4c34dc(0x146)],_0x4c34dc(0x134),this);this[_0x4c34dc(0x135)]=_0x3f6e22['data'];const _0x2fcb55=this[_0x4c34dc(0x135)]['reduce']((_0x54f144,_0x2aadcd)=>{const _0x4a2dcc=_0x4c34dc,_0x459937=_0x2aadcd['name'][_0x4a2dcc(0x132)]();return _0x54f144[_0x459937]=(_0x54f144[_0x459937]||0x0)+0x1,_0x54f144;},{});this[_0x4c34dc(0x106)]=Object['entries'](_0x2fcb55)[_0x4c34dc(0x15c)](([_0x2056d6,_0x3bcead])=>_0x3bcead+'\x20'+_0x2056d6+(_0x3bcead>0x1?'s':''))[_0x4c34dc(0x157)]('\x20');}else await Helper[_0x4c34dc(0x11a)](0x1388,this[_0x4c34dc(0x146)],'Error\x20:\x20'+_0x3f6e22['message'],this);}catch(_0x5c837a){throw _0x5c837a;}}async[a2_0x30b8ce(0xfe)](){const _0x348b1f=a2_0x30b8ce;try{await Helper['delay'](0x1f4,this[_0x348b1f(0x146)],_0x348b1f(0x122),this);const _0x54a52f=await this[_0x348b1f(0x119)](_0x348b1f(0x164),'POST',this[_0x348b1f(0x160)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this['getUser'](),_0x54a52f[_0x348b1f(0x12f)]?(await Helper['delay'](0x3e8,this[_0x348b1f(0x146)],_0x348b1f(0x112),this),await this[_0x348b1f(0x12b)]()):(await Helper['delay'](0x1388,this[_0x348b1f(0x146)],''+_0x54a52f[_0x348b1f(0x145)],this),await this['harvestAll']());}catch(_0x150c4a){throw _0x150c4a;}}async[a2_0x30b8ce(0x138)](_0x29efd6=![]){const _0x484a29=a2_0x30b8ce;try{if(_0x29efd6)await Helper[_0x484a29(0x11a)](0x1f4,this[_0x484a29(0x146)],_0x484a29(0x100),this);const _0x213356=await this['fetch'](_0x484a29(0x149),_0x484a29(0x107),this['token']);if(_0x213356[_0x484a29(0x12f)]){if(_0x29efd6)await Helper[_0x484a29(0x11a)](0x3e8,this[_0x484a29(0x146)],_0x484a29(0xff),this);this[_0x484a29(0x142)]=_0x213356[_0x484a29(0x116)];}else await Helper[_0x484a29(0x11a)](0x1388,this['account'],'Error\x20:\x20'+_0x213356['message'],this);}catch(_0x4b5290){throw _0x4b5290;}}async[a2_0x30b8ce(0x13b)](_0x554744){const _0x3089d7=a2_0x30b8ce;try{await Helper[_0x3089d7(0x11a)](0x1f4,this[_0x3089d7(0x146)],'Planting\x20Gapes\x20seed\x20to\x20land...',this);const _0x3284ef=await this[_0x3089d7(0x119)](_0x3089d7(0x13f),_0x3089d7(0x11f),this['token'],{'plantId':this[_0x3089d7(0x135)][0x0]['id'],'landId':_0x554744});_0x3284ef[_0x3089d7(0x12f)]?(await Helper[_0x3089d7(0x11a)](0x3e8,this['account'],_0x3089d7(0x159)+_0x554744,this),await this['getLands'](),await this[_0x3089d7(0x12b)]()):await Helper[_0x3089d7(0x11a)](0x1388,this['account'],'Error\x20:\x20'+_0x3284ef[_0x3089d7(0x145)],this);}catch(_0x10cb5d){throw _0x10cb5d;}}async[a2_0x30b8ce(0x12c)](){const _0x1fbc15=a2_0x30b8ce;try{await Helper[_0x1fbc15(0x11a)](0x1f4,this[_0x1fbc15(0x146)],_0x1fbc15(0x10c),this);const _0x42f5d9=await this[_0x1fbc15(0x119)](_0x1fbc15(0x161),_0x1fbc15(0x11f),this[_0x1fbc15(0x160)]);_0x42f5d9[_0x1fbc15(0x12f)]?(await Helper[_0x1fbc15(0x11a)](0x7d0,this[_0x1fbc15(0x146)],_0x1fbc15(0x102)+_0x42f5d9[_0x1fbc15(0x116)][_0x1fbc15(0x144)]+_0x1fbc15(0x143)+_0x42f5d9[_0x1fbc15(0x116)][_0x1fbc15(0x126)]+_0x1fbc15(0x129),this),await this['getUser'](),await this[_0x1fbc15(0x138)](),await this['getAvailablePlant']()):await Helper[_0x1fbc15(0x11a)](0x7d0,this[_0x1fbc15(0x146)],''+_0x42f5d9[_0x1fbc15(0x145)],this);}catch(_0x288fe9){throw _0x288fe9;}}async['getPet'](_0x29544d){const _0x3438b6=a2_0x30b8ce;try{if(_0x29544d)await Helper[_0x3438b6(0x11a)](0x1f4,this[_0x3438b6(0x146)],_0x3438b6(0x133),this);const _0x249be5=await this[_0x3438b6(0x119)](_0x3438b6(0x10a),_0x3438b6(0x107),this['token']);if(_0x249be5[_0x3438b6(0x12f)]){if(_0x29544d)await Helper[_0x3438b6(0x11a)](0xbb8,this[_0x3438b6(0x146)],_0x3438b6(0x10e),this);this[_0x3438b6(0x118)]=_0x249be5[_0x3438b6(0x116)];}else await Helper[_0x3438b6(0x11a)](0xbb8,this[_0x3438b6(0x146)],''+_0x249be5[_0x3438b6(0x145)],this);}catch(_0x3a16ee){throw _0x3a16ee;}}async['buyChest'](){const _0x4fc529=a2_0x30b8ce;try{await Helper[_0x4fc529(0x11a)](0x1f4,this[_0x4fc529(0x146)],_0x4fc529(0x15d),this);const _0x44a35b=await this[_0x4fc529(0x119)](_0x4fc529(0x164),_0x4fc529(0x105),this[_0x4fc529(0x160)],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x44a35b[_0x4fc529(0x12f)]?(await this[_0x4fc529(0x139)](),await this[_0x4fc529(0x130)]()):await Helper[_0x4fc529(0x11a)](0xbb8,this['account'],''+_0x44a35b['message'],this);}catch(_0x40c170){throw _0x40c170;}}async[a2_0x30b8ce(0x130)](){const _0x35393f=a2_0x30b8ce;try{const _0x1412f0=await this['fetch']('/api/v1/players/chest?limit=3000',_0x35393f(0x107),this['token']);_0x1412f0['success']?this['chest']=_0x1412f0[_0x35393f(0x116)]:await Helper[_0x35393f(0x11a)](0xbb8,this[_0x35393f(0x146)],''+res['message'],this);}catch(_0x3154d0){throw _0x3154d0;}}async[a2_0x30b8ce(0x13a)](){const _0x947d71=a2_0x30b8ce;try{await Helper[_0x947d71(0x11a)](0x1f4,this[_0x947d71(0x146)],'Opening\x20multipe\x20chest...',this);const _0x4904ed=await this[_0x947d71(0x119)]('/api/v1/chest/open-multiple',_0x947d71(0x105),this['token'],{'petTypeIds':PetList[_0x947d71(0x11d)]['find'](_0x36499f=>_0x36499f[_0x947d71(0x15f)]=='A')[_0x947d71(0x116)],'chestIds':this[_0x947d71(0x14f)][_0x947d71(0x15c)](_0xa43d4b=>{return _0xa43d4b['id'];})});_0x4904ed[_0x947d71(0x12f)]?(await this[_0x947d71(0x130)](),await Helper[_0x947d71(0x11a)](0x3e8,this[_0x947d71(0x146)],_0x947d71(0x14c),this)):await Helper[_0x947d71(0x11a)](0xbb8,this[_0x947d71(0x146)],''+_0x4904ed[_0x947d71(0x145)],this);}catch(_0x269a4b){throw _0x269a4b;}}async[a2_0x30b8ce(0x104)](_0xd9acfb){const _0x4421a6=a2_0x30b8ce;try{await Helper['delay'](0x1f4,this[_0x4421a6(0x146)],_0x4421a6(0x141)+_0xd9acfb[_0x4421a6(0x103)]+_0x4421a6(0x163),this);const _0x5398d1=await this['fetch']('/api/v1/players/pet/upgrade','POST',this['token'],{'level':_0xd9acfb[_0x4421a6(0x15e)],'petTypeId':PetList['petTypeList']['find'](_0x32ade2=>_0x32ade2[_0x4421a6(0x103)]==_0xd9acfb[_0x4421a6(0x103)])[_0x4421a6(0x120)]});_0x5398d1[_0x4421a6(0x12f)]?(await this[_0x4421a6(0x16d)](),await Helper['delay'](0x3e8,this[_0x4421a6(0x146)],'Successfully\x20Upgrading\x20Pet',this)):await Helper[_0x4421a6(0x11a)](0xbb8,this[_0x4421a6(0x146)],''+_0x5398d1[_0x4421a6(0x145)],this);}catch(_0x54eb2d){throw _0x54eb2d;}}async['generateUpgradablePet'](){const _0x57f981=a2_0x30b8ce;let _0x21d9e2=[];for(const _0x1b1380 of this[_0x57f981(0x118)]){const _0x8e5500=_0x21d9e2[_0x57f981(0x131)](_0x2de078=>_0x2de078['name']===_0x1b1380[_0x57f981(0x103)]&&_0x2de078[_0x57f981(0x15e)]===_0x1b1380[_0x57f981(0x15e)]);_0x8e5500?_0x8e5500[_0x57f981(0x14e)]+=0x1:_0x21d9e2[_0x57f981(0x165)]({..._0x1b1380,'count':0x1});}return _0x21d9e2=_0x21d9e2[_0x57f981(0x156)](_0xb287fa=>_0xb287fa[_0x57f981(0x14e)]>=0x5),_0x21d9e2;}}