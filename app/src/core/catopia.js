function a2_0x4781(_0x3fc2ca,_0x1816bd){const _0x203bb5=a2_0x203b();return a2_0x4781=function(_0x4781ab,_0x5e9f36){_0x4781ab=_0x4781ab-0x14b;let _0x318def=_0x203bb5[_0x4781ab];return _0x318def;},a2_0x4781(_0x3fc2ca,_0x1816bd);}const a2_0x5bfefa=a2_0x4781;(function(_0x5b8849,_0x517b23){const _0xffc701=a2_0x4781,_0x28d4ae=_0x5b8849();while(!![]){try{const _0x3599d0=-parseInt(_0xffc701(0x173))/0x1+parseInt(_0xffc701(0x185))/0x2+parseInt(_0xffc701(0x16c))/0x3+-parseInt(_0xffc701(0x175))/0x4*(-parseInt(_0xffc701(0x17a))/0x5)+parseInt(_0xffc701(0x164))/0x6*(-parseInt(_0xffc701(0x14d))/0x7)+-parseInt(_0xffc701(0x163))/0x8*(parseInt(_0xffc701(0x186))/0x9)+-parseInt(_0xffc701(0x165))/0xa*(-parseInt(_0xffc701(0x174))/0xb);if(_0x3599d0===_0x517b23)break;else _0x28d4ae['push'](_0x28d4ae['shift']());}catch(_0x50a35c){_0x28d4ae['push'](_0x28d4ae['shift']());}}}(a2_0x203b,0x9dde5));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0xd5fb52 from'../utils/logger.js';import{io}from'socket.io-client';export class Catopia extends API{constructor(_0x44346b,_0x1bc57a,_0x55eca9){const _0x26f1b4=a2_0x4781;super(_0x1bc57a,_0x26f1b4(0x156)),this['account']=_0x44346b,this[_0x26f1b4(0x14b)]=_0x1bc57a,this['queryObj']=_0x55eca9;}async['login'](){const _0x14271f=a2_0x4781;try{await Helper['delay'](0x1f4,this[_0x14271f(0x19b)],_0x14271f(0x192),this);const _0x29b0ea=await this[_0x14271f(0x19c)]('/api/v1/auth/telegram',_0x14271f(0x195),undefined,{'initData':this[_0x14271f(0x14b)]});await Helper[_0x14271f(0x180)](0x3e8,this[_0x14271f(0x19b)],_0x14271f(0x196),this),this['token']=_0x29b0ea['data']['accessToken'],this[_0x14271f(0x166)]=_0x29b0ea[_0x14271f(0x166)];}catch(_0x4526c0){throw _0x4526c0;}}async[a2_0x5bfefa(0x177)](_0xb0ae28=![]){const _0x4e1784=a2_0x5bfefa;try{if(_0xb0ae28)await Helper[_0x4e1784(0x180)](0x1f4,this[_0x4e1784(0x19b)],_0x4e1784(0x18b),this);const _0x25a231=await this[_0x4e1784(0x19c)](_0x4e1784(0x176),_0x4e1784(0x178),this['token']);if(_0x25a231[_0x4e1784(0x18d)]==!![]){if(_0xb0ae28)await Helper[_0x4e1784(0x180)](0x3e8,this[_0x4e1784(0x19b)],_0x4e1784(0x15d),this);this[_0x4e1784(0x16a)]=_0x25a231['data'];}else await Helper['delay'](0x1388,this[_0x4e1784(0x19b)],_0x4e1784(0x168)+_0x25a231[_0x4e1784(0x15f)],this);}catch(_0x1d4194){throw _0x1d4194;}}async['initWss'](){return new Promise(async(_0x55d9bf,_0x3b9108)=>{const _0x1a6680=a2_0x4781;await Helper[_0x1a6680(0x180)](0x3e8,this[_0x1a6680(0x19b)],'Connecting\x20to\x20WSS...',this),this[_0x1a6680(0x17c)]=io('wss://cowtopia-ws.tonfarmer.com',{'auth':{'token':this[_0x1a6680(0x199)]},'transports':['websocket']}),this['socket']['on'](_0x1a6680(0x154),async()=>{const _0x3f1b17=_0x1a6680;await Helper['delay'](0x3e8,this['account'],'WSS\x20Connected...',this),a2_0xd5fb52[_0x3f1b17(0x182)](_0x3f1b17(0x17d)),a2_0xd5fb52['info']('Socket\x20ID:\x20'+this[_0x3f1b17(0x17c)]['id']),_0x55d9bf();}),this[_0x1a6680(0x17c)]['on']('connect_error',async _0x4c93be=>{const _0x1d7f1e=_0x1a6680;await Helper['delay'](0x3e8,this['account'],_0x1d7f1e(0x15a)+_0x4c93be[_0x1d7f1e(0x15f)],this),a2_0xd5fb52[_0x1d7f1e(0x183)](_0x1d7f1e(0x172)+_0x4c93be[_0x1d7f1e(0x15f)]),_0x3b9108(_0x4c93be);}),this[_0x1a6680(0x17c)]['on'](_0x1a6680(0x184),async()=>{const _0x2790bc=_0x1a6680;await Helper[_0x2790bc(0x180)](0x3e8,this[_0x2790bc(0x19b)],_0x2790bc(0x171),this),a2_0xd5fb52['error'](_0x2790bc(0x18f)),_0x3b9108(new Error(_0x2790bc(0x18f)));}),this['socket']['on']('error',async _0xcfd03f=>{const _0xb64e33=_0x1a6680;await Helper['delay'](0x3e8,this[_0xb64e33(0x19b)],_0xb64e33(0x181)+_0xcfd03f[_0xb64e33(0x15f)],this),a2_0xd5fb52[_0xb64e33(0x183)](_0xb64e33(0x181)+_0xcfd03f[_0xb64e33(0x15f)]),_0x3b9108(_0xcfd03f);}),this[_0x1a6680(0x17c)]['on'](_0x1a6680(0x16f),async _0xe54af7=>{const _0x4726d8=_0x1a6680;await Helper[_0x4726d8(0x180)](0x3e8,this['account'],_0x4726d8(0x19a)+_0xe54af7+_0x4726d8(0x161),this),a2_0xd5fb52['info'](_0x4726d8(0x150)+_0xe54af7);});});}async['getMission'](_0x33cbaf=![]){const _0x1d62b5=a2_0x5bfefa;try{if(_0x33cbaf)await Helper[_0x1d62b5(0x180)](0x1f4,this['account'],_0x1d62b5(0x19d),this);this[_0x1d62b5(0x198)]=[];const _0x5944fd=await this[_0x1d62b5(0x19c)](_0x1d62b5(0x17b),_0x1d62b5(0x178),this[_0x1d62b5(0x17f)]);if(_0x5944fd[_0x1d62b5(0x18d)]){if(_0x33cbaf)await Helper[_0x1d62b5(0x180)](0x3e8,this[_0x1d62b5(0x19b)],_0x1d62b5(0x17e),this);this[_0x1d62b5(0x198)]=_0x5944fd[_0x1d62b5(0x189)];}else await Helper[_0x1d62b5(0x180)](0x1388,this[_0x1d62b5(0x19b)],_0x1d62b5(0x168)+_0x5944fd[_0x1d62b5(0x15f)],this);}catch(_0x223eb3){throw _0x223eb3;}}async[a2_0x5bfefa(0x167)](_0x3d8099){const _0x41bc26=a2_0x5bfefa;try{await Helper[_0x41bc26(0x180)](0x1f4,this[_0x41bc26(0x19b)],'Claiming\x20Missions\x20'+_0x3d8099['mission'][_0x41bc26(0x14e)]+_0x41bc26(0x161),this);const _0x5709c9=await this[_0x41bc26(0x19c)]('/api/v1/user/daily-mission/'+_0x3d8099['id']+_0x41bc26(0x14f),_0x41bc26(0x195),this['token']);_0x5709c9[_0x41bc26(0x18d)]?(await Helper[_0x41bc26(0x180)](0x3e8,this[_0x41bc26(0x19b)],_0x41bc26(0x188),this),await this['getUser'](),await this['getMission']()):await Helper[_0x41bc26(0x180)](0x1388,this['account'],_0x41bc26(0x168)+_0x5709c9['message'],this);}catch(_0x267a0d){throw _0x267a0d;}}async[a2_0x5bfefa(0x18a)](){const _0x30dba2=a2_0x5bfefa;try{await Helper['delay'](0x1f4,this['account'],'Getting\x20Seed\x20List...',this);const _0x22c195=await this[_0x30dba2(0x19c)](_0x30dba2(0x16d),_0x30dba2(0x178),this['token']);_0x22c195['success']?(await Helper[_0x30dba2(0x180)](0x3e8,this[_0x30dba2(0x19b)],_0x30dba2(0x159),this),this[_0x30dba2(0x190)]=_0x22c195[_0x30dba2(0x189)]):await Helper[_0x30dba2(0x180)](0x1388,this[_0x30dba2(0x19b)],'Error\x20:\x20'+_0x22c195[_0x30dba2(0x15f)],this);}catch(_0x1b97ef){throw _0x1b97ef;}}async[a2_0x5bfefa(0x197)](_0x38c0a6=![]){const _0x48cd3d=a2_0x5bfefa;try{if(_0x38c0a6)await Helper['delay'](0x1f4,this[_0x48cd3d(0x19b)],_0x48cd3d(0x193),this);const _0x4c580f=await this[_0x48cd3d(0x19c)](_0x48cd3d(0x15c),_0x48cd3d(0x178),this['token']);if(_0x4c580f[_0x48cd3d(0x18d)]){if(_0x38c0a6)await Helper[_0x48cd3d(0x180)](0x3e8,this[_0x48cd3d(0x19b)],_0x48cd3d(0x187),this);this[_0x48cd3d(0x191)]=_0x4c580f[_0x48cd3d(0x189)];const _0x483ba6=this[_0x48cd3d(0x191)][_0x48cd3d(0x16e)]((_0x5276e2,_0x4ddcfc)=>{const _0x5c2068=_0x4ddcfc['name']['toLowerCase']();return _0x5276e2[_0x5c2068]=(_0x5276e2[_0x5c2068]||0x0)+0x1,_0x5276e2;},{});this[_0x48cd3d(0x16b)]=Object['entries'](_0x483ba6)[_0x48cd3d(0x15e)](([_0x14aba8,_0x1c3f40])=>_0x1c3f40+'\x20'+_0x14aba8+(_0x1c3f40>0x1?'s':''))['join']('\x20');}else await Helper[_0x48cd3d(0x180)](0x1388,this[_0x48cd3d(0x19b)],_0x48cd3d(0x168)+_0x4c580f['message'],this);}catch(_0x2fe88f){throw _0x2fe88f;}}async[a2_0x5bfefa(0x152)](){const _0x4a20ae=a2_0x5bfefa;try{await Helper[_0x4a20ae(0x180)](0x1f4,this['account'],_0x4a20ae(0x151),this);const _0x32b078=await this[_0x4a20ae(0x19c)](_0x4a20ae(0x18e),'POST',this[_0x4a20ae(0x17f)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x4a20ae(0x177)](),_0x32b078[_0x4a20ae(0x18d)]?(await Helper[_0x4a20ae(0x180)](0x3e8,this[_0x4a20ae(0x19b)],_0x4a20ae(0x170),this),await this[_0x4a20ae(0x197)]()):await Helper[_0x4a20ae(0x180)](0x1388,this['account'],''+_0x32b078[_0x4a20ae(0x15f)],this);}catch(_0x51cda9){throw _0x51cda9;}}async[a2_0x5bfefa(0x14c)](_0x18a481=![]){const _0x434c0e=a2_0x5bfefa;try{if(_0x18a481)await Helper['delay'](0x1f4,this[_0x434c0e(0x19b)],_0x434c0e(0x194),this);const _0x5403cb=await this[_0x434c0e(0x19c)]('/api/v1/players/land?limit=3000','GET',this[_0x434c0e(0x17f)]);if(_0x5403cb['success']){if(_0x18a481)await Helper[_0x434c0e(0x180)](0x3e8,this[_0x434c0e(0x19b)],'Successfully\x20Get\x20User\x20Land\x20Info',this);this['land']=_0x5403cb[_0x434c0e(0x189)];}else await Helper[_0x434c0e(0x180)](0x1388,this[_0x434c0e(0x19b)],_0x434c0e(0x168)+_0x5403cb[_0x434c0e(0x15f)],this);}catch(_0x48ad65){throw _0x48ad65;}}async['plantSeed'](_0x5da7e3){const _0x1d1ff4=a2_0x5bfefa;try{await Helper[_0x1d1ff4(0x180)](0x1f4,this[_0x1d1ff4(0x19b)],_0x1d1ff4(0x18c),this);const _0x16dfa0=await this[_0x1d1ff4(0x19c)](_0x1d1ff4(0x155),_0x1d1ff4(0x160),this['token'],{'plantId':this['plant'][0x0]['id'],'landId':_0x5da7e3});_0x16dfa0[_0x1d1ff4(0x18d)]?(await Helper[_0x1d1ff4(0x180)](0x3e8,this[_0x1d1ff4(0x19b)],_0x1d1ff4(0x15b)+_0x5da7e3,this),await this[_0x1d1ff4(0x14c)](),await this[_0x1d1ff4(0x197)]()):await Helper[_0x1d1ff4(0x180)](0x1388,this[_0x1d1ff4(0x19b)],_0x1d1ff4(0x168)+_0x16dfa0[_0x1d1ff4(0x15f)],this);}catch(_0x31f8e1){throw _0x31f8e1;}}async[a2_0x5bfefa(0x158)](){const _0x15ae4f=a2_0x5bfefa;try{await Helper[_0x15ae4f(0x180)](0x1f4,this[_0x15ae4f(0x19b)],'Harvesting\x20all...',this);const _0x45d1cd=await this[_0x15ae4f(0x19c)](_0x15ae4f(0x153),_0x15ae4f(0x160),this['token']);_0x45d1cd[_0x15ae4f(0x18d)]?(await Helper['delay'](0xbb8,this[_0x15ae4f(0x19b)],_0x15ae4f(0x179)+_0x45d1cd['data']['gem']+_0x15ae4f(0x157)+_0x45d1cd[_0x15ae4f(0x189)][_0x15ae4f(0x169)]+_0x15ae4f(0x162),this),await this['getUser'](),await this[_0x15ae4f(0x14c)](),await this[_0x15ae4f(0x197)]()):await Helper[_0x15ae4f(0x180)](0xbb8,this[_0x15ae4f(0x19b)],''+_0x45d1cd[_0x15ae4f(0x15f)],this);}catch(_0x4ae77a){throw _0x4ae77a;}}}function a2_0x203b(){const _0x11280=['464HkZSKH','/api/v1/user-collection?limit=3000','getUser','GET','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','34405WJIgsi','/api/v1/user/daily-mission?limit=3000','socket','WSS\x20Handshake\x20completed\x20and\x20connected.','Successfully\x20Get\x20Misisons','token','delay','WSS\x20Error\x20:\x20','info','error','connect_timeout','933746fDKlfh','3114AVRXFd','Successfully\x20Get\x20Player\x20Plant','Successfully\x20Claim\x20Misisons','data','getSeedList','Getting\x20User\x20Info...','Planting\x20Gapes\x20seed\x20to\x20land...','success','/api/v1/store/buy','WSS\x20Handshake\x20Timeout','seed','plant','Try\x20to\x20Login...','Getting\x20Player\x20Plant...','Getting\x20User\x20Land\x20Info...','POST','Successfully\x20Login','getAvailablePlant','missions','plainToken','WSS\x20Connection\x20Closed\x20','account','fetch','Getting\x20Missions...','query','getLands','54411XhwVTL','title','/claim','WSS\x20Disconnected:\x20','Buying\x20Grapes...','buyingGrapes','/api/v1/players/plant/harvestAll','connect','/api/v1/players/plant','https://api.catopia.io','\x20GEM\x20&\x20','harvestAll','Successfully\x20Get\x20Seed\x20List','WSS\x20Connection\x20Error:\x20','Successfully\x20planting\x20grapes\x20to\x20land\x20','/api/v1/players/plant?limit=3000','Successfully\x20Get\x20User\x20Info','map','message','POSt','...','\x20GOLD','19640NISMTg','474MfpBhQ','195140KljKuY','refreshToken','claimMission','Error\x20:\x20','gold','user','plantString','800706AJpwRu','/api/v1/seed?limit=3000','reduce','disconnect','Successfully\x20Buying\x201\x20Grapes','WSS\x20Connection\x20Timeout','WSS\x20Handshake\x20Error:\x20','709769suSoSr','726nezcZH'];a2_0x203b=function(){return _0x11280;};return a2_0x203b();}