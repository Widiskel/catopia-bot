const a2_0xfad413=a2_0x43b2;function a2_0x17da(){const _0x48f9db=['error','getLands','Socket\x20ID:\x20','gold','Successfully\x20Claim\x20Misisons','mission','disconnect','token','getUser','connect','Error\x20:\x20','6vRadNE','connect_timeout','Successfully\x20Get\x20User\x20Info','account','harvestAll','Successfully\x20planting\x20grapes\x20to\x20land\x20','plainToken','Harvesting\x20all...','GET','\x20GOLD','plantSeed','Try\x20to\x20Login...','entries','getMission','Successfully\x20Get\x20User\x20Land\x20Info','WSS\x20Handshake\x20Error:\x20','/api/v1/players/plant','Connecting\x20to\x20WSS...','buyingGrapes','/api/v1/players/plant/harvestAll','data','15323MMsfaI','Buying\x20Grapes...','WSS\x20Connection\x20Error:\x20','Claiming\x20Missions\x20','POST','WSS\x20Connected...','join','POSt','fetch','websocket','accessToken','...','Successfully\x20Buying\x201\x20Grapes','/api/v1/user/daily-mission?limit=3000','1640815XOYzNH','login','message','/api/v1/store/buy','claimMission','seed','query','303313EeRJoM','getSeedList','wss://cowtopia-ws.tonfarmer.com','/api/v1/user-collection?limit=3000','https://api.catopia.io','delay','WSS\x20Connection\x20Closed\x20','title','/claim','185908OryvwQ','reduce','plant','missions','initWss','1945614GuHhfe','info','WSS\x20Connection\x20Timeout','getAvailablePlant','refreshToken','536GCSwrQ','success','WSS\x20Handshake\x20Timeout','Getting\x20Missions...','WSS\x20Error\x20:\x20','18dUQCJb','750064HguCKt','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','Getting\x20User\x20Info...','land','Successfully\x20Get\x20Seed\x20List','socket','/api/v1/auth/telegram','user','2252060MCPdTD','/api/v1/seed?limit=3000','gem'];a2_0x17da=function(){return _0x48f9db;};return a2_0x17da();}(function(_0x1d27a2,_0x334bc8){const _0x5d6a8d=a2_0x43b2,_0x5b3317=_0x1d27a2();while(!![]){try{const _0x44d064=-parseInt(_0x5d6a8d(0xbd))/0x1+parseInt(_0x5d6a8d(0xd6))/0x2+parseInt(_0x5d6a8d(0xec))/0x3*(parseInt(_0x5d6a8d(0xc6))/0x4)+parseInt(_0x5d6a8d(0xb6))/0x5+parseInt(_0x5d6a8d(0xcb))/0x6+-parseInt(_0x5d6a8d(0x101))/0x7*(parseInt(_0x5d6a8d(0xd0))/0x8)+parseInt(_0x5d6a8d(0xd5))/0x9*(-parseInt(_0x5d6a8d(0xde))/0xa);if(_0x44d064===_0x334bc8)break;else _0x5b3317['push'](_0x5b3317['shift']());}catch(_0x149d2f){_0x5b3317['push'](_0x5b3317['shift']());}}}(a2_0x17da,0x35b7e));function a2_0x43b2(_0x3c43fd,_0x3e0afa){const _0x17dae5=a2_0x17da();return a2_0x43b2=function(_0x43b2a8,_0x31ef7e){_0x43b2a8=_0x43b2a8-0xae;let _0x2d8d80=_0x17dae5[_0x43b2a8];return _0x2d8d80;},a2_0x43b2(_0x3c43fd,_0x3e0afa);}import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x3b31fd from'../utils/logger.js';import{io}from'socket.io-client';export class Catopia extends API{constructor(_0x229b36,_0x15590f,_0x46ebc9){const _0x257e41=a2_0x43b2;super(_0x15590f,_0x257e41(0xc1)),this[_0x257e41(0xef)]=_0x229b36,this['query']=_0x15590f,this['queryObj']=_0x46ebc9;}async[a2_0xfad413(0xb7)](){const _0x32e6c8=a2_0xfad413;try{await Helper[_0x32e6c8(0xc2)](0x1f4,this[_0x32e6c8(0xef)],_0x32e6c8(0xf7),this);const _0x374c18=await this[_0x32e6c8(0xb0)](_0x32e6c8(0xdc),_0x32e6c8(0x105),undefined,{'initData':this[_0x32e6c8(0xbc)]});await Helper[_0x32e6c8(0xc2)](0x3e8,this['account'],'Successfully\x20Login',this),this[_0x32e6c8(0xe8)]=_0x374c18['data'][_0x32e6c8(0xb2)],this['refreshToken']=_0x374c18[_0x32e6c8(0xcf)];}catch(_0x3d4755){throw _0x3d4755;}}async['getUser'](_0x4c92f7=![]){const _0x49421c=a2_0xfad413;try{if(_0x4c92f7)await Helper['delay'](0x1f4,this[_0x49421c(0xef)],_0x49421c(0xd8),this);const _0x512229=await this[_0x49421c(0xb0)](_0x49421c(0xc0),'GET',this[_0x49421c(0xe8)]);if(_0x512229['success']==!![]){if(_0x4c92f7)await Helper['delay'](0x3e8,this[_0x49421c(0xef)],_0x49421c(0xee),this);this[_0x49421c(0xdd)]=_0x512229[_0x49421c(0x100)];}else await Helper['delay'](0x1388,this['account'],_0x49421c(0xeb)+_0x512229[_0x49421c(0xb8)],this);}catch(_0x2863b5){throw _0x2863b5;}}async[a2_0xfad413(0xca)](){return new Promise(async(_0xbf5ad7,_0x1ec228)=>{const _0x2da71d=a2_0x43b2;await Helper[_0x2da71d(0xc2)](0x3e8,this['account'],_0x2da71d(0xfd),this),this[_0x2da71d(0xdb)]=io(_0x2da71d(0xbf),{'auth':{'token':this[_0x2da71d(0xf2)]},'transports':[_0x2da71d(0xb1)]}),this['socket']['on'](_0x2da71d(0xea),async()=>{const _0x4a03f2=_0x2da71d;await Helper['delay'](0x3e8,this[_0x4a03f2(0xef)],_0x4a03f2(0x106),this),a2_0x3b31fd[_0x4a03f2(0xcc)]('WSS\x20Handshake\x20completed\x20and\x20connected.'),a2_0x3b31fd[_0x4a03f2(0xcc)](_0x4a03f2(0xe3)+this['socket']['id']),_0xbf5ad7();}),this[_0x2da71d(0xdb)]['on']('connect_error',async _0x22c683=>{const _0x5a0f02=_0x2da71d;await Helper[_0x5a0f02(0xc2)](0x3e8,this['account'],_0x5a0f02(0x103)+_0x22c683[_0x5a0f02(0xb8)],this),a2_0x3b31fd[_0x5a0f02(0xe1)](_0x5a0f02(0xfb)+_0x22c683['message']),_0x1ec228(_0x22c683);}),this[_0x2da71d(0xdb)]['on'](_0x2da71d(0xed),async()=>{const _0x30e24c=_0x2da71d;await Helper[_0x30e24c(0xc2)](0x3e8,this[_0x30e24c(0xef)],_0x30e24c(0xcd),this),a2_0x3b31fd[_0x30e24c(0xe1)]('WSS\x20Handshake\x20Timeout'),_0x1ec228(new Error(_0x30e24c(0xd2)));}),this[_0x2da71d(0xdb)]['on']('error',async _0x4f964c=>{const _0xbe8784=_0x2da71d;await Helper['delay'](0x3e8,this[_0xbe8784(0xef)],_0xbe8784(0xd4)+_0x4f964c[_0xbe8784(0xb8)],this),a2_0x3b31fd[_0xbe8784(0xe1)](_0xbe8784(0xd4)+_0x4f964c['message']),_0x1ec228(_0x4f964c);}),this[_0x2da71d(0xdb)]['on'](_0x2da71d(0xe7),async _0x340f61=>{const _0x14b855=_0x2da71d;await Helper[_0x14b855(0xc2)](0x3e8,this[_0x14b855(0xef)],_0x14b855(0xc3)+_0x340f61+_0x14b855(0xb3),this),a2_0x3b31fd['info']('WSS\x20Disconnected:\x20'+_0x340f61);});});}async['getMission'](_0x34644b=![]){const _0xa65750=a2_0xfad413;try{if(_0x34644b)await Helper[_0xa65750(0xc2)](0x1f4,this[_0xa65750(0xef)],_0xa65750(0xd3),this);this[_0xa65750(0xc9)]=[];const _0xcbb656=await this[_0xa65750(0xb0)](_0xa65750(0xb5),'GET',this[_0xa65750(0xe8)]);if(_0xcbb656['success']){if(_0x34644b)await Helper['delay'](0x3e8,this[_0xa65750(0xef)],'Successfully\x20Get\x20Misisons',this);this['missions']=_0xcbb656[_0xa65750(0x100)];}else await Helper[_0xa65750(0xc2)](0x1388,this[_0xa65750(0xef)],_0xa65750(0xeb)+_0xcbb656[_0xa65750(0xb8)],this);}catch(_0x28a42c){throw _0x28a42c;}}async[a2_0xfad413(0xba)](_0x2253fa){const _0xa34663=a2_0xfad413;try{await Helper[_0xa34663(0xc2)](0x1f4,this['account'],_0xa34663(0x104)+_0x2253fa[_0xa34663(0xe6)][_0xa34663(0xc4)]+_0xa34663(0xb3),this);const _0x4fe813=await this['fetch']('/api/v1/user/daily-mission/'+_0x2253fa['id']+_0xa34663(0xc5),_0xa34663(0x105),this[_0xa34663(0xe8)]);_0x4fe813[_0xa34663(0xd1)]?(await Helper[_0xa34663(0xc2)](0x3e8,this[_0xa34663(0xef)],_0xa34663(0xe5),this),await this[_0xa34663(0xe9)](),await this[_0xa34663(0xf9)]()):await Helper[_0xa34663(0xc2)](0x1388,this[_0xa34663(0xef)],_0xa34663(0xeb)+_0x4fe813['message'],this);}catch(_0x547696){throw _0x547696;}}async[a2_0xfad413(0xbe)](){const _0x4bd12a=a2_0xfad413;try{await Helper[_0x4bd12a(0xc2)](0x1f4,this['account'],'Getting\x20Seed\x20List...',this);const _0x2ce730=await this[_0x4bd12a(0xb0)](_0x4bd12a(0xdf),'GET',this[_0x4bd12a(0xe8)]);_0x2ce730[_0x4bd12a(0xd1)]?(await Helper['delay'](0x3e8,this[_0x4bd12a(0xef)],_0x4bd12a(0xda),this),this[_0x4bd12a(0xbb)]=_0x2ce730[_0x4bd12a(0x100)]):await Helper[_0x4bd12a(0xc2)](0x1388,this[_0x4bd12a(0xef)],_0x4bd12a(0xeb)+_0x2ce730[_0x4bd12a(0xb8)],this);}catch(_0x1e3228){throw _0x1e3228;}}async[a2_0xfad413(0xce)](_0x40278e=![]){const _0x1379c7=a2_0xfad413;try{if(_0x40278e)await Helper['delay'](0x1f4,this[_0x1379c7(0xef)],'Getting\x20Player\x20Plant...',this);const _0x1a4b9e=await this[_0x1379c7(0xb0)]('/api/v1/players/plant?limit=3000',_0x1379c7(0xf4),this[_0x1379c7(0xe8)]);if(_0x1a4b9e[_0x1379c7(0xd1)]){if(_0x40278e)await Helper['delay'](0x3e8,this[_0x1379c7(0xef)],'Successfully\x20Get\x20Player\x20Plant',this);this[_0x1379c7(0xc8)]=_0x1a4b9e[_0x1379c7(0x100)];const _0x14cf38=this[_0x1379c7(0xc8)][_0x1379c7(0xc7)]((_0x2f5338,_0x3428e6)=>{const _0x25ca1e=_0x3428e6['name']['toLowerCase']();return _0x2f5338[_0x25ca1e]=(_0x2f5338[_0x25ca1e]||0x0)+0x1,_0x2f5338;},{});this['plantString']=Object[_0x1379c7(0xf8)](_0x14cf38)['map'](([_0x5f3549,_0x242e1e])=>_0x242e1e+'\x20'+_0x5f3549+(_0x242e1e>0x1?'s':''))[_0x1379c7(0xae)]('\x20');}else await Helper[_0x1379c7(0xc2)](0x1388,this['account'],_0x1379c7(0xeb)+_0x1a4b9e[_0x1379c7(0xb8)],this);}catch(_0x68a89e){throw _0x68a89e;}}async[a2_0xfad413(0xfe)](){const _0x484093=a2_0xfad413;try{await Helper[_0x484093(0xc2)](0x1f4,this[_0x484093(0xef)],_0x484093(0x102),this);const _0x222155=await this[_0x484093(0xb0)](_0x484093(0xb9),_0x484093(0x105),this[_0x484093(0xe8)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x484093(0xe9)](),_0x222155['success']?(await Helper['delay'](0x3e8,this[_0x484093(0xef)],_0x484093(0xb4),this),await this['getAvailablePlant']()):(await Helper[_0x484093(0xc2)](0x1388,this[_0x484093(0xef)],''+_0x222155[_0x484093(0xb8)],this),await this['harvestAll']());}catch(_0x3281ad){throw _0x3281ad;}}async[a2_0xfad413(0xe2)](_0x15ee8=![]){const _0x8ef062=a2_0xfad413;try{if(_0x15ee8)await Helper[_0x8ef062(0xc2)](0x1f4,this[_0x8ef062(0xef)],'Getting\x20User\x20Land\x20Info...',this);const _0x39b4c4=await this[_0x8ef062(0xb0)]('/api/v1/players/land?limit=3000','GET',this[_0x8ef062(0xe8)]);if(_0x39b4c4[_0x8ef062(0xd1)]){if(_0x15ee8)await Helper['delay'](0x3e8,this[_0x8ef062(0xef)],_0x8ef062(0xfa),this);this[_0x8ef062(0xd9)]=_0x39b4c4[_0x8ef062(0x100)];}else await Helper[_0x8ef062(0xc2)](0x1388,this[_0x8ef062(0xef)],_0x8ef062(0xeb)+_0x39b4c4[_0x8ef062(0xb8)],this);}catch(_0x3d55fa){throw _0x3d55fa;}}async[a2_0xfad413(0xf6)](_0x5d5d30){const _0x52f705=a2_0xfad413;try{await Helper[_0x52f705(0xc2)](0x1f4,this[_0x52f705(0xef)],'Planting\x20Gapes\x20seed\x20to\x20land...',this);const _0xcc8c72=await this[_0x52f705(0xb0)](_0x52f705(0xfc),_0x52f705(0xaf),this['token'],{'plantId':this[_0x52f705(0xc8)][0x0]['id'],'landId':_0x5d5d30});_0xcc8c72[_0x52f705(0xd1)]?(await Helper[_0x52f705(0xc2)](0x3e8,this[_0x52f705(0xef)],_0x52f705(0xf1)+_0x5d5d30,this),await this['getLands'](),await this[_0x52f705(0xce)]()):await Helper[_0x52f705(0xc2)](0x1388,this[_0x52f705(0xef)],'Error\x20:\x20'+_0xcc8c72[_0x52f705(0xb8)],this);}catch(_0x38bffd){throw _0x38bffd;}}async[a2_0xfad413(0xf0)](){const _0x13cbc6=a2_0xfad413;try{await Helper[_0x13cbc6(0xc2)](0x1f4,this['account'],_0x13cbc6(0xf3),this);const _0x142f84=await this[_0x13cbc6(0xb0)](_0x13cbc6(0xff),_0x13cbc6(0xaf),this['token']);_0x142f84[_0x13cbc6(0xd1)]?(await Helper[_0x13cbc6(0xc2)](0xbb8,this[_0x13cbc6(0xef)],_0x13cbc6(0xd7)+_0x142f84[_0x13cbc6(0x100)][_0x13cbc6(0xe0)]+'\x20GEM\x20&\x20'+_0x142f84[_0x13cbc6(0x100)][_0x13cbc6(0xe4)]+_0x13cbc6(0xf5),this),await this['getUser'](),await this[_0x13cbc6(0xe2)](),await this[_0x13cbc6(0xce)]()):await Helper['delay'](0xbb8,this[_0x13cbc6(0xef)],''+_0x142f84['message'],this);}catch(_0x413ba2){throw _0x413ba2;}}}