function a2_0x3803(){const _0xa1a8cd=['pet','/api/v1/auth/telegram','\x20GOLD','level','Error\x20:\x20','/api/v1/seed?limit=3000','title','success','Getting\x20Seed\x20List...','Getting\x20player\x20pet...','Connecting\x20to\x20WSS...','toLowerCase','account','buyingGrapes','fetch','token','getPet','websocket','...','WSS\x20Handshake\x20completed\x20and\x20connected.','56775PXRbXu','Claiming\x20Missions\x20','/api/v1/players/land?limit=3000','Successfully\x20planting\x20grapes\x20to\x20land\x20','242296xMqeEK','https://api.catopia.io','connect_error','getUser','Successfully\x20Get\x20Seed\x20List','openChest','Successfully\x20Get\x20Misisons','/api/v1/chest/open-multiple','/api/v1/user/daily-mission/','data','/api/v1/players/pet?limit=3000','/api/v1/user-collection?limit=3000','Opening\x20multipe\x20chest...','Getting\x20Missions...','/api/v1/store/buy','plantString','filter','Harvesting\x20all...','gem','error','petTypeId','Getting\x20User\x20Info...','chest','61300dnYdBJ','reduce','gold','/api/v1/players/plant?limit=3000','login','getLands','\x20GEM\x20&\x20','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','connect','473Nszlbt','plant','refreshToken','Buying\x20Grapes...','buyChest','generateUpgradablePet','Getting\x20User\x20Land\x20Info...','Successfully\x20Get\x20User\x20Land\x20Info','POST','WSS\x20Connection\x20Closed\x20','Successfully\x20get\x20player\x20pet','GET','3475176njDpaP','7Uuipjn','socket','214094OWROqy','Try\x20to\x20Login...','claimMission','count','Successfully\x20Upgrading\x20Pet','getAvailablePlant','harvestAll','263772unZBiw','missions','entries','144asDvQE','plantSeed','WSS\x20Error\x20:\x20','Buying\x20common\x20chest...','push','join','Successfully\x20Buying\x201\x20Grapes','1167PaKItx','/api/v1/players/plant','upgradePet','map','find','name','getMission','Successfully\x20Claim\x20Gold,\x20got\x20','WSS\x20Handshake\x20Timeout','wss://cowtopia-ws.tonfarmer.com','Successfully\x20Get\x20Player\x20Plant','connect_timeout','getChest','claimGold','WSS\x20Connection\x20Error:\x20','3644sMlNGs','/api/v1/players/chest?limit=3000','Successfully\x20Get\x20User\x20Info','type','delay','Successfully\x20Login','claimedCoin','message','Claiming\x20Gold...','info','land','/api/v1/user/daily-mission?limit=3000','query','mission','WSS\x20Handshake\x20Error:\x20','WSS\x20Connected...','Getting\x20Player\x20Plant...'];a2_0x3803=function(){return _0xa1a8cd;};return a2_0x3803();}const a2_0x41d476=a2_0xb9ab;(function(_0x54e5e4,_0x21489e){const _0x359fe1=a2_0xb9ab,_0x2c2f60=_0x54e5e4();while(!![]){try{const _0x1e145a=parseInt(_0x359fe1(0x23e))/0x1+parseInt(_0x359fe1(0x1f5))/0x2+parseInt(_0x359fe1(0x206))/0x3*(parseInt(_0x359fe1(0x215))/0x4)+-parseInt(_0x359fe1(0x23a))/0x5*(-parseInt(_0x359fe1(0x1ff))/0x6)+parseInt(_0x359fe1(0x1f3))/0x7*(-parseInt(_0x359fe1(0x1f2))/0x8)+-parseInt(_0x359fe1(0x1fc))/0x9+parseInt(_0x359fe1(0x255))/0xa*(-parseInt(_0x359fe1(0x1e6))/0xb);if(_0x1e145a===_0x21489e)break;else _0x2c2f60['push'](_0x2c2f60['shift']());}catch(_0x3c01d7){_0x2c2f60['push'](_0x2c2f60['shift']());}}}(a2_0x3803,0x3cc73));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x538b6d from'../utils/logger.js';import{io}from'socket.io-client';function a2_0xb9ab(_0x13a086,_0xac111){const _0x38037e=a2_0x3803();return a2_0xb9ab=function(_0xb9ab23,_0x58e624){_0xb9ab23=_0xb9ab23-0x1e2;let _0xe74edc=_0x38037e[_0xb9ab23];return _0xe74edc;},a2_0xb9ab(_0x13a086,_0xac111);}import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x1dc342,_0x86fd80,_0x1463de,_0x887e75){const _0x2b11f1=a2_0xb9ab;super(_0x86fd80,_0x2b11f1(0x23f),_0x887e75),this[_0x2b11f1(0x232)]=_0x1dc342,this['query']=_0x86fd80,this['queryObj']=_0x1463de;}async[a2_0x41d476(0x259)](){const _0x38a937=a2_0x41d476;try{await Helper[_0x38a937(0x219)](0x1f4,this[_0x38a937(0x232)],_0x38a937(0x1f6),this);const _0x47a919=await this[_0x38a937(0x234)](_0x38a937(0x227),_0x38a937(0x1ee),undefined,{'initData':this[_0x38a937(0x221)]});await Helper[_0x38a937(0x219)](0x3e8,this[_0x38a937(0x232)],_0x38a937(0x21a),this),this['token']=_0x47a919['data']['accessToken'],this[_0x38a937(0x1e8)]=_0x47a919[_0x38a937(0x1e8)];}catch(_0x4bdf2e){throw _0x4bdf2e;}}async[a2_0x41d476(0x241)](_0x396347=![]){const _0x40f24a=a2_0x41d476;try{if(_0x396347)await Helper['delay'](0x1f4,this[_0x40f24a(0x232)],_0x40f24a(0x253),this);const _0x3f93ed=await this[_0x40f24a(0x234)](_0x40f24a(0x249),_0x40f24a(0x1f1),this[_0x40f24a(0x235)]);if(_0x3f93ed['success']==!![]){if(_0x396347)await Helper[_0x40f24a(0x219)](0x3e8,this[_0x40f24a(0x232)],_0x40f24a(0x217),this);this['user']=_0x3f93ed[_0x40f24a(0x247)];}else await Helper[_0x40f24a(0x219)](0x1388,this[_0x40f24a(0x232)],_0x40f24a(0x22a)+_0x3f93ed[_0x40f24a(0x21c)],this);}catch(_0x462b44){throw _0x462b44;}}async['initWss'](){return new Promise(async(_0x24b0a1,_0x3fffeb)=>{const _0x4d54b3=a2_0xb9ab;await Helper[_0x4d54b3(0x219)](0x3e8,this[_0x4d54b3(0x232)],_0x4d54b3(0x230),this),this[_0x4d54b3(0x1f4)]=io(_0x4d54b3(0x20f),{'auth':{'token':this['plainToken']},'transports':[_0x4d54b3(0x237)]}),this[_0x4d54b3(0x1f4)]['on'](_0x4d54b3(0x1e5),async()=>{const _0x2fc442=_0x4d54b3;await Helper['delay'](0x3e8,this[_0x2fc442(0x232)],_0x2fc442(0x224),this),a2_0x538b6d[_0x2fc442(0x21e)](_0x2fc442(0x239)),a2_0x538b6d['info']('Socket\x20ID:\x20'+this[_0x2fc442(0x1f4)]['id']),_0x24b0a1();}),this[_0x4d54b3(0x1f4)]['on'](_0x4d54b3(0x240),async _0x10ceda=>{const _0x2d44f5=_0x4d54b3;await Helper[_0x2d44f5(0x219)](0x3e8,this['account'],_0x2d44f5(0x214)+_0x10ceda[_0x2d44f5(0x21c)],this),a2_0x538b6d[_0x2d44f5(0x251)](_0x2d44f5(0x223)+_0x10ceda[_0x2d44f5(0x21c)]),_0x3fffeb(_0x10ceda);}),this[_0x4d54b3(0x1f4)]['on'](_0x4d54b3(0x211),async()=>{const _0x152527=_0x4d54b3;await Helper[_0x152527(0x219)](0x3e8,this[_0x152527(0x232)],'WSS\x20Connection\x20Timeout',this),a2_0x538b6d[_0x152527(0x251)](_0x152527(0x20e)),_0x3fffeb(new Error(_0x152527(0x20e)));}),this[_0x4d54b3(0x1f4)]['on'](_0x4d54b3(0x251),async _0x34a71a=>{const _0x4eea00=_0x4d54b3;await Helper[_0x4eea00(0x219)](0x3e8,this[_0x4eea00(0x232)],_0x4eea00(0x201)+_0x34a71a[_0x4eea00(0x21c)],this),a2_0x538b6d[_0x4eea00(0x251)](_0x4eea00(0x201)+_0x34a71a[_0x4eea00(0x21c)]),_0x3fffeb(_0x34a71a);}),this['socket']['on']('disconnect',async _0x1ef286=>{const _0x3e23d6=_0x4d54b3;await Helper[_0x3e23d6(0x219)](0x3e8,this['account'],_0x3e23d6(0x1ef)+_0x1ef286+_0x3e23d6(0x238),this),a2_0x538b6d[_0x3e23d6(0x21e)]('WSS\x20Disconnected:\x20'+_0x1ef286);});});}async[a2_0x41d476(0x20c)](_0x52c927=![]){const _0x58db2c=a2_0x41d476;try{if(_0x52c927)await Helper[_0x58db2c(0x219)](0x1f4,this[_0x58db2c(0x232)],_0x58db2c(0x24b),this);this[_0x58db2c(0x1fd)]=[];const _0x42da4a=await this['fetch'](_0x58db2c(0x220),'GET',this[_0x58db2c(0x235)]);if(_0x42da4a[_0x58db2c(0x22d)]){if(_0x52c927)await Helper['delay'](0x3e8,this[_0x58db2c(0x232)],_0x58db2c(0x244),this);this[_0x58db2c(0x1fd)]=_0x42da4a[_0x58db2c(0x247)];}else await Helper['delay'](0x1388,this[_0x58db2c(0x232)],_0x58db2c(0x22a)+_0x42da4a[_0x58db2c(0x21c)],this);}catch(_0x30832f){throw _0x30832f;}}async[a2_0x41d476(0x1f7)](_0x5efd08){const _0x15ec0e=a2_0x41d476;try{await Helper[_0x15ec0e(0x219)](0x1f4,this[_0x15ec0e(0x232)],_0x15ec0e(0x23b)+_0x5efd08[_0x15ec0e(0x222)][_0x15ec0e(0x22c)]+_0x15ec0e(0x238),this);const _0x5a48aa=await this[_0x15ec0e(0x234)](_0x15ec0e(0x246)+_0x5efd08['id']+'/claim','POST',this['token']);_0x5a48aa[_0x15ec0e(0x22d)]?(await Helper['delay'](0x3e8,this['account'],'Successfully\x20Claim\x20Misisons',this),await this[_0x15ec0e(0x241)](),await this['getMission']()):await Helper[_0x15ec0e(0x219)](0x1388,this[_0x15ec0e(0x232)],_0x15ec0e(0x22a)+_0x5a48aa['message'],this);}catch(_0x2713dc){throw _0x2713dc;}}async['getSeedList'](){const _0x4219c1=a2_0x41d476;try{await Helper[_0x4219c1(0x219)](0x1f4,this[_0x4219c1(0x232)],_0x4219c1(0x22e),this);const _0x4a5f41=await this[_0x4219c1(0x234)](_0x4219c1(0x22b),_0x4219c1(0x1f1),this[_0x4219c1(0x235)]);_0x4a5f41[_0x4219c1(0x22d)]?(await Helper['delay'](0x3e8,this[_0x4219c1(0x232)],_0x4219c1(0x242),this),this['seed']=_0x4a5f41[_0x4219c1(0x247)]):await Helper[_0x4219c1(0x219)](0x1388,this[_0x4219c1(0x232)],_0x4219c1(0x22a)+_0x4a5f41['message'],this);}catch(_0xd86813){throw _0xd86813;}}async['getAvailablePlant'](_0x37f83e=![]){const _0x49a7f9=a2_0x41d476;try{if(_0x37f83e)await Helper[_0x49a7f9(0x219)](0x1f4,this[_0x49a7f9(0x232)],_0x49a7f9(0x225),this);const _0x3be089=await this[_0x49a7f9(0x234)](_0x49a7f9(0x258),_0x49a7f9(0x1f1),this[_0x49a7f9(0x235)]);if(_0x3be089['success']){if(_0x37f83e)await Helper[_0x49a7f9(0x219)](0x3e8,this[_0x49a7f9(0x232)],_0x49a7f9(0x210),this);this['plant']=_0x3be089[_0x49a7f9(0x247)];const _0x2c805d=this[_0x49a7f9(0x1e7)][_0x49a7f9(0x256)]((_0x10566c,_0x4d343f)=>{const _0x28e5dc=_0x49a7f9,_0x239f4f=_0x4d343f[_0x28e5dc(0x20b)][_0x28e5dc(0x231)]();return _0x10566c[_0x239f4f]=(_0x10566c[_0x239f4f]||0x0)+0x1,_0x10566c;},{});this[_0x49a7f9(0x24d)]=Object[_0x49a7f9(0x1fe)](_0x2c805d)[_0x49a7f9(0x209)](([_0x53694d,_0x392564])=>_0x392564+'\x20'+_0x53694d+(_0x392564>0x1?'s':''))[_0x49a7f9(0x204)]('\x20');}else await Helper[_0x49a7f9(0x219)](0x1388,this[_0x49a7f9(0x232)],_0x49a7f9(0x22a)+_0x3be089[_0x49a7f9(0x21c)],this);}catch(_0x342d14){throw _0x342d14;}}async[a2_0x41d476(0x233)](){const _0x18d297=a2_0x41d476;try{await Helper[_0x18d297(0x219)](0x1f4,this['account'],_0x18d297(0x1e9),this);const _0xeac53d=await this['fetch']('/api/v1/store/buy','POST',this[_0x18d297(0x235)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x18d297(0x241)](),_0xeac53d[_0x18d297(0x22d)]?(await Helper[_0x18d297(0x219)](0x3e8,this[_0x18d297(0x232)],_0x18d297(0x205),this),await this['getAvailablePlant']()):(await Helper['delay'](0x1388,this[_0x18d297(0x232)],''+_0xeac53d['message'],this),await this[_0x18d297(0x1fb)]());}catch(_0x19bb3b){throw _0x19bb3b;}}async[a2_0x41d476(0x1e2)](_0x152b99=![]){const _0x25a2d6=a2_0x41d476;try{if(_0x152b99)await Helper[_0x25a2d6(0x219)](0x1f4,this[_0x25a2d6(0x232)],_0x25a2d6(0x1ec),this);const _0x1369f5=await this[_0x25a2d6(0x234)](_0x25a2d6(0x23c),_0x25a2d6(0x1f1),this['token']);if(_0x1369f5['success']){if(_0x152b99)await Helper[_0x25a2d6(0x219)](0x3e8,this[_0x25a2d6(0x232)],_0x25a2d6(0x1ed),this);this[_0x25a2d6(0x21f)]=_0x1369f5[_0x25a2d6(0x247)];}else await Helper[_0x25a2d6(0x219)](0x1388,this['account'],_0x25a2d6(0x22a)+_0x1369f5[_0x25a2d6(0x21c)],this);}catch(_0xec063c){throw _0xec063c;}}async[a2_0x41d476(0x200)](_0x398ee7){const _0x48ea96=a2_0x41d476;try{await Helper[_0x48ea96(0x219)](0x1f4,this[_0x48ea96(0x232)],'Planting\x20Gapes\x20seed\x20to\x20land...',this);const _0x30a52b=await this[_0x48ea96(0x234)](_0x48ea96(0x207),'POSt',this[_0x48ea96(0x235)],{'plantId':this[_0x48ea96(0x1e7)][0x0]['id'],'landId':_0x398ee7});_0x30a52b[_0x48ea96(0x22d)]?(await Helper[_0x48ea96(0x219)](0x3e8,this[_0x48ea96(0x232)],_0x48ea96(0x23d)+_0x398ee7,this),await this[_0x48ea96(0x1e2)](),await this[_0x48ea96(0x1fa)]()):await Helper[_0x48ea96(0x219)](0x1388,this[_0x48ea96(0x232)],_0x48ea96(0x22a)+_0x30a52b[_0x48ea96(0x21c)],this);}catch(_0x38c3d3){throw _0x38c3d3;}}async['harvestAll'](){const _0x2c263b=a2_0x41d476;try{await Helper[_0x2c263b(0x219)](0x1f4,this[_0x2c263b(0x232)],_0x2c263b(0x24f),this);const _0x455dbe=await this[_0x2c263b(0x234)]('/api/v1/players/plant/harvestAll','POSt',this[_0x2c263b(0x235)]);_0x455dbe[_0x2c263b(0x22d)]?(await Helper[_0x2c263b(0x219)](0x7d0,this['account'],_0x2c263b(0x1e4)+_0x455dbe['data'][_0x2c263b(0x250)]+_0x2c263b(0x1e3)+_0x455dbe['data'][_0x2c263b(0x257)]+'\x20GOLD',this),await this[_0x2c263b(0x241)](),await this[_0x2c263b(0x1e2)](),await this['getAvailablePlant']()):await Helper['delay'](0x7d0,this[_0x2c263b(0x232)],''+_0x455dbe[_0x2c263b(0x21c)],this);}catch(_0x5611f0){throw _0x5611f0;}}async[a2_0x41d476(0x236)](_0x309c16){const _0x538054=a2_0x41d476;try{if(_0x309c16)await Helper[_0x538054(0x219)](0x1f4,this[_0x538054(0x232)],_0x538054(0x22f),this);const _0x31265e=await this[_0x538054(0x234)](_0x538054(0x248),_0x538054(0x1f1),this[_0x538054(0x235)]);if(_0x31265e[_0x538054(0x22d)]){if(_0x309c16)await Helper[_0x538054(0x219)](0xbb8,this[_0x538054(0x232)],_0x538054(0x1f0),this);this[_0x538054(0x226)]=_0x31265e[_0x538054(0x247)];}else await Helper[_0x538054(0x219)](0xbb8,this[_0x538054(0x232)],''+_0x31265e[_0x538054(0x21c)],this);}catch(_0x47f927){throw _0x47f927;}}async[a2_0x41d476(0x1ea)](){const _0x19e4ec=a2_0x41d476;try{await Helper[_0x19e4ec(0x219)](0x1f4,this[_0x19e4ec(0x232)],_0x19e4ec(0x202),this);const _0xc6962=await this[_0x19e4ec(0x234)](_0x19e4ec(0x24c),_0x19e4ec(0x1ee),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0xc6962[_0x19e4ec(0x22d)]?(await this[_0x19e4ec(0x241)](),await this[_0x19e4ec(0x212)]()):await Helper[_0x19e4ec(0x219)](0xbb8,this[_0x19e4ec(0x232)],''+_0xc6962[_0x19e4ec(0x21c)],this);}catch(_0x3f489b){throw _0x3f489b;}}async['getChest'](){const _0x5c48fa=a2_0x41d476;try{const _0x12fe82=await this[_0x5c48fa(0x234)](_0x5c48fa(0x216),_0x5c48fa(0x1f1),this['token']);_0x12fe82[_0x5c48fa(0x22d)]?this[_0x5c48fa(0x254)]=_0x12fe82[_0x5c48fa(0x247)]:await Helper['delay'](0xbb8,this[_0x5c48fa(0x232)],''+res['message'],this);}catch(_0x3b15c6){throw _0x3b15c6;}}async[a2_0x41d476(0x243)](){const _0x48d09f=a2_0x41d476;try{await Helper['delay'](0x1f4,this['account'],_0x48d09f(0x24a),this);const _0x349a2d=await this[_0x48d09f(0x234)](_0x48d09f(0x245),'POST',this[_0x48d09f(0x235)],{'petTypeIds':PetList['petCompanion'][_0x48d09f(0x20a)](_0x5eb26b=>_0x5eb26b[_0x48d09f(0x218)]=='A')[_0x48d09f(0x247)],'chestIds':this[_0x48d09f(0x254)][_0x48d09f(0x209)](_0x45da50=>{return _0x45da50['id'];})});_0x349a2d['success']?(await this[_0x48d09f(0x212)](),await Helper[_0x48d09f(0x219)](0x3e8,this[_0x48d09f(0x232)],'Successfully\x20Opening\x20Multiple\x20Chest',this)):await Helper[_0x48d09f(0x219)](0xbb8,this[_0x48d09f(0x232)],''+_0x349a2d[_0x48d09f(0x21c)],this);}catch(_0x322a93){throw _0x322a93;}}async[a2_0x41d476(0x208)](_0x42a287){const _0x285418=a2_0x41d476;try{await Helper[_0x285418(0x219)](0x1f4,this['account'],'Upgrading\x20pet\x20'+_0x42a287['name']+_0x285418(0x238),this);const _0x37ca1e=await this[_0x285418(0x234)]('/api/v1/players/pet/upgrade',_0x285418(0x1ee),this['token'],{'level':_0x42a287[_0x285418(0x229)],'petTypeId':PetList['petTypeList']['find'](_0x37f0de=>_0x37f0de[_0x285418(0x20b)]==_0x42a287['name'])[_0x285418(0x252)]});_0x37ca1e['success']?(await this[_0x285418(0x236)](),await Helper['delay'](0x3e8,this[_0x285418(0x232)],_0x285418(0x1f9),this)):await Helper[_0x285418(0x219)](0xbb8,this['account'],''+_0x37ca1e[_0x285418(0x21c)],this);}catch(_0x4f6121){throw _0x4f6121;}}async[a2_0x41d476(0x213)](){const _0x51c010=a2_0x41d476;try{await Helper[_0x51c010(0x219)](0x1f4,this[_0x51c010(0x232)],_0x51c010(0x21d),this);const _0x20e51d=await this[_0x51c010(0x234)]('/api/v1/user-collection/claim-gold',_0x51c010(0x1ee),this[_0x51c010(0x235)]);_0x20e51d[_0x51c010(0x22d)]?(await this['getUser'](),await Helper['delay'](0x3e8,this[_0x51c010(0x232)],_0x51c010(0x20d)+_0x20e51d['data'][_0x51c010(0x21b)]+_0x51c010(0x228),this)):await Helper[_0x51c010(0x219)](0xbb8,this[_0x51c010(0x232)],''+_0x20e51d[_0x51c010(0x21c)],this);}catch(_0x2ba1d8){throw _0x2ba1d8;}}async[a2_0x41d476(0x1eb)](){const _0x528adf=a2_0x41d476;let _0x5f28d8=[];for(const _0x301a0 of this[_0x528adf(0x226)]){const _0x5632e4=_0x5f28d8[_0x528adf(0x20a)](_0x178698=>_0x178698[_0x528adf(0x20b)]===_0x301a0[_0x528adf(0x20b)]&&_0x178698[_0x528adf(0x229)]===_0x301a0[_0x528adf(0x229)]);_0x5632e4?_0x5632e4[_0x528adf(0x1f8)]+=0x1:_0x5f28d8[_0x528adf(0x203)]({..._0x301a0,'count':0x1});}return _0x5f28d8=_0x5f28d8[_0x528adf(0x24e)](_0x1b17cb=>_0x1b17cb[_0x528adf(0x1f8)]>=0x5),_0x5f28d8;}}