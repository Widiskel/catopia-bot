const a2_0x531a6b=a2_0x16a6;function a2_0x16a6(_0x34d348,_0x5efee1){const _0x1d4c34=a2_0x1d4c();return a2_0x16a6=function(_0x16a68b,_0x4b4596){_0x16a68b=_0x16a68b-0x1ec;let _0x48863c=_0x1d4c34[_0x16a68b];return _0x48863c;},a2_0x16a6(_0x34d348,_0x5efee1);}(function(_0x2e07ee,_0x5966a9){const _0x44436e=a2_0x16a6,_0x4de8ac=_0x2e07ee();while(!![]){try{const _0x2408a2=parseInt(_0x44436e(0x20d))/0x1+-parseInt(_0x44436e(0x1f9))/0x2*(parseInt(_0x44436e(0x255))/0x3)+parseInt(_0x44436e(0x244))/0x4+parseInt(_0x44436e(0x23b))/0x5*(-parseInt(_0x44436e(0x204))/0x6)+-parseInt(_0x44436e(0x246))/0x7+parseInt(_0x44436e(0x237))/0x8+parseInt(_0x44436e(0x219))/0x9*(parseInt(_0x44436e(0x1f6))/0xa);if(_0x2408a2===_0x5966a9)break;else _0x4de8ac['push'](_0x4de8ac['shift']());}catch(_0x54cfc3){_0x4de8ac['push'](_0x4de8ac['shift']());}}}(a2_0x1d4c,0x67011));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x29b10c from'../utils/logger.js';import{io}from'socket.io-client';import{PetList}from'./pet_list.js';function a2_0x1d4c(){const _0x31bbca=['name','Error\x20:\x20','getUser','Socket\x20ID:\x20','initWss','buyingGrapes','level','getChest','Successfully\x20Get\x20User\x20Info','14739tNPmgE','\x20Level\x20','query','pet','success','info','/api/v1/players/plant?limit=3000','refreshToken','Successfully\x20Login','/api/v1/players/land?limit=3000','Getting\x20User\x20Land\x20Info...','missions','websocket','filter','plantString','entries','/api/v1/user/daily-mission?limit=3000','account','Getting\x20User\x20Info...','10MTVTIL','Claiming\x20Missions\x20','data','172CGzgxo','Claiming\x20Gold...','getSeedList','claimMission','getPet','socket','Pet\x20','Successfully\x20Get\x20User\x20Land\x20Info','GET','accessToken','petCompanion','4883592iBhsaB','WSS\x20Error\x20:\x20','POSt','...','Harvesting\x20all...','Connecting\x20to\x20WSS...','Successfully\x20Claim\x20Misisons','WSS\x20Connection\x20Error:\x20','Buying\x20Grapes...','281522zvXpLT','WSS\x20Handshake\x20Error:\x20','chest','claimGold','WSS\x20Handshake\x20completed\x20and\x20connected.','/api/v1/players/plant/harvestAll','petTypeId','WSS\x20Connected...','plant','disconnect','getAvailablePlant','map','12901995uDuGPK','\x20GOLD','COMPANION','Try\x20to\x20Login...','title','/api/v1/players/chest?limit=3000','queryObj','fetch','\x20Grapes','Successfully\x20get\x20player\x20pet','/api/v1/user/daily-mission/','/api/v1/chest/open-multiple','find','connect','WSS\x20Handshake\x20Timeout','harvestAll','/api/v1/user-collection?limit=3000','Successfully\x20planting\x20grapes\x20to\x20land\x20','/api/v1/store/buy','message','/api/v1/user-collection/claim-gold','Getting\x20Missions...','buyChest','/api/v1/seed?limit=3000','Buying\x20common\x20chest...','POST','gem','type','wss://cowtopia-ws.tonfarmer.com','petTypeList','92520AKgeam','/api/v1/players/pet/upgrade','delay','\x20GEM\x20&\x20','5KDKOuJ','openChest','token','WSS\x20Connection\x20Closed\x20','connect_timeout','Getting\x20Player\x20Plant...','Successfully\x20Get\x20Player\x20Plant','getLands','Successfully\x20Get\x20Misisons','2128192lBdOLT','error','4202345Ulxfwi','login','push','Planting\x20Gapes\x20seed\x20to\x20land...','/api/v1/auth/telegram','/api/v1/players/pet?limit=3000'];a2_0x1d4c=function(){return _0x31bbca;};return a2_0x1d4c();}import{Config}from'../../config/config.js';export class Catopia extends API{constructor(_0x1e0dd7,_0x1db516,_0x4cca85,_0x1447b0){const _0xac952d=a2_0x16a6;super(_0x1db516,'https://api.catopia.io',_0x1447b0),this['account']=_0x1e0dd7,this[_0xac952d(0x257)]=_0x1db516,this[_0xac952d(0x21f)]=_0x4cca85;}async[a2_0x531a6b(0x247)](){const _0x25c2cc=a2_0x531a6b;try{await Helper[_0x25c2cc(0x239)](0x1f4,this[_0x25c2cc(0x1f4)],_0x25c2cc(0x21c),this);const _0x5d9f8=await this['fetch'](_0x25c2cc(0x24a),_0x25c2cc(0x232),undefined,{'initData':this[_0x25c2cc(0x257)]});await Helper[_0x25c2cc(0x239)](0x3e8,this[_0x25c2cc(0x1f4)],_0x25c2cc(0x25d),this),this[_0x25c2cc(0x23d)]=_0x5d9f8[_0x25c2cc(0x1f8)][_0x25c2cc(0x202)],this[_0x25c2cc(0x25c)]=_0x5d9f8['refreshToken'];}catch(_0x28eb53){throw _0x28eb53;}}async[a2_0x531a6b(0x24e)](_0x12bbec=![]){const _0x19bc9a=a2_0x531a6b;try{if(_0x12bbec)await Helper[_0x19bc9a(0x239)](0x1f4,this['account'],_0x19bc9a(0x1f5),this);const _0xba17fc=await this[_0x19bc9a(0x220)](_0x19bc9a(0x229),_0x19bc9a(0x201),this[_0x19bc9a(0x23d)]);if(_0xba17fc[_0x19bc9a(0x259)]==!![]){if(_0x12bbec)await Helper['delay'](0x3e8,this[_0x19bc9a(0x1f4)],_0x19bc9a(0x254),this);this['user']=_0xba17fc[_0x19bc9a(0x1f8)];}else await Helper[_0x19bc9a(0x239)](0x1388,this[_0x19bc9a(0x1f4)],'Error\x20:\x20'+_0xba17fc[_0x19bc9a(0x22c)],this);}catch(_0x5eba42){throw _0x5eba42;}}async[a2_0x531a6b(0x250)](){return new Promise(async(_0x508877,_0x773b60)=>{const _0x3fd8e1=a2_0x16a6;await Helper['delay'](0x3e8,this[_0x3fd8e1(0x1f4)],_0x3fd8e1(0x209),this),this[_0x3fd8e1(0x1fe)]=io(_0x3fd8e1(0x235),{'auth':{'token':this['plainToken']},'transports':[_0x3fd8e1(0x1ef)]}),this[_0x3fd8e1(0x1fe)]['on'](_0x3fd8e1(0x226),async()=>{const _0x265442=_0x3fd8e1;await Helper[_0x265442(0x239)](0x3e8,this[_0x265442(0x1f4)],_0x265442(0x214),this),a2_0x29b10c[_0x265442(0x25a)](_0x265442(0x211)),a2_0x29b10c[_0x265442(0x25a)](_0x265442(0x24f)+this['socket']['id']),_0x508877();}),this[_0x3fd8e1(0x1fe)]['on']('connect_error',async _0x2367c7=>{const _0x49467c=_0x3fd8e1;await Helper[_0x49467c(0x239)](0x3e8,this['account'],_0x49467c(0x20b)+_0x2367c7[_0x49467c(0x22c)],this),a2_0x29b10c[_0x49467c(0x245)](_0x49467c(0x20e)+_0x2367c7[_0x49467c(0x22c)]),_0x773b60(_0x2367c7);}),this[_0x3fd8e1(0x1fe)]['on'](_0x3fd8e1(0x23f),async()=>{const _0x4ba975=_0x3fd8e1;await Helper[_0x4ba975(0x239)](0x3e8,this['account'],'WSS\x20Connection\x20Timeout',this),a2_0x29b10c['error'](_0x4ba975(0x227)),_0x773b60(new Error(_0x4ba975(0x227)));}),this[_0x3fd8e1(0x1fe)]['on'](_0x3fd8e1(0x245),async _0x17fc3f=>{const _0x433ae7=_0x3fd8e1;await Helper[_0x433ae7(0x239)](0x3e8,this[_0x433ae7(0x1f4)],_0x433ae7(0x205)+_0x17fc3f[_0x433ae7(0x22c)],this),a2_0x29b10c[_0x433ae7(0x245)](_0x433ae7(0x205)+_0x17fc3f[_0x433ae7(0x22c)]),_0x773b60(_0x17fc3f);}),this[_0x3fd8e1(0x1fe)]['on'](_0x3fd8e1(0x216),async _0x5c3c61=>{const _0x5c1a46=_0x3fd8e1;await Helper[_0x5c1a46(0x239)](0x3e8,this['account'],_0x5c1a46(0x23e)+_0x5c3c61+'...',this),a2_0x29b10c['info']('WSS\x20Disconnected:\x20'+_0x5c3c61);});});}async['getMission'](_0x34059f=![]){const _0x109f1c=a2_0x531a6b;try{if(_0x34059f)await Helper[_0x109f1c(0x239)](0x1f4,this['account'],_0x109f1c(0x22e),this);this[_0x109f1c(0x1ee)]=[];const _0x4ee77b=await this[_0x109f1c(0x220)](_0x109f1c(0x1f3),_0x109f1c(0x201),this[_0x109f1c(0x23d)]);if(_0x4ee77b[_0x109f1c(0x259)]){if(_0x34059f)await Helper[_0x109f1c(0x239)](0x3e8,this[_0x109f1c(0x1f4)],_0x109f1c(0x243),this);this[_0x109f1c(0x1ee)]=_0x4ee77b['data'];}else await Helper['delay'](0x1388,this['account'],_0x109f1c(0x24d)+_0x4ee77b['message'],this);}catch(_0x437e3f){throw _0x437e3f;}}async[a2_0x531a6b(0x1fc)](_0x55ed4c){const _0x3a09dd=a2_0x531a6b;try{await Helper[_0x3a09dd(0x239)](0x1f4,this['account'],_0x3a09dd(0x1f7)+_0x55ed4c['mission'][_0x3a09dd(0x21d)]+'...',this);const _0x40ac42=await this['fetch'](_0x3a09dd(0x223)+_0x55ed4c['id']+'/claim','POST',this[_0x3a09dd(0x23d)]);_0x40ac42[_0x3a09dd(0x259)]?(await Helper['delay'](0x3e8,this[_0x3a09dd(0x1f4)],_0x3a09dd(0x20a),this),await this['getUser'](),await this['getMission']()):await Helper[_0x3a09dd(0x239)](0x1388,this[_0x3a09dd(0x1f4)],'Error\x20:\x20'+_0x40ac42[_0x3a09dd(0x22c)],this);}catch(_0x2efa69){throw _0x2efa69;}}async[a2_0x531a6b(0x1fb)](){const _0x3ed593=a2_0x531a6b;try{await Helper['delay'](0x1f4,this[_0x3ed593(0x1f4)],'Getting\x20Seed\x20List...',this);const _0x53227f=await this[_0x3ed593(0x220)](_0x3ed593(0x230),'GET',this[_0x3ed593(0x23d)]);_0x53227f[_0x3ed593(0x259)]?(await Helper[_0x3ed593(0x239)](0x3e8,this[_0x3ed593(0x1f4)],'Successfully\x20Get\x20Seed\x20List',this),this['seed']=_0x53227f[_0x3ed593(0x1f8)]):await Helper[_0x3ed593(0x239)](0x1388,this[_0x3ed593(0x1f4)],_0x3ed593(0x24d)+_0x53227f[_0x3ed593(0x22c)],this);}catch(_0x57a904){throw _0x57a904;}}async['getAvailablePlant'](_0x527bd1=![]){const _0x3dc801=a2_0x531a6b;try{if(_0x527bd1)await Helper[_0x3dc801(0x239)](0x1f4,this[_0x3dc801(0x1f4)],_0x3dc801(0x240),this);const _0x425fde=await this[_0x3dc801(0x220)](_0x3dc801(0x25b),'GET',this[_0x3dc801(0x23d)]);if(_0x425fde['success']){if(_0x527bd1)await Helper[_0x3dc801(0x239)](0x3e8,this[_0x3dc801(0x1f4)],_0x3dc801(0x241),this);this[_0x3dc801(0x215)]=_0x425fde[_0x3dc801(0x1f8)];const _0x5c2546=this[_0x3dc801(0x215)]['reduce']((_0x3e5578,_0x4bf116)=>{const _0x157220=_0x3dc801,_0x582fb4=_0x4bf116[_0x157220(0x24c)];return _0x3e5578[_0x582fb4]=(_0x3e5578[_0x582fb4]||0x0)+0x1,_0x3e5578;},{});this[_0x3dc801(0x1f1)]=Object[_0x3dc801(0x1f2)](_0x5c2546)[_0x3dc801(0x218)](([_0xe9f097,_0x54d81f])=>_0x54d81f+_0x3dc801(0x221))['join']('\x20');}else await Helper['delay'](0x1388,this['account'],_0x3dc801(0x24d)+_0x425fde['message'],this);}catch(_0x2d8683){throw _0x2d8683;}}async[a2_0x531a6b(0x251)](){const _0x3f61e3=a2_0x531a6b;try{await Helper[_0x3f61e3(0x239)](0x1f4,this[_0x3f61e3(0x1f4)],_0x3f61e3(0x20c),this);const _0x1de97f=await this[_0x3f61e3(0x220)](_0x3f61e3(0x22b),'POST',this['token'],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x3f61e3(0x24e)](),_0x1de97f[_0x3f61e3(0x259)]?(await Helper[_0x3f61e3(0x239)](0x3e8,this['account'],'Successfully\x20Buying\x201\x20Grapes',this),await this['getAvailablePlant']()):(await Helper[_0x3f61e3(0x239)](0x1388,this[_0x3f61e3(0x1f4)],''+_0x1de97f[_0x3f61e3(0x22c)],this),await this[_0x3f61e3(0x228)]());}catch(_0x1689d6){throw _0x1689d6;}}async['getLands'](_0x3239e8=![]){const _0x37ac0e=a2_0x531a6b;try{if(_0x3239e8)await Helper[_0x37ac0e(0x239)](0x1f4,this[_0x37ac0e(0x1f4)],_0x37ac0e(0x1ed),this);const _0x175f5c=await this[_0x37ac0e(0x220)](_0x37ac0e(0x1ec),_0x37ac0e(0x201),this[_0x37ac0e(0x23d)]);if(_0x175f5c['success']){if(_0x3239e8)await Helper['delay'](0x3e8,this[_0x37ac0e(0x1f4)],_0x37ac0e(0x200),this);this['land']=_0x175f5c['data'];}else await Helper[_0x37ac0e(0x239)](0x1388,this[_0x37ac0e(0x1f4)],_0x37ac0e(0x24d)+_0x175f5c[_0x37ac0e(0x22c)],this);}catch(_0x402b13){throw _0x402b13;}}async['plantSeed'](_0x1d8d1c){const _0x2bd2cf=a2_0x531a6b;try{await Helper[_0x2bd2cf(0x239)](0x1f4,this[_0x2bd2cf(0x1f4)],_0x2bd2cf(0x249),this);const _0x3dec42=await this['fetch']('/api/v1/players/plant',_0x2bd2cf(0x206),this[_0x2bd2cf(0x23d)],{'plantId':this[_0x2bd2cf(0x215)][0x0]['id'],'landId':_0x1d8d1c});_0x3dec42[_0x2bd2cf(0x259)]?(await Helper['delay'](0x3e8,this['account'],_0x2bd2cf(0x22a)+_0x1d8d1c,this),await this[_0x2bd2cf(0x242)](),await this[_0x2bd2cf(0x217)]()):await Helper[_0x2bd2cf(0x239)](0x1388,this['account'],_0x2bd2cf(0x24d)+_0x3dec42[_0x2bd2cf(0x22c)],this);}catch(_0x2fc3cd){throw _0x2fc3cd;}}async['harvestAll'](){const _0x303dea=a2_0x531a6b;try{await Helper[_0x303dea(0x239)](0x1f4,this[_0x303dea(0x1f4)],_0x303dea(0x208),this);const _0x5904fb=await this[_0x303dea(0x220)](_0x303dea(0x212),_0x303dea(0x206),this[_0x303dea(0x23d)]);_0x5904fb[_0x303dea(0x259)]?(await Helper[_0x303dea(0x239)](0x7d0,this[_0x303dea(0x1f4)],'Successfully\x20Harvest\x20All\x20Plant\x20Got\x20'+_0x5904fb[_0x303dea(0x1f8)][_0x303dea(0x233)]+_0x303dea(0x23a)+_0x5904fb['data']['gold']+_0x303dea(0x21a),this),await this[_0x303dea(0x24e)](),await this[_0x303dea(0x242)](),await this['getAvailablePlant']()):await Helper[_0x303dea(0x239)](0x7d0,this[_0x303dea(0x1f4)],''+_0x5904fb['message'],this);}catch(_0x4bdde4){throw _0x4bdde4;}}async[a2_0x531a6b(0x1fd)](_0x3e9e6f){const _0x2ef2b4=a2_0x531a6b;try{if(_0x3e9e6f)await Helper[_0x2ef2b4(0x239)](0x1f4,this[_0x2ef2b4(0x1f4)],'Getting\x20player\x20pet...',this);const _0x1f8bc2=await this[_0x2ef2b4(0x220)](_0x2ef2b4(0x24b),_0x2ef2b4(0x201),this[_0x2ef2b4(0x23d)]);if(_0x1f8bc2[_0x2ef2b4(0x259)]){if(_0x3e9e6f)await Helper[_0x2ef2b4(0x239)](0xbb8,this[_0x2ef2b4(0x1f4)],_0x2ef2b4(0x222),this);this['pet']=_0x1f8bc2[_0x2ef2b4(0x1f8)];}else await Helper[_0x2ef2b4(0x239)](0xbb8,this[_0x2ef2b4(0x1f4)],''+_0x1f8bc2[_0x2ef2b4(0x22c)],this);}catch(_0x494bc4){throw _0x494bc4;}}async[a2_0x531a6b(0x22f)](){const _0x447260=a2_0x531a6b;try{await Helper['delay'](0x1f4,this['account'],_0x447260(0x231),this);const _0x135b72=await this[_0x447260(0x220)](_0x447260(0x22b),_0x447260(0x232),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x135b72[_0x447260(0x259)]?(await this['getUser'](),await this[_0x447260(0x253)]()):await Helper[_0x447260(0x239)](0xbb8,this[_0x447260(0x1f4)],''+_0x135b72[_0x447260(0x22c)],this);}catch(_0x22673c){throw _0x22673c;}}async['getChest'](){const _0x43ee9c=a2_0x531a6b;try{const _0x2a6341=await this['fetch'](_0x43ee9c(0x21e),'GET',this[_0x43ee9c(0x23d)]);_0x2a6341[_0x43ee9c(0x259)]?this[_0x43ee9c(0x20f)]=_0x2a6341[_0x43ee9c(0x1f8)]:await Helper[_0x43ee9c(0x239)](0xbb8,this['account'],''+res[_0x43ee9c(0x22c)],this);}catch(_0x4ac167){throw _0x4ac167;}}async[a2_0x531a6b(0x23c)](){const _0x331c77=a2_0x531a6b;try{const _0x11a10b=Config[_0x331c77(0x21b)]??'A';await Helper['delay'](0x1f4,this['account'],'Opening\x20multipe\x20chest...',this);const _0x1e869f=await this[_0x331c77(0x220)](_0x331c77(0x224),_0x331c77(0x232),this[_0x331c77(0x23d)],{'petTypeIds':PetList[_0x331c77(0x203)][_0x331c77(0x225)](_0x44beca=>_0x44beca[_0x331c77(0x234)]==_0x11a10b)['data'],'chestIds':this[_0x331c77(0x20f)][_0x331c77(0x218)](_0x1f2044=>{return _0x1f2044['id'];})});_0x1e869f['success']?(await this['getChest'](),await Helper[_0x331c77(0x239)](0x3e8,this[_0x331c77(0x1f4)],'Successfully\x20Opening\x20Multiple\x20Chest',this)):await Helper['delay'](0xbb8,this[_0x331c77(0x1f4)],''+_0x1e869f[_0x331c77(0x22c)],this);}catch(_0x4eecfa){throw _0x4eecfa;}}async['upgradePet'](_0x3b2739){const _0xa5cefd=a2_0x531a6b;try{await Helper[_0xa5cefd(0x239)](0x1f4,this['account'],'Upgrading\x20pet\x20'+_0x3b2739[_0xa5cefd(0x24c)]+_0xa5cefd(0x256)+_0x3b2739[_0xa5cefd(0x252)]+_0xa5cefd(0x207),this);const _0x2778dc=await this['fetch'](_0xa5cefd(0x238),_0xa5cefd(0x232),this[_0xa5cefd(0x23d)],{'level':_0x3b2739[_0xa5cefd(0x252)],'petTypeId':PetList[_0xa5cefd(0x236)]['find'](_0x380ce6=>_0x380ce6['name']==_0x3b2739[_0xa5cefd(0x24c)])[_0xa5cefd(0x213)]});_0x2778dc[_0xa5cefd(0x259)]?(await this[_0xa5cefd(0x1fd)](),await Helper[_0xa5cefd(0x239)](0x3e8,this[_0xa5cefd(0x1f4)],_0xa5cefd(0x1ff)+_0x3b2739[_0xa5cefd(0x24c)]+'\x20Successfully\x20Upgraded\x20to\x20Level\x20'+(_0x3b2739[_0xa5cefd(0x252)]+0x1)+'\x20',this)):await Helper[_0xa5cefd(0x239)](0xbb8,this['account'],''+_0x2778dc[_0xa5cefd(0x22c)],this);}catch(_0x1f8021){throw _0x1f8021;}}async[a2_0x531a6b(0x210)](){const _0x670e12=a2_0x531a6b;try{await Helper[_0x670e12(0x239)](0x1f4,this[_0x670e12(0x1f4)],_0x670e12(0x1fa),this);const _0x16ea28=await this[_0x670e12(0x220)](_0x670e12(0x22d),'POST',this[_0x670e12(0x23d)]);_0x16ea28[_0x670e12(0x259)]?(await this[_0x670e12(0x24e)](),await Helper[_0x670e12(0x239)](0x3e8,this['account'],'Successfully\x20Claim\x20Gold,\x20got\x20'+_0x16ea28['data']['claimedCoin']+_0x670e12(0x21a),this)):await Helper[_0x670e12(0x239)](0xbb8,this[_0x670e12(0x1f4)],''+_0x16ea28[_0x670e12(0x22c)],this);}catch(_0x3210bf){throw _0x3210bf;}}async['generateUpgradablePet'](){const _0x26be40=a2_0x531a6b;let _0x5f36df=[];for(const _0x4e4af5 of this[_0x26be40(0x258)]){const _0xf6ca8e=_0x5f36df[_0x26be40(0x225)](_0x436e44=>_0x436e44[_0x26be40(0x24c)]===_0x4e4af5[_0x26be40(0x24c)]&&_0x436e44[_0x26be40(0x252)]===_0x4e4af5[_0x26be40(0x252)]);_0xf6ca8e?_0xf6ca8e['count']+=0x1:_0x5f36df[_0x26be40(0x248)]({..._0x4e4af5,'count':0x1});}return _0x5f36df=_0x5f36df[_0x26be40(0x1f0)](_0x2c177d=>_0x2c177d['count']>=0x5),_0x5f36df;}}