const a2_0x685c1a=a2_0x4f19;(function(_0x1ff51e,_0x36270c){const _0x16cdd7=a2_0x4f19,_0x5a1b3f=_0x1ff51e();while(!![]){try{const _0x3150d1=-parseInt(_0x16cdd7(0x13c))/0x1*(-parseInt(_0x16cdd7(0x128))/0x2)+parseInt(_0x16cdd7(0x11a))/0x3*(parseInt(_0x16cdd7(0x10d))/0x4)+-parseInt(_0x16cdd7(0x13f))/0x5+-parseInt(_0x16cdd7(0x12e))/0x6*(-parseInt(_0x16cdd7(0x171))/0x7)+parseInt(_0x16cdd7(0x11d))/0x8+parseInt(_0x16cdd7(0x16a))/0x9*(parseInt(_0x16cdd7(0x10f))/0xa)+-parseInt(_0x16cdd7(0x16f))/0xb;if(_0x3150d1===_0x36270c)break;else _0x5a1b3f['push'](_0x5a1b3f['shift']());}catch(_0xfb58eb){_0x5a1b3f['push'](_0x5a1b3f['shift']());}}}(a2_0x469b,0xe6981));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x517e3a from'../utils/logger.js';function a2_0x4f19(_0x14b907,_0x133081){const _0x469ba7=a2_0x469b();return a2_0x4f19=function(_0x4f19a2,_0x552a4c){_0x4f19a2=_0x4f19a2-0x105;let _0x214f68=_0x469ba7[_0x4f19a2];return _0x214f68;},a2_0x4f19(_0x14b907,_0x133081);}import{io}from'socket.io-client';function a2_0x469b(){const _0x1218e1=['6gRFaqi','filter','/api/v1/players/plant/harvestAll','3438176xbQBAX','reduce','type','data','https://api.catopia.io','Opening\x20multipe\x20chest...','query','Getting\x20player\x20pet...','chest','Successfully\x20Get\x20User\x20Land\x20Info','getMission','10IJIjcF','initWss','POST','/api/v1/user-collection/claim-gold','plant','connect_error','61494OqkToD','POSt','connect_timeout','gold','/api/v1/auth/telegram','connect','Successfully\x20Login','count','Buying\x20common\x20chest...','missions','WSS\x20Connected...','message','/api/v1/store/buy','find','310481XHyppu','plainToken','/api/v1/user-collection?limit=3000','3430100XSDuyy','accessToken','plantString','/api/v1/seed?limit=3000','push','/api/v1/user/daily-mission/','Planting\x20Gapes\x20seed\x20to\x20land...','/api/v1/user/daily-mission?limit=3000','error','Claiming\x20Missions\x20','Successfully\x20get\x20player\x20pet','WSS\x20Connection\x20Closed\x20','WSS\x20Error\x20:\x20','claimGold','name','Connecting\x20to\x20WSS...','...','/api/v1/players/chest?limit=3000','Buying\x20Grapes...','info','claimMission','disconnect','seed','Error\x20:\x20','Successfully\x20Get\x20Player\x20Plant','level','socket','Successfully\x20Upgrading\x20Pet','WSS\x20Disconnected:\x20','map','/claim','buyChest','gem','Harvesting\x20all...','token','claimedCoin','Getting\x20User\x20Info...','getLands','\x20GOLD','Try\x20to\x20Login...','user','Getting\x20Seed\x20List...','WSS\x20Connection\x20Error:\x20','741717AVTTre','Getting\x20User\x20Land\x20Info...','Successfully\x20Buying\x201\x20Grapes','Getting\x20Missions...','GET','23743775CMoSJf','mission','868bKeaOm','getSeedList','Successfully\x20Get\x20User\x20Info','WSS\x20Handshake\x20Error:\x20','delay','entries','wss://cowtopia-ws.tonfarmer.com','success','account','toLowerCase','WSS\x20Handshake\x20completed\x20and\x20connected.','WSS\x20Handshake\x20Timeout','getAvailablePlant','refreshToken','/api/v1/players/pet?limit=3000','577532qxHSZI','Claiming\x20Gold...','30flABqY','getChest','harvestAll','pet','fetch','login','openChest','/api/v1/players/plant?limit=3000','getUser','plantSeed','websocket'];a2_0x469b=function(){return _0x1218e1;};return a2_0x469b();}import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x8f96e0,_0x573199,_0x3da12c){const _0x563b0f=a2_0x4f19;super(_0x573199,_0x563b0f(0x121)),this[_0x563b0f(0x106)]=_0x8f96e0,this[_0x563b0f(0x123)]=_0x573199,this['queryObj']=_0x3da12c;}async[a2_0x685c1a(0x114)](){const _0x4126d2=a2_0x685c1a;try{await Helper[_0x4126d2(0x175)](0x1f4,this[_0x4126d2(0x106)],_0x4126d2(0x166),this);const _0x2fdf8d=await this['fetch'](_0x4126d2(0x132),_0x4126d2(0x12a),undefined,{'initData':this[_0x4126d2(0x123)]});await Helper['delay'](0x3e8,this[_0x4126d2(0x106)],_0x4126d2(0x134),this),this[_0x4126d2(0x161)]=_0x2fdf8d[_0x4126d2(0x120)][_0x4126d2(0x140)],this[_0x4126d2(0x10b)]=_0x2fdf8d[_0x4126d2(0x10b)];}catch(_0x519459){throw _0x519459;}}async['getUser'](_0x350a59=![]){const _0x300f64=a2_0x685c1a;try{if(_0x350a59)await Helper[_0x300f64(0x175)](0x1f4,this[_0x300f64(0x106)],_0x300f64(0x163),this);const _0x2d088a=await this[_0x300f64(0x113)](_0x300f64(0x13e),_0x300f64(0x16e),this[_0x300f64(0x161)]);if(_0x2d088a['success']==!![]){if(_0x350a59)await Helper[_0x300f64(0x175)](0x3e8,this[_0x300f64(0x106)],_0x300f64(0x173),this);this[_0x300f64(0x167)]=_0x2d088a['data'];}else await Helper[_0x300f64(0x175)](0x1388,this[_0x300f64(0x106)],_0x300f64(0x156)+_0x2d088a['message'],this);}catch(_0x200b76){throw _0x200b76;}}async[a2_0x685c1a(0x129)](){return new Promise(async(_0x31402a,_0x527e62)=>{const _0x1ceb25=a2_0x4f19;await Helper[_0x1ceb25(0x175)](0x3e8,this[_0x1ceb25(0x106)],_0x1ceb25(0x14e),this),this[_0x1ceb25(0x159)]=io(_0x1ceb25(0x177),{'auth':{'token':this[_0x1ceb25(0x13d)]},'transports':[_0x1ceb25(0x119)]}),this['socket']['on'](_0x1ceb25(0x133),async()=>{const _0x20e2e8=_0x1ceb25;await Helper[_0x20e2e8(0x175)](0x3e8,this[_0x20e2e8(0x106)],_0x20e2e8(0x138),this),a2_0x517e3a[_0x20e2e8(0x152)](_0x20e2e8(0x108)),a2_0x517e3a[_0x20e2e8(0x152)]('Socket\x20ID:\x20'+this[_0x20e2e8(0x159)]['id']),_0x31402a();}),this['socket']['on'](_0x1ceb25(0x12d),async _0x5f23c=>{const _0x246c66=_0x1ceb25;await Helper['delay'](0x3e8,this[_0x246c66(0x106)],_0x246c66(0x169)+_0x5f23c[_0x246c66(0x139)],this),a2_0x517e3a[_0x246c66(0x147)](_0x246c66(0x174)+_0x5f23c[_0x246c66(0x139)]),_0x527e62(_0x5f23c);}),this[_0x1ceb25(0x159)]['on'](_0x1ceb25(0x130),async()=>{const _0x41ade5=_0x1ceb25;await Helper[_0x41ade5(0x175)](0x3e8,this[_0x41ade5(0x106)],'WSS\x20Connection\x20Timeout',this),a2_0x517e3a['error']('WSS\x20Handshake\x20Timeout'),_0x527e62(new Error(_0x41ade5(0x109)));}),this['socket']['on']('error',async _0x46f5fb=>{const _0x188cdc=_0x1ceb25;await Helper[_0x188cdc(0x175)](0x3e8,this[_0x188cdc(0x106)],_0x188cdc(0x14b)+_0x46f5fb['message'],this),a2_0x517e3a['error'](_0x188cdc(0x14b)+_0x46f5fb[_0x188cdc(0x139)]),_0x527e62(_0x46f5fb);}),this[_0x1ceb25(0x159)]['on'](_0x1ceb25(0x154),async _0x2bdae0=>{const _0x27812e=_0x1ceb25;await Helper[_0x27812e(0x175)](0x3e8,this['account'],_0x27812e(0x14a)+_0x2bdae0+_0x27812e(0x14f),this),a2_0x517e3a[_0x27812e(0x152)](_0x27812e(0x15b)+_0x2bdae0);});});}async[a2_0x685c1a(0x127)](_0x60062b=![]){const _0x3246fa=a2_0x685c1a;try{if(_0x60062b)await Helper[_0x3246fa(0x175)](0x1f4,this[_0x3246fa(0x106)],_0x3246fa(0x16d),this);this[_0x3246fa(0x137)]=[];const _0x194a28=await this['fetch'](_0x3246fa(0x146),_0x3246fa(0x16e),this[_0x3246fa(0x161)]);if(_0x194a28['success']){if(_0x60062b)await Helper[_0x3246fa(0x175)](0x3e8,this[_0x3246fa(0x106)],'Successfully\x20Get\x20Misisons',this);this[_0x3246fa(0x137)]=_0x194a28[_0x3246fa(0x120)];}else await Helper[_0x3246fa(0x175)](0x1388,this[_0x3246fa(0x106)],_0x3246fa(0x156)+_0x194a28['message'],this);}catch(_0x1b11c6){throw _0x1b11c6;}}async[a2_0x685c1a(0x153)](_0x12f837){const _0x16c7af=a2_0x685c1a;try{await Helper[_0x16c7af(0x175)](0x1f4,this[_0x16c7af(0x106)],_0x16c7af(0x148)+_0x12f837[_0x16c7af(0x170)]['title']+_0x16c7af(0x14f),this);const _0x39887a=await this[_0x16c7af(0x113)](_0x16c7af(0x144)+_0x12f837['id']+_0x16c7af(0x15d),'POST',this[_0x16c7af(0x161)]);_0x39887a['success']?(await Helper[_0x16c7af(0x175)](0x3e8,this['account'],'Successfully\x20Claim\x20Misisons',this),await this[_0x16c7af(0x117)](),await this['getMission']()):await Helper['delay'](0x1388,this['account'],_0x16c7af(0x156)+_0x39887a[_0x16c7af(0x139)],this);}catch(_0x59e9f3){throw _0x59e9f3;}}async[a2_0x685c1a(0x172)](){const _0x4a0794=a2_0x685c1a;try{await Helper['delay'](0x1f4,this[_0x4a0794(0x106)],_0x4a0794(0x168),this);const _0x40eab4=await this[_0x4a0794(0x113)](_0x4a0794(0x142),'GET',this['token']);_0x40eab4[_0x4a0794(0x105)]?(await Helper[_0x4a0794(0x175)](0x3e8,this[_0x4a0794(0x106)],'Successfully\x20Get\x20Seed\x20List',this),this[_0x4a0794(0x155)]=_0x40eab4[_0x4a0794(0x120)]):await Helper[_0x4a0794(0x175)](0x1388,this[_0x4a0794(0x106)],'Error\x20:\x20'+_0x40eab4['message'],this);}catch(_0x45a489){throw _0x45a489;}}async['getAvailablePlant'](_0x226ec5=![]){const _0x223732=a2_0x685c1a;try{if(_0x226ec5)await Helper[_0x223732(0x175)](0x1f4,this[_0x223732(0x106)],'Getting\x20Player\x20Plant...',this);const _0x508c54=await this[_0x223732(0x113)](_0x223732(0x116),'GET',this['token']);if(_0x508c54[_0x223732(0x105)]){if(_0x226ec5)await Helper['delay'](0x3e8,this['account'],_0x223732(0x157),this);this[_0x223732(0x12c)]=_0x508c54[_0x223732(0x120)];const _0x2e32e1=this['plant'][_0x223732(0x11e)]((_0x16f889,_0x3c61ff)=>{const _0x133a58=_0x223732,_0xf073ab=_0x3c61ff[_0x133a58(0x14d)][_0x133a58(0x107)]();return _0x16f889[_0xf073ab]=(_0x16f889[_0xf073ab]||0x0)+0x1,_0x16f889;},{});this[_0x223732(0x141)]=Object[_0x223732(0x176)](_0x2e32e1)['map'](([_0xbf6eaf,_0x551ec8])=>_0x551ec8+'\x20'+_0xbf6eaf+(_0x551ec8>0x1?'s':''))['join']('\x20');}else await Helper[_0x223732(0x175)](0x1388,this['account'],_0x223732(0x156)+_0x508c54['message'],this);}catch(_0x15989d){throw _0x15989d;}}async['buyingGrapes'](){const _0x4ae34f=a2_0x685c1a;try{await Helper[_0x4ae34f(0x175)](0x1f4,this[_0x4ae34f(0x106)],_0x4ae34f(0x151),this);const _0x184536=await this[_0x4ae34f(0x113)](_0x4ae34f(0x13a),_0x4ae34f(0x12a),this[_0x4ae34f(0x161)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x4ae34f(0x117)](),_0x184536[_0x4ae34f(0x105)]?(await Helper[_0x4ae34f(0x175)](0x3e8,this[_0x4ae34f(0x106)],_0x4ae34f(0x16c),this),await this['getAvailablePlant']()):(await Helper[_0x4ae34f(0x175)](0x1388,this[_0x4ae34f(0x106)],''+_0x184536['message'],this),await this[_0x4ae34f(0x111)]());}catch(_0x3f6337){throw _0x3f6337;}}async[a2_0x685c1a(0x164)](_0x172123=![]){const _0x3bd7a6=a2_0x685c1a;try{if(_0x172123)await Helper[_0x3bd7a6(0x175)](0x1f4,this[_0x3bd7a6(0x106)],_0x3bd7a6(0x16b),this);const _0x32204c=await this[_0x3bd7a6(0x113)]('/api/v1/players/land?limit=3000',_0x3bd7a6(0x16e),this['token']);if(_0x32204c['success']){if(_0x172123)await Helper[_0x3bd7a6(0x175)](0x3e8,this[_0x3bd7a6(0x106)],_0x3bd7a6(0x126),this);this['land']=_0x32204c[_0x3bd7a6(0x120)];}else await Helper[_0x3bd7a6(0x175)](0x1388,this[_0x3bd7a6(0x106)],_0x3bd7a6(0x156)+_0x32204c[_0x3bd7a6(0x139)],this);}catch(_0x3ebd1){throw _0x3ebd1;}}async[a2_0x685c1a(0x118)](_0x5de897){const _0x491272=a2_0x685c1a;try{await Helper[_0x491272(0x175)](0x1f4,this[_0x491272(0x106)],_0x491272(0x145),this);const _0x49fa6a=await this[_0x491272(0x113)]('/api/v1/players/plant','POSt',this['token'],{'plantId':this[_0x491272(0x12c)][0x0]['id'],'landId':_0x5de897});_0x49fa6a[_0x491272(0x105)]?(await Helper['delay'](0x3e8,this['account'],'Successfully\x20planting\x20grapes\x20to\x20land\x20'+_0x5de897,this),await this[_0x491272(0x164)](),await this[_0x491272(0x10a)]()):await Helper[_0x491272(0x175)](0x1388,this[_0x491272(0x106)],_0x491272(0x156)+_0x49fa6a[_0x491272(0x139)],this);}catch(_0x45d1c7){throw _0x45d1c7;}}async[a2_0x685c1a(0x111)](){const _0x43210a=a2_0x685c1a;try{await Helper[_0x43210a(0x175)](0x1f4,this[_0x43210a(0x106)],_0x43210a(0x160),this);const _0x261f04=await this[_0x43210a(0x113)](_0x43210a(0x11c),_0x43210a(0x12f),this[_0x43210a(0x161)]);_0x261f04[_0x43210a(0x105)]?(await Helper[_0x43210a(0x175)](0x7d0,this['account'],'Successfully\x20Harvest\x20All\x20Plant\x20Got\x20'+_0x261f04[_0x43210a(0x120)][_0x43210a(0x15f)]+'\x20GEM\x20&\x20'+_0x261f04[_0x43210a(0x120)][_0x43210a(0x131)]+_0x43210a(0x165),this),await this['getUser'](),await this[_0x43210a(0x164)](),await this[_0x43210a(0x10a)]()):await Helper[_0x43210a(0x175)](0x7d0,this['account'],''+_0x261f04[_0x43210a(0x139)],this);}catch(_0x32b799){throw _0x32b799;}}async['getPet'](_0x3990ad){const _0x1ccaa1=a2_0x685c1a;try{if(_0x3990ad)await Helper[_0x1ccaa1(0x175)](0x1f4,this[_0x1ccaa1(0x106)],_0x1ccaa1(0x124),this);const _0x5a6c0e=await this[_0x1ccaa1(0x113)](_0x1ccaa1(0x10c),'GET',this[_0x1ccaa1(0x161)]);if(_0x5a6c0e[_0x1ccaa1(0x105)]){if(_0x3990ad)await Helper[_0x1ccaa1(0x175)](0xbb8,this[_0x1ccaa1(0x106)],_0x1ccaa1(0x149),this);this[_0x1ccaa1(0x112)]=_0x5a6c0e['data'];}else await Helper[_0x1ccaa1(0x175)](0xbb8,this[_0x1ccaa1(0x106)],''+_0x5a6c0e[_0x1ccaa1(0x139)],this);}catch(_0x5bd5d5){throw _0x5bd5d5;}}async[a2_0x685c1a(0x15e)](){const _0x1bb7ca=a2_0x685c1a;try{await Helper[_0x1bb7ca(0x175)](0x1f4,this[_0x1bb7ca(0x106)],_0x1bb7ca(0x136),this);const _0x14c47e=await this[_0x1bb7ca(0x113)](_0x1bb7ca(0x13a),_0x1bb7ca(0x12a),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x14c47e[_0x1bb7ca(0x105)]?(await this[_0x1bb7ca(0x117)](),await this[_0x1bb7ca(0x110)]()):await Helper[_0x1bb7ca(0x175)](0xbb8,this[_0x1bb7ca(0x106)],''+_0x14c47e['message'],this);}catch(_0x31f636){throw _0x31f636;}}async[a2_0x685c1a(0x110)](){const _0xd18276=a2_0x685c1a;try{const _0x15412c=await this[_0xd18276(0x113)](_0xd18276(0x150),'GET',this[_0xd18276(0x161)]);_0x15412c[_0xd18276(0x105)]?this[_0xd18276(0x125)]=_0x15412c[_0xd18276(0x120)]:await Helper['delay'](0xbb8,this[_0xd18276(0x106)],''+res[_0xd18276(0x139)],this);}catch(_0x7718a7){throw _0x7718a7;}}async[a2_0x685c1a(0x115)](){const _0x522189=a2_0x685c1a;try{await Helper[_0x522189(0x175)](0x1f4,this[_0x522189(0x106)],_0x522189(0x122),this);const _0x391ac0=await this[_0x522189(0x113)]('/api/v1/chest/open-multiple',_0x522189(0x12a),this[_0x522189(0x161)],{'petTypeIds':PetList['petCompanion'][_0x522189(0x13b)](_0x57ec01=>_0x57ec01[_0x522189(0x11f)]=='A')['data'],'chestIds':this['chest'][_0x522189(0x15c)](_0xba953e=>{return _0xba953e['id'];})});_0x391ac0[_0x522189(0x105)]?(await this[_0x522189(0x110)](),await Helper[_0x522189(0x175)](0x3e8,this[_0x522189(0x106)],'Successfully\x20Opening\x20Multiple\x20Chest',this)):await Helper[_0x522189(0x175)](0xbb8,this[_0x522189(0x106)],''+_0x391ac0[_0x522189(0x139)],this);}catch(_0x49ad54){throw _0x49ad54;}}async['upgradePet'](_0x501166){const _0x54fd3e=a2_0x685c1a;try{await Helper[_0x54fd3e(0x175)](0x1f4,this['account'],'Upgrading\x20pet\x20'+_0x501166[_0x54fd3e(0x14d)]+_0x54fd3e(0x14f),this);const _0x520c7d=await this['fetch']('/api/v1/players/pet/upgrade','POST',this['token'],{'level':_0x501166[_0x54fd3e(0x158)],'petTypeId':PetList['petTypeList']['find'](_0x23ac3e=>_0x23ac3e[_0x54fd3e(0x14d)]==_0x501166[_0x54fd3e(0x14d)])['petTypeId']});_0x520c7d[_0x54fd3e(0x105)]?(await this['getPet'](),await Helper[_0x54fd3e(0x175)](0x3e8,this['account'],_0x54fd3e(0x15a),this)):await Helper[_0x54fd3e(0x175)](0xbb8,this[_0x54fd3e(0x106)],''+_0x520c7d[_0x54fd3e(0x139)],this);}catch(_0x4de186){throw _0x4de186;}}async[a2_0x685c1a(0x14c)](){const _0x4e5dcf=a2_0x685c1a;try{await Helper[_0x4e5dcf(0x175)](0x1f4,this[_0x4e5dcf(0x106)],_0x4e5dcf(0x10e),this);const _0x10cb15=await this[_0x4e5dcf(0x113)](_0x4e5dcf(0x12b),_0x4e5dcf(0x12a),this[_0x4e5dcf(0x161)]);_0x10cb15[_0x4e5dcf(0x105)]?(await this[_0x4e5dcf(0x117)](),await Helper[_0x4e5dcf(0x175)](0x3e8,this[_0x4e5dcf(0x106)],'Successfully\x20Claim\x20Gold,\x20got\x20'+_0x10cb15[_0x4e5dcf(0x120)][_0x4e5dcf(0x162)]+_0x4e5dcf(0x165),this)):await Helper[_0x4e5dcf(0x175)](0xbb8,this[_0x4e5dcf(0x106)],''+_0x10cb15[_0x4e5dcf(0x139)],this);}catch(_0x464178){throw _0x464178;}}async['generateUpgradablePet'](){const _0x1a7a16=a2_0x685c1a;let _0x432e05=[];for(const _0x22a565 of this[_0x1a7a16(0x112)]){const _0x56f53b=_0x432e05[_0x1a7a16(0x13b)](_0x28b32d=>_0x28b32d[_0x1a7a16(0x14d)]===_0x22a565['name']&&_0x28b32d[_0x1a7a16(0x158)]===_0x22a565[_0x1a7a16(0x158)]);_0x56f53b?_0x56f53b[_0x1a7a16(0x135)]+=0x1:_0x432e05[_0x1a7a16(0x143)]({..._0x22a565,'count':0x1});}return _0x432e05=_0x432e05[_0x1a7a16(0x11b)](_0x5d4f12=>_0x5d4f12[_0x1a7a16(0x135)]>=0x5),_0x432e05;}}