function a2_0x3e33(_0x9fae98,_0x29dc60){const _0x37cce8=a2_0x37cc();return a2_0x3e33=function(_0x3e331b,_0x2cc235){_0x3e331b=_0x3e331b-0x17c;let _0x770e04=_0x37cce8[_0x3e331b];return _0x770e04;},a2_0x3e33(_0x9fae98,_0x29dc60);}const a2_0x1da292=a2_0x3e33;(function(_0x5f0d94,_0x37d704){const _0x2d0834=a2_0x3e33,_0x378458=_0x5f0d94();while(!![]){try{const _0x123a9d=-parseInt(_0x2d0834(0x1b6))/0x1*(-parseInt(_0x2d0834(0x1df))/0x2)+parseInt(_0x2d0834(0x17e))/0x3+parseInt(_0x2d0834(0x1b1))/0x4+-parseInt(_0x2d0834(0x1be))/0x5+-parseInt(_0x2d0834(0x196))/0x6*(-parseInt(_0x2d0834(0x1a6))/0x7)+parseInt(_0x2d0834(0x1d2))/0x8+-parseInt(_0x2d0834(0x1a1))/0x9;if(_0x123a9d===_0x37d704)break;else _0x378458['push'](_0x378458['shift']());}catch(_0x48d4ab){_0x378458['push'](_0x378458['shift']());}}}(a2_0x37cc,0x5ccc5));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0xd2b09 from'../utils/logger.js';import{io}from'socket.io-client';import{PetList}from'./pet_list.js';import{Config}from'../../config/config.js';function a2_0x37cc(){const _0xe22ae8=['mission','Claiming\x20Missions\x20','openChest','62UXrrvb','title','socket','Pet\x20','/api/v1/players/plant/harvestAll','fetch','Upgrading\x20pet\x20','WSS\x20Handshake\x20Timeout','Getting\x20player\x20pet...','claimedCoin','success','POSt','disconnect','login','getUser','WSS\x20Handshake\x20Error:\x20','2116410mcqrDJ','petTypeId','getSeedList','query','WSS\x20Error\x20:\x20','map','claimMission','Getting\x20Missions...','WSS\x20Handshake\x20completed\x20and\x20connected.','account','Successfully\x20Buying\x201\x20Grapes','/api/v1/players/plant?limit=3000','filter','\x20Level\x20','/api/v1/user/daily-mission?limit=3000','Successfully\x20Get\x20Misisons','...','Getting\x20User\x20Info...','message','/api/v1/auth/telegram','seed','error','/api/v1/players/pet/upgrade','petTypeList','6ECYjho','Successfully\x20Get\x20Seed\x20List','connect_error','connect','/api/v1/store/buy','buyChest','level','https://api.catopia.io','data','plantString','getLands','19534815kjtGcI','Connecting\x20to\x20WSS...','delay','Buying\x20Grapes...','Error\x20:\x20','2696757HBtOXF','Try\x20to\x20Login...','Successfully\x20Login','find','/api/v1/chest/open-multiple','POST','gold','\x20GOLD','/api/v1/players/pet?limit=3000','Claiming\x20Gold...','missions','2892988GxauLF','\x20GEM\x20&\x20','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','/api/v1/players/land?limit=3000','push','14962dCiKZp','gem','plantSeed','Successfully\x20Opening\x20Multiple\x20Chest','petCompanion','Socket\x20ID:\x20','pet','name','710385ripZdW','WSS\x20Connection\x20Closed\x20','GET','\x20Successfully\x20Upgraded\x20to\x20Level\x20','WSS\x20Connection\x20Error:\x20','getAvailablePlant','buyingGrapes','getPet','claimGold','info','initWss','plant','Successfully\x20Claim\x20Gold,\x20got\x20','token','Successfully\x20Get\x20User\x20Land\x20Info','Successfully\x20planting\x20grapes\x20to\x20land\x20','refreshToken','land','chest','entries','3319384ffJbdb','join','Successfully\x20Claim\x20Misisons','/api/v1/players/plant','user','harvestAll','getMission','wss://cowtopia-ws.tonfarmer.com','count','Successfully\x20Get\x20Player\x20Plant'];a2_0x37cc=function(){return _0xe22ae8;};return a2_0x37cc();}export class Catopia extends API{constructor(_0x13dd7d,_0x20e2a2,_0x46a356,_0x4044f6){const _0x57b215=a2_0x3e33;super(_0x20e2a2,_0x57b215(0x19d),_0x4044f6),this[_0x57b215(0x187)]=_0x13dd7d,this[_0x57b215(0x181)]=_0x20e2a2,this['queryObj']=_0x46a356;}async[a2_0x1da292(0x1ec)](){const _0x50679d=a2_0x1da292;try{await Helper[_0x50679d(0x1a3)](0x1f4,this['account'],_0x50679d(0x1a7),this);const _0x15dcc0=await this['fetch'](_0x50679d(0x191),_0x50679d(0x1ab),undefined,{'initData':this[_0x50679d(0x181)]});await Helper[_0x50679d(0x1a3)](0x3e8,this['account'],_0x50679d(0x1a8),this),this[_0x50679d(0x1cb)]=_0x15dcc0[_0x50679d(0x19e)]['accessToken'],this['refreshToken']=_0x15dcc0[_0x50679d(0x1ce)];}catch(_0x10c36f){throw _0x10c36f;}}async[a2_0x1da292(0x17c)](_0x26eb0a=![]){const _0x4ade89=a2_0x1da292;try{if(_0x26eb0a)await Helper['delay'](0x1f4,this['account'],_0x4ade89(0x18f),this);const _0x3f0623=await this[_0x4ade89(0x1e4)]('/api/v1/user-collection?limit=3000',_0x4ade89(0x1c0),this[_0x4ade89(0x1cb)]);if(_0x3f0623[_0x4ade89(0x1e9)]==!![]){if(_0x26eb0a)await Helper['delay'](0x3e8,this[_0x4ade89(0x187)],'Successfully\x20Get\x20User\x20Info',this);this[_0x4ade89(0x1d6)]=_0x3f0623[_0x4ade89(0x19e)];}else await Helper['delay'](0x1388,this[_0x4ade89(0x187)],'Error\x20:\x20'+_0x3f0623[_0x4ade89(0x190)],this);}catch(_0x1b01e8){throw _0x1b01e8;}}async[a2_0x1da292(0x1c8)](){return new Promise(async(_0x2af3ac,_0x4aa491)=>{const _0x371ba3=a2_0x3e33;await Helper[_0x371ba3(0x1a3)](0x3e8,this[_0x371ba3(0x187)],_0x371ba3(0x1a2),this),this[_0x371ba3(0x1e1)]=io(_0x371ba3(0x1d9),{'auth':{'token':this['plainToken']},'transports':['websocket']}),this[_0x371ba3(0x1e1)]['on'](_0x371ba3(0x199),async()=>{const _0x2d93bf=_0x371ba3;await Helper['delay'](0x3e8,this[_0x2d93bf(0x187)],'WSS\x20Connected...',this),a2_0xd2b09[_0x2d93bf(0x1c7)](_0x2d93bf(0x186)),a2_0xd2b09[_0x2d93bf(0x1c7)](_0x2d93bf(0x1bb)+this[_0x2d93bf(0x1e1)]['id']),_0x2af3ac();}),this[_0x371ba3(0x1e1)]['on'](_0x371ba3(0x198),async _0x46d953=>{const _0x394eee=_0x371ba3;await Helper[_0x394eee(0x1a3)](0x3e8,this[_0x394eee(0x187)],_0x394eee(0x1c2)+_0x46d953[_0x394eee(0x190)],this),a2_0xd2b09['error'](_0x394eee(0x17d)+_0x46d953['message']),_0x4aa491(_0x46d953);}),this[_0x371ba3(0x1e1)]['on']('connect_timeout',async()=>{const _0x13aaa3=_0x371ba3;await Helper[_0x13aaa3(0x1a3)](0x3e8,this[_0x13aaa3(0x187)],'WSS\x20Connection\x20Timeout',this),a2_0xd2b09['error']('WSS\x20Handshake\x20Timeout'),_0x4aa491(new Error(_0x13aaa3(0x1e6)));}),this[_0x371ba3(0x1e1)]['on']('error',async _0x3ab41a=>{const _0x4c2af6=_0x371ba3;await Helper[_0x4c2af6(0x1a3)](0x3e8,this[_0x4c2af6(0x187)],'WSS\x20Error\x20:\x20'+_0x3ab41a[_0x4c2af6(0x190)],this),a2_0xd2b09[_0x4c2af6(0x193)](_0x4c2af6(0x182)+_0x3ab41a[_0x4c2af6(0x190)]),_0x4aa491(_0x3ab41a);}),this[_0x371ba3(0x1e1)]['on'](_0x371ba3(0x1eb),async _0x189957=>{const _0x4da8ed=_0x371ba3;await Helper['delay'](0x3e8,this['account'],_0x4da8ed(0x1bf)+_0x189957+_0x4da8ed(0x18e),this),a2_0xd2b09[_0x4da8ed(0x1c7)]('WSS\x20Disconnected:\x20'+_0x189957);});});}async[a2_0x1da292(0x1d8)](_0x26a585=![]){const _0x292feb=a2_0x1da292;try{if(_0x26a585)await Helper[_0x292feb(0x1a3)](0x1f4,this[_0x292feb(0x187)],_0x292feb(0x185),this);this[_0x292feb(0x1b0)]=[];const _0x7e86b=await this['fetch'](_0x292feb(0x18c),_0x292feb(0x1c0),this[_0x292feb(0x1cb)]);if(_0x7e86b['success']){if(_0x26a585)await Helper[_0x292feb(0x1a3)](0x3e8,this[_0x292feb(0x187)],_0x292feb(0x18d),this);this[_0x292feb(0x1b0)]=_0x7e86b['data'];}else await Helper[_0x292feb(0x1a3)](0x1388,this[_0x292feb(0x187)],'Error\x20:\x20'+_0x7e86b[_0x292feb(0x190)],this);}catch(_0x4cac03){throw _0x4cac03;}}async[a2_0x1da292(0x184)](_0x177ab8){const _0x2122d7=a2_0x1da292;try{await Helper[_0x2122d7(0x1a3)](0x1f4,this[_0x2122d7(0x187)],_0x2122d7(0x1dd)+_0x177ab8[_0x2122d7(0x1dc)][_0x2122d7(0x1e0)]+_0x2122d7(0x18e),this);const _0x1ecfef=await this[_0x2122d7(0x1e4)]('/api/v1/user/daily-mission/'+_0x177ab8['id']+'/claim','POST',this['token']);_0x1ecfef['success']?(await Helper[_0x2122d7(0x1a3)](0x3e8,this['account'],_0x2122d7(0x1d4),this),await this[_0x2122d7(0x17c)](),await this['getMission']()):await Helper['delay'](0x1388,this[_0x2122d7(0x187)],'Error\x20:\x20'+_0x1ecfef[_0x2122d7(0x190)],this);}catch(_0x1db3ef){throw _0x1db3ef;}}async[a2_0x1da292(0x180)](){const _0x506d2d=a2_0x1da292;try{await Helper[_0x506d2d(0x1a3)](0x1f4,this[_0x506d2d(0x187)],'Getting\x20Seed\x20List...',this);const _0x244c07=await this['fetch']('/api/v1/seed?limit=3000',_0x506d2d(0x1c0),this[_0x506d2d(0x1cb)]);_0x244c07[_0x506d2d(0x1e9)]?(await Helper['delay'](0x3e8,this[_0x506d2d(0x187)],_0x506d2d(0x197),this),this[_0x506d2d(0x192)]=_0x244c07['data']):await Helper['delay'](0x1388,this[_0x506d2d(0x187)],'Error\x20:\x20'+_0x244c07[_0x506d2d(0x190)],this);}catch(_0x48f6d4){throw _0x48f6d4;}}async[a2_0x1da292(0x1c3)](_0x50a3d8=![]){const _0xbe54ce=a2_0x1da292;try{if(_0x50a3d8)await Helper['delay'](0x1f4,this[_0xbe54ce(0x187)],'Getting\x20Player\x20Plant...',this);const _0x2c394f=await this[_0xbe54ce(0x1e4)](_0xbe54ce(0x189),'GET',this[_0xbe54ce(0x1cb)]);if(_0x2c394f[_0xbe54ce(0x1e9)]){if(_0x50a3d8)await Helper['delay'](0x3e8,this['account'],_0xbe54ce(0x1db),this);this[_0xbe54ce(0x1c9)]=_0x2c394f[_0xbe54ce(0x19e)];const _0x2a7c4f=this[_0xbe54ce(0x1c9)]['reduce']((_0x8f8033,_0x21bd8d)=>{const _0x3545cb=_0xbe54ce,_0x4df7da=_0x21bd8d[_0x3545cb(0x1bd)];return _0x8f8033[_0x4df7da]=(_0x8f8033[_0x4df7da]||0x0)+0x1,_0x8f8033;},{});this[_0xbe54ce(0x19f)]=Object[_0xbe54ce(0x1d1)](_0x2a7c4f)['map'](([_0x39c082,_0x14991f])=>_0x14991f+'\x20'+_0x39c082+(_0x14991f>0x1?'s':''))[_0xbe54ce(0x1d3)]('\x20');}else await Helper['delay'](0x1388,this['account'],'Error\x20:\x20'+_0x2c394f[_0xbe54ce(0x190)],this);}catch(_0x25e931){throw _0x25e931;}}async[a2_0x1da292(0x1c4)](){const _0x58dde7=a2_0x1da292;try{await Helper['delay'](0x1f4,this[_0x58dde7(0x187)],_0x58dde7(0x1a4),this);const _0x573f6d=await this[_0x58dde7(0x1e4)](_0x58dde7(0x19a),'POST',this['token'],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x58dde7(0x17c)](),_0x573f6d['success']?(await Helper[_0x58dde7(0x1a3)](0x3e8,this[_0x58dde7(0x187)],_0x58dde7(0x188),this),await this[_0x58dde7(0x1c3)]()):(await Helper[_0x58dde7(0x1a3)](0x1388,this[_0x58dde7(0x187)],''+_0x573f6d[_0x58dde7(0x190)],this),await this[_0x58dde7(0x1d7)]());}catch(_0xe731a6){throw _0xe731a6;}}async[a2_0x1da292(0x1a0)](_0x5f1a61=![]){const _0x2eccba=a2_0x1da292;try{if(_0x5f1a61)await Helper[_0x2eccba(0x1a3)](0x1f4,this[_0x2eccba(0x187)],'Getting\x20User\x20Land\x20Info...',this);const _0x3aa908=await this[_0x2eccba(0x1e4)](_0x2eccba(0x1b4),_0x2eccba(0x1c0),this[_0x2eccba(0x1cb)]);if(_0x3aa908[_0x2eccba(0x1e9)]){if(_0x5f1a61)await Helper[_0x2eccba(0x1a3)](0x3e8,this['account'],_0x2eccba(0x1cc),this);this[_0x2eccba(0x1cf)]=_0x3aa908[_0x2eccba(0x19e)];}else await Helper[_0x2eccba(0x1a3)](0x1388,this['account'],_0x2eccba(0x1a5)+_0x3aa908['message'],this);}catch(_0x404a10){throw _0x404a10;}}async[a2_0x1da292(0x1b8)](_0x2ab9a5){const _0x19367a=a2_0x1da292;try{await Helper[_0x19367a(0x1a3)](0x1f4,this[_0x19367a(0x187)],'Planting\x20Gapes\x20seed\x20to\x20land...',this);const _0x404618=await this[_0x19367a(0x1e4)](_0x19367a(0x1d5),_0x19367a(0x1ea),this[_0x19367a(0x1cb)],{'plantId':this[_0x19367a(0x1c9)][0x0]['id'],'landId':_0x2ab9a5});_0x404618[_0x19367a(0x1e9)]?(await Helper[_0x19367a(0x1a3)](0x3e8,this[_0x19367a(0x187)],_0x19367a(0x1cd)+_0x2ab9a5,this),await this[_0x19367a(0x1a0)](),await this[_0x19367a(0x1c3)]()):await Helper[_0x19367a(0x1a3)](0x1388,this[_0x19367a(0x187)],_0x19367a(0x1a5)+_0x404618[_0x19367a(0x190)],this);}catch(_0x2726b2){throw _0x2726b2;}}async[a2_0x1da292(0x1d7)](){const _0x30c656=a2_0x1da292;try{await Helper['delay'](0x1f4,this[_0x30c656(0x187)],'Harvesting\x20all...',this);const _0x45d405=await this[_0x30c656(0x1e4)](_0x30c656(0x1e3),'POSt',this[_0x30c656(0x1cb)]);_0x45d405['success']?(await Helper[_0x30c656(0x1a3)](0x7d0,this[_0x30c656(0x187)],_0x30c656(0x1b3)+_0x45d405['data'][_0x30c656(0x1b7)]+_0x30c656(0x1b2)+_0x45d405[_0x30c656(0x19e)][_0x30c656(0x1ac)]+_0x30c656(0x1ad),this),await this[_0x30c656(0x17c)](),await this[_0x30c656(0x1a0)](),await this['getAvailablePlant']()):await Helper[_0x30c656(0x1a3)](0x7d0,this[_0x30c656(0x187)],''+_0x45d405[_0x30c656(0x190)],this);}catch(_0x4838ab){throw _0x4838ab;}}async[a2_0x1da292(0x1c5)](_0x58c34c){const _0x2f8c4e=a2_0x1da292;try{if(_0x58c34c)await Helper['delay'](0x1f4,this['account'],_0x2f8c4e(0x1e7),this);const _0x4df8a3=await this[_0x2f8c4e(0x1e4)](_0x2f8c4e(0x1ae),_0x2f8c4e(0x1c0),this[_0x2f8c4e(0x1cb)]);if(_0x4df8a3['success']){if(_0x58c34c)await Helper['delay'](0xbb8,this['account'],'Successfully\x20get\x20player\x20pet',this);this['pet']=_0x4df8a3[_0x2f8c4e(0x19e)];}else await Helper[_0x2f8c4e(0x1a3)](0xbb8,this['account'],''+_0x4df8a3[_0x2f8c4e(0x190)],this);}catch(_0x182a45){throw _0x182a45;}}async[a2_0x1da292(0x19b)](){const _0x4f2478=a2_0x1da292;try{await Helper[_0x4f2478(0x1a3)](0x1f4,this[_0x4f2478(0x187)],'Buying\x20common\x20chest...',this);const _0x55f3e1=await this['fetch'](_0x4f2478(0x19a),'POST',this[_0x4f2478(0x1cb)],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x55f3e1[_0x4f2478(0x1e9)]?(await this['getUser'](),await this['getChest']()):await Helper[_0x4f2478(0x1a3)](0xbb8,this[_0x4f2478(0x187)],''+_0x55f3e1[_0x4f2478(0x190)],this);}catch(_0x1acb5f){throw _0x1acb5f;}}async['getChest'](){const _0x1401a4=a2_0x1da292;try{const _0x251326=await this['fetch']('/api/v1/players/chest?limit=3000',_0x1401a4(0x1c0),this[_0x1401a4(0x1cb)]);_0x251326['success']?this['chest']=_0x251326['data']:await Helper[_0x1401a4(0x1a3)](0xbb8,this[_0x1401a4(0x187)],''+res[_0x1401a4(0x190)],this);}catch(_0x295e19){throw _0x295e19;}}async[a2_0x1da292(0x1de)](){const _0x254473=a2_0x1da292;try{const _0xa120f8=Config['COMPANION']??'A';await Helper[_0x254473(0x1a3)](0x1f4,this['account'],'Opening\x20multipe\x20chest...',this);const _0x529e7f=await this['fetch'](_0x254473(0x1aa),_0x254473(0x1ab),this['token'],{'petTypeIds':PetList[_0x254473(0x1ba)][_0x254473(0x1a9)](_0x60e617=>_0x60e617['type']==_0xa120f8)[_0x254473(0x19e)],'chestIds':this[_0x254473(0x1d0)][_0x254473(0x183)](_0x27e867=>{return _0x27e867['id'];})});_0x529e7f[_0x254473(0x1e9)]?(await this['getChest'](),await Helper[_0x254473(0x1a3)](0x3e8,this[_0x254473(0x187)],_0x254473(0x1b9),this)):await Helper[_0x254473(0x1a3)](0xbb8,this['account'],''+_0x529e7f[_0x254473(0x190)],this);}catch(_0x11f2b7){throw _0x11f2b7;}}async['upgradePet'](_0x238b21){const _0x2f2c04=a2_0x1da292;try{await Helper[_0x2f2c04(0x1a3)](0x1f4,this[_0x2f2c04(0x187)],_0x2f2c04(0x1e5)+_0x238b21[_0x2f2c04(0x1bd)]+_0x2f2c04(0x18b)+_0x238b21['level']+_0x2f2c04(0x18e),this);const _0x45fa7f=await this[_0x2f2c04(0x1e4)](_0x2f2c04(0x194),_0x2f2c04(0x1ab),this[_0x2f2c04(0x1cb)],{'level':_0x238b21['level'],'petTypeId':PetList[_0x2f2c04(0x195)][_0x2f2c04(0x1a9)](_0x418fdc=>_0x418fdc['name']==_0x238b21[_0x2f2c04(0x1bd)])[_0x2f2c04(0x17f)]});_0x45fa7f[_0x2f2c04(0x1e9)]?(await this['getPet'](),await Helper[_0x2f2c04(0x1a3)](0x3e8,this[_0x2f2c04(0x187)],_0x2f2c04(0x1e2)+_0x238b21[_0x2f2c04(0x1bd)]+_0x2f2c04(0x1c1)+(_0x238b21[_0x2f2c04(0x19c)]+0x1)+'\x20',this)):await Helper[_0x2f2c04(0x1a3)](0xbb8,this[_0x2f2c04(0x187)],''+_0x45fa7f[_0x2f2c04(0x190)],this);}catch(_0x3e21c0){throw _0x3e21c0;}}async[a2_0x1da292(0x1c6)](){const _0x437ed7=a2_0x1da292;try{await Helper[_0x437ed7(0x1a3)](0x1f4,this['account'],_0x437ed7(0x1af),this);const _0x3812f5=await this[_0x437ed7(0x1e4)]('/api/v1/user-collection/claim-gold','POST',this[_0x437ed7(0x1cb)]);_0x3812f5[_0x437ed7(0x1e9)]?(await this[_0x437ed7(0x17c)](),await Helper[_0x437ed7(0x1a3)](0x3e8,this[_0x437ed7(0x187)],_0x437ed7(0x1ca)+_0x3812f5[_0x437ed7(0x19e)][_0x437ed7(0x1e8)]+_0x437ed7(0x1ad),this)):await Helper[_0x437ed7(0x1a3)](0xbb8,this[_0x437ed7(0x187)],''+_0x3812f5[_0x437ed7(0x190)],this);}catch(_0x4351d0){throw _0x4351d0;}}async['generateUpgradablePet'](){const _0x2140fb=a2_0x1da292;let _0x4b52e1=[];for(const _0x1bc25c of this[_0x2140fb(0x1bc)]){const _0x7cf75b=_0x4b52e1['find'](_0xed3b80=>_0xed3b80['name']===_0x1bc25c[_0x2140fb(0x1bd)]&&_0xed3b80['level']===_0x1bc25c[_0x2140fb(0x19c)]);_0x7cf75b?_0x7cf75b['count']+=0x1:_0x4b52e1[_0x2140fb(0x1b5)]({..._0x1bc25c,'count':0x1});}return _0x4b52e1=_0x4b52e1[_0x2140fb(0x18a)](_0x548add=>_0x548add[_0x2140fb(0x1da)]>=0x5),_0x4b52e1;}}