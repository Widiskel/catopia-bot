const a2_0x464dc4=a2_0xef7c;(function(_0x608cff,_0xf18023){const _0x1900bd=a2_0xef7c,_0x406eea=_0x608cff();while(!![]){try{const _0x4d6867=-parseInt(_0x1900bd(0x174))/0x1*(-parseInt(_0x1900bd(0x1b5))/0x2)+-parseInt(_0x1900bd(0x172))/0x3*(parseInt(_0x1900bd(0x1b8))/0x4)+-parseInt(_0x1900bd(0x154))/0x5*(parseInt(_0x1900bd(0x153))/0x6)+-parseInt(_0x1900bd(0x199))/0x7+-parseInt(_0x1900bd(0x1c3))/0x8*(-parseInt(_0x1900bd(0x19f))/0x9)+parseInt(_0x1900bd(0x1c2))/0xa*(-parseInt(_0x1900bd(0x1b3))/0xb)+parseInt(_0x1900bd(0x176))/0xc;if(_0x4d6867===_0xf18023)break;else _0x406eea['push'](_0x406eea['shift']());}catch(_0x351990){_0x406eea['push'](_0x406eea['shift']());}}}(a2_0x30d7,0xd8e28));function a2_0x30d7(){const _0x46ee33=['WSS\x20Connected...','/api/v1/user-collection?limit=3000','Getting\x20player\x20pet...','getSeedList','Successfully\x20Claim\x20Gold,\x20got\x20','POST','upgradePet','WSS\x20Connection\x20Timeout','petTypeId','/api/v1/players/pet?limit=3000','/api/v1/chest/open-multiple','join','fetch','map','33VaTBHm','delay','338wgYOKQ','getAvailablePlant','reduce','16ZlJRDt','connect','query','claimGold','getLands','/api/v1/seed?limit=3000','connect_error','petCompanion','Getting\x20User\x20Info...','claimMission','1164970NlAHnc','9273328hchbvc','find','gold','getPet','level','petTypeList','token','entries','info','Getting\x20Seed\x20List...','WSS\x20Handshake\x20Error:\x20','Upgrading\x20pet\x20','Try\x20to\x20Login...','initWss','146118wsAElZ','245MHVcec','Connecting\x20to\x20WSS...','Successfully\x20get\x20player\x20pet','getChest','user','WSS\x20Error\x20:\x20','POSt','success','missions','pet','Socket\x20ID:\x20','count','error','Successfully\x20Claim\x20Misisons','accessToken','toLowerCase','Getting\x20User\x20Land\x20Info...','...','/api/v1/players/land?limit=3000','Buying\x20common\x20chest...','/api/v1/players/chest?limit=3000','https://api.catopia.io','/api/v1/players/plant?limit=3000','plantSeed','Getting\x20Missions...','WSS\x20Disconnected:\x20','message','Successfully\x20Opening\x20Multiple\x20Chest','WSS\x20Connection\x20Error:\x20','Harvesting\x20all...','710580sdwMyv','Successfully\x20Buying\x201\x20Grapes','2378BOUJwn','GET','41377140OzZPxH','openChest','Planting\x20Gapes\x20seed\x20to\x20land...','data','/api/v1/players/pet/upgrade','/api/v1/user/daily-mission?limit=3000','Buying\x20Grapes...','chest','seed','\x20Successfully\x20Upgraded\x20to\x20Level\x20','Successfully\x20Get\x20Seed\x20List','/api/v1/store/buy','plantString','/api/v1/auth/telegram','Error\x20:\x20','mission','websocket','getUser','socket','Successfully\x20Get\x20Player\x20Plant','name','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','push','plant','getMission','queryObj','/api/v1/user/daily-mission/','Pet\x20','Successfully\x20Login','Claiming\x20Missions\x20','type','\x20GEM\x20&\x20','account','Successfully\x20Get\x20Misisons','login','11413885BMKXxe','Successfully\x20Get\x20User\x20Info','\x20Level\x20','refreshToken','\x20GOLD','gem','9LDYkEM','harvestAll','WSS\x20Handshake\x20Timeout','title','Getting\x20Player\x20Plant...','connect_timeout'];a2_0x30d7=function(){return _0x46ee33;};return a2_0x30d7();}import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x4fa7d3 from'../utils/logger.js';import{io}from'socket.io-client';function a2_0xef7c(_0x144b1a,_0x5196c9){const _0x30d7e7=a2_0x30d7();return a2_0xef7c=function(_0xef7c27,_0x4dc5ff){_0xef7c27=_0xef7c27-0x14d;let _0x5a8159=_0x30d7e7[_0xef7c27];return _0x5a8159;},a2_0xef7c(_0x144b1a,_0x5196c9);}import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x189ca4,_0xb771a8,_0x3b567c,_0xacc16e){const _0x195913=a2_0xef7c;super(_0xb771a8,_0x195913(0x169),_0xacc16e),this['account']=_0x189ca4,this['query']=_0xb771a8,this[_0x195913(0x18f)]=_0x3b567c;}async[a2_0x464dc4(0x198)](){const _0x286176=a2_0x464dc4;try{await Helper[_0x286176(0x1b4)](0x1f4,this[_0x286176(0x196)],_0x286176(0x151),this);const _0x4cece7=await this[_0x286176(0x1b1)](_0x286176(0x183),_0x286176(0x1aa),undefined,{'initData':this[_0x286176(0x1ba)]});await Helper[_0x286176(0x1b4)](0x3e8,this[_0x286176(0x196)],_0x286176(0x192),this),this['token']=_0x4cece7[_0x286176(0x179)][_0x286176(0x162)],this[_0x286176(0x19c)]=_0x4cece7[_0x286176(0x19c)];}catch(_0x3172e7){throw _0x3172e7;}}async[a2_0x464dc4(0x187)](_0x9e64db=![]){const _0x170a82=a2_0x464dc4;try{if(_0x9e64db)await Helper[_0x170a82(0x1b4)](0x1f4,this[_0x170a82(0x196)],_0x170a82(0x1c0),this);const _0xca2a37=await this[_0x170a82(0x1b1)](_0x170a82(0x1a6),'GET',this['token']);if(_0xca2a37['success']==!![]){if(_0x9e64db)await Helper[_0x170a82(0x1b4)](0x3e8,this[_0x170a82(0x196)],_0x170a82(0x19a),this);this[_0x170a82(0x158)]=_0xca2a37[_0x170a82(0x179)];}else await Helper['delay'](0x1388,this[_0x170a82(0x196)],_0x170a82(0x184)+_0xca2a37[_0x170a82(0x16e)],this);}catch(_0xfd664){throw _0xfd664;}}async[a2_0x464dc4(0x152)](){return new Promise(async(_0x3ff454,_0x3bf243)=>{const _0x21ca4f=a2_0xef7c;await Helper[_0x21ca4f(0x1b4)](0x3e8,this[_0x21ca4f(0x196)],_0x21ca4f(0x155),this),this['socket']=io('wss://cowtopia-ws.tonfarmer.com',{'auth':{'token':this['plainToken']},'transports':[_0x21ca4f(0x186)]}),this[_0x21ca4f(0x188)]['on'](_0x21ca4f(0x1b9),async()=>{const _0x412ed4=_0x21ca4f;await Helper['delay'](0x3e8,this[_0x412ed4(0x196)],_0x412ed4(0x1a5),this),a2_0x4fa7d3[_0x412ed4(0x14d)]('WSS\x20Handshake\x20completed\x20and\x20connected.'),a2_0x4fa7d3[_0x412ed4(0x14d)](_0x412ed4(0x15e)+this[_0x412ed4(0x188)]['id']),_0x3ff454();}),this[_0x21ca4f(0x188)]['on'](_0x21ca4f(0x1be),async _0x473dcc=>{const _0x454a57=_0x21ca4f;await Helper['delay'](0x3e8,this[_0x454a57(0x196)],_0x454a57(0x170)+_0x473dcc[_0x454a57(0x16e)],this),a2_0x4fa7d3['error'](_0x454a57(0x14f)+_0x473dcc[_0x454a57(0x16e)]),_0x3bf243(_0x473dcc);}),this[_0x21ca4f(0x188)]['on'](_0x21ca4f(0x1a4),async()=>{const _0xc60d4e=_0x21ca4f;await Helper[_0xc60d4e(0x1b4)](0x3e8,this[_0xc60d4e(0x196)],_0xc60d4e(0x1ac),this),a2_0x4fa7d3[_0xc60d4e(0x160)](_0xc60d4e(0x1a1)),_0x3bf243(new Error(_0xc60d4e(0x1a1)));}),this['socket']['on'](_0x21ca4f(0x160),async _0x290dc9=>{const _0xdea400=_0x21ca4f;await Helper[_0xdea400(0x1b4)](0x3e8,this['account'],'WSS\x20Error\x20:\x20'+_0x290dc9[_0xdea400(0x16e)],this),a2_0x4fa7d3[_0xdea400(0x160)](_0xdea400(0x159)+_0x290dc9[_0xdea400(0x16e)]),_0x3bf243(_0x290dc9);}),this[_0x21ca4f(0x188)]['on']('disconnect',async _0x9e1129=>{const _0x5a16f8=_0x21ca4f;await Helper[_0x5a16f8(0x1b4)](0x3e8,this[_0x5a16f8(0x196)],'WSS\x20Connection\x20Closed\x20'+_0x9e1129+_0x5a16f8(0x165),this),a2_0x4fa7d3[_0x5a16f8(0x14d)](_0x5a16f8(0x16d)+_0x9e1129);});});}async[a2_0x464dc4(0x18e)](_0x2892fc=![]){const _0x21e74f=a2_0x464dc4;try{if(_0x2892fc)await Helper[_0x21e74f(0x1b4)](0x1f4,this['account'],_0x21e74f(0x16c),this);this[_0x21e74f(0x15c)]=[];const _0x1ae81e=await this['fetch'](_0x21e74f(0x17b),_0x21e74f(0x175),this['token']);if(_0x1ae81e[_0x21e74f(0x15b)]){if(_0x2892fc)await Helper[_0x21e74f(0x1b4)](0x3e8,this['account'],_0x21e74f(0x197),this);this[_0x21e74f(0x15c)]=_0x1ae81e[_0x21e74f(0x179)];}else await Helper[_0x21e74f(0x1b4)](0x1388,this['account'],_0x21e74f(0x184)+_0x1ae81e[_0x21e74f(0x16e)],this);}catch(_0x4202be){throw _0x4202be;}}async[a2_0x464dc4(0x1c1)](_0x1361da){const _0x32c6a7=a2_0x464dc4;try{await Helper[_0x32c6a7(0x1b4)](0x1f4,this[_0x32c6a7(0x196)],_0x32c6a7(0x193)+_0x1361da[_0x32c6a7(0x185)][_0x32c6a7(0x1a2)]+_0x32c6a7(0x165),this);const _0x499347=await this[_0x32c6a7(0x1b1)](_0x32c6a7(0x190)+_0x1361da['id']+'/claim',_0x32c6a7(0x1aa),this[_0x32c6a7(0x1c9)]);_0x499347[_0x32c6a7(0x15b)]?(await Helper[_0x32c6a7(0x1b4)](0x3e8,this[_0x32c6a7(0x196)],_0x32c6a7(0x161),this),await this[_0x32c6a7(0x187)](),await this['getMission']()):await Helper[_0x32c6a7(0x1b4)](0x1388,this[_0x32c6a7(0x196)],'Error\x20:\x20'+_0x499347[_0x32c6a7(0x16e)],this);}catch(_0x4556f1){throw _0x4556f1;}}async[a2_0x464dc4(0x1a8)](){const _0x4edb2e=a2_0x464dc4;try{await Helper[_0x4edb2e(0x1b4)](0x1f4,this[_0x4edb2e(0x196)],_0x4edb2e(0x14e),this);const _0x4d0c30=await this[_0x4edb2e(0x1b1)](_0x4edb2e(0x1bd),'GET',this['token']);_0x4d0c30[_0x4edb2e(0x15b)]?(await Helper[_0x4edb2e(0x1b4)](0x3e8,this[_0x4edb2e(0x196)],_0x4edb2e(0x180),this),this[_0x4edb2e(0x17e)]=_0x4d0c30[_0x4edb2e(0x179)]):await Helper[_0x4edb2e(0x1b4)](0x1388,this[_0x4edb2e(0x196)],_0x4edb2e(0x184)+_0x4d0c30[_0x4edb2e(0x16e)],this);}catch(_0x7946d7){throw _0x7946d7;}}async['getAvailablePlant'](_0x387754=![]){const _0x933863=a2_0x464dc4;try{if(_0x387754)await Helper[_0x933863(0x1b4)](0x1f4,this['account'],_0x933863(0x1a3),this);const _0x74c2c7=await this[_0x933863(0x1b1)](_0x933863(0x16a),_0x933863(0x175),this[_0x933863(0x1c9)]);if(_0x74c2c7[_0x933863(0x15b)]){if(_0x387754)await Helper[_0x933863(0x1b4)](0x3e8,this[_0x933863(0x196)],_0x933863(0x189),this);this['plant']=_0x74c2c7[_0x933863(0x179)];const _0x2334ce=this['plant'][_0x933863(0x1b7)]((_0x3d2e3f,_0x2addc8)=>{const _0x2129aa=_0x933863,_0x1c03b3=_0x2addc8[_0x2129aa(0x18a)][_0x2129aa(0x163)]();return _0x3d2e3f[_0x1c03b3]=(_0x3d2e3f[_0x1c03b3]||0x0)+0x1,_0x3d2e3f;},{});this[_0x933863(0x182)]=Object[_0x933863(0x1ca)](_0x2334ce)[_0x933863(0x1b2)](([_0x11f0d8,_0x2840e3])=>_0x2840e3+'\x20'+_0x11f0d8+(_0x2840e3>0x1?'s':''))[_0x933863(0x1b0)]('\x20');}else await Helper[_0x933863(0x1b4)](0x1388,this[_0x933863(0x196)],_0x933863(0x184)+_0x74c2c7[_0x933863(0x16e)],this);}catch(_0xd140e8){throw _0xd140e8;}}async['buyingGrapes'](){const _0x4e9c87=a2_0x464dc4;try{await Helper[_0x4e9c87(0x1b4)](0x1f4,this['account'],_0x4e9c87(0x17c),this);const _0x54ee39=await this['fetch'](_0x4e9c87(0x181),_0x4e9c87(0x1aa),this['token'],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this['getUser'](),_0x54ee39[_0x4e9c87(0x15b)]?(await Helper['delay'](0x3e8,this[_0x4e9c87(0x196)],_0x4e9c87(0x173),this),await this[_0x4e9c87(0x1b6)]()):(await Helper['delay'](0x1388,this[_0x4e9c87(0x196)],''+_0x54ee39[_0x4e9c87(0x16e)],this),await this[_0x4e9c87(0x1a0)]());}catch(_0x391509){throw _0x391509;}}async['getLands'](_0x2d3d5e=![]){const _0x3e2611=a2_0x464dc4;try{if(_0x2d3d5e)await Helper[_0x3e2611(0x1b4)](0x1f4,this[_0x3e2611(0x196)],_0x3e2611(0x164),this);const _0x5d6516=await this['fetch'](_0x3e2611(0x166),_0x3e2611(0x175),this['token']);if(_0x5d6516[_0x3e2611(0x15b)]){if(_0x2d3d5e)await Helper[_0x3e2611(0x1b4)](0x3e8,this['account'],'Successfully\x20Get\x20User\x20Land\x20Info',this);this['land']=_0x5d6516[_0x3e2611(0x179)];}else await Helper[_0x3e2611(0x1b4)](0x1388,this['account'],_0x3e2611(0x184)+_0x5d6516[_0x3e2611(0x16e)],this);}catch(_0x3d80a2){throw _0x3d80a2;}}async[a2_0x464dc4(0x16b)](_0x7fad06){const _0x47f797=a2_0x464dc4;try{await Helper[_0x47f797(0x1b4)](0x1f4,this[_0x47f797(0x196)],_0x47f797(0x178),this);const _0xecbb82=await this[_0x47f797(0x1b1)]('/api/v1/players/plant',_0x47f797(0x15a),this['token'],{'plantId':this[_0x47f797(0x18d)][0x0]['id'],'landId':_0x7fad06});_0xecbb82['success']?(await Helper[_0x47f797(0x1b4)](0x3e8,this[_0x47f797(0x196)],'Successfully\x20planting\x20grapes\x20to\x20land\x20'+_0x7fad06,this),await this[_0x47f797(0x1bc)](),await this[_0x47f797(0x1b6)]()):await Helper[_0x47f797(0x1b4)](0x1388,this[_0x47f797(0x196)],_0x47f797(0x184)+_0xecbb82['message'],this);}catch(_0x297016){throw _0x297016;}}async[a2_0x464dc4(0x1a0)](){const _0x4c23a2=a2_0x464dc4;try{await Helper[_0x4c23a2(0x1b4)](0x1f4,this[_0x4c23a2(0x196)],_0x4c23a2(0x171),this);const _0x2bfe02=await this['fetch']('/api/v1/players/plant/harvestAll',_0x4c23a2(0x15a),this[_0x4c23a2(0x1c9)]);_0x2bfe02['success']?(await Helper[_0x4c23a2(0x1b4)](0x7d0,this['account'],_0x4c23a2(0x18b)+_0x2bfe02[_0x4c23a2(0x179)][_0x4c23a2(0x19e)]+_0x4c23a2(0x195)+_0x2bfe02['data'][_0x4c23a2(0x1c5)]+_0x4c23a2(0x19d),this),await this[_0x4c23a2(0x187)](),await this['getLands'](),await this[_0x4c23a2(0x1b6)]()):await Helper[_0x4c23a2(0x1b4)](0x7d0,this[_0x4c23a2(0x196)],''+_0x2bfe02[_0x4c23a2(0x16e)],this);}catch(_0x4a8ee0){throw _0x4a8ee0;}}async[a2_0x464dc4(0x1c6)](_0x50ceb0){const _0x38b789=a2_0x464dc4;try{if(_0x50ceb0)await Helper[_0x38b789(0x1b4)](0x1f4,this['account'],_0x38b789(0x1a7),this);const _0x21aee8=await this[_0x38b789(0x1b1)](_0x38b789(0x1ae),_0x38b789(0x175),this[_0x38b789(0x1c9)]);if(_0x21aee8['success']){if(_0x50ceb0)await Helper[_0x38b789(0x1b4)](0xbb8,this['account'],_0x38b789(0x156),this);this[_0x38b789(0x15d)]=_0x21aee8[_0x38b789(0x179)];}else await Helper[_0x38b789(0x1b4)](0xbb8,this[_0x38b789(0x196)],''+_0x21aee8[_0x38b789(0x16e)],this);}catch(_0x47e15b){throw _0x47e15b;}}async['buyChest'](){const _0x3211b9=a2_0x464dc4;try{await Helper['delay'](0x1f4,this[_0x3211b9(0x196)],_0x3211b9(0x167),this);const _0x158f89=await this[_0x3211b9(0x1b1)](_0x3211b9(0x181),_0x3211b9(0x1aa),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x158f89[_0x3211b9(0x15b)]?(await this['getUser'](),await this[_0x3211b9(0x157)]()):await Helper['delay'](0xbb8,this[_0x3211b9(0x196)],''+_0x158f89[_0x3211b9(0x16e)],this);}catch(_0x310bff){throw _0x310bff;}}async[a2_0x464dc4(0x157)](){const _0x565030=a2_0x464dc4;try{const _0x16e9d=await this[_0x565030(0x1b1)](_0x565030(0x168),'GET',this[_0x565030(0x1c9)]);_0x16e9d[_0x565030(0x15b)]?this[_0x565030(0x17d)]=_0x16e9d[_0x565030(0x179)]:await Helper[_0x565030(0x1b4)](0xbb8,this[_0x565030(0x196)],''+res[_0x565030(0x16e)],this);}catch(_0x29f845){throw _0x29f845;}}async[a2_0x464dc4(0x177)](){const _0x480bbc=a2_0x464dc4;try{await Helper[_0x480bbc(0x1b4)](0x1f4,this['account'],'Opening\x20multipe\x20chest...',this);const _0x56a382=await this[_0x480bbc(0x1b1)](_0x480bbc(0x1af),_0x480bbc(0x1aa),this['token'],{'petTypeIds':PetList[_0x480bbc(0x1bf)][_0x480bbc(0x1c4)](_0xdb5b01=>_0xdb5b01[_0x480bbc(0x194)]=='A')[_0x480bbc(0x179)],'chestIds':this[_0x480bbc(0x17d)]['map'](_0x43da91=>{return _0x43da91['id'];})});_0x56a382['success']?(await this[_0x480bbc(0x157)](),await Helper[_0x480bbc(0x1b4)](0x3e8,this[_0x480bbc(0x196)],_0x480bbc(0x16f),this)):await Helper[_0x480bbc(0x1b4)](0xbb8,this[_0x480bbc(0x196)],''+_0x56a382[_0x480bbc(0x16e)],this);}catch(_0xaac2f0){throw _0xaac2f0;}}async[a2_0x464dc4(0x1ab)](_0x12ffd3){const _0x260e3f=a2_0x464dc4;try{await Helper[_0x260e3f(0x1b4)](0x1f4,this[_0x260e3f(0x196)],_0x260e3f(0x150)+_0x12ffd3[_0x260e3f(0x18a)]+_0x260e3f(0x19b)+_0x12ffd3[_0x260e3f(0x1c7)]+_0x260e3f(0x165),this);const _0x42826b=await this[_0x260e3f(0x1b1)](_0x260e3f(0x17a),_0x260e3f(0x1aa),this[_0x260e3f(0x1c9)],{'level':_0x12ffd3[_0x260e3f(0x1c7)],'petTypeId':PetList[_0x260e3f(0x1c8)]['find'](_0x5b72ea=>_0x5b72ea[_0x260e3f(0x18a)]==_0x12ffd3[_0x260e3f(0x18a)])[_0x260e3f(0x1ad)]});_0x42826b[_0x260e3f(0x15b)]?(await this[_0x260e3f(0x1c6)](),await Helper[_0x260e3f(0x1b4)](0x3e8,this[_0x260e3f(0x196)],_0x260e3f(0x191)+_0x12ffd3[_0x260e3f(0x18a)]+_0x260e3f(0x17f)+(_0x12ffd3[_0x260e3f(0x1c7)]+0x1)+'\x20',this)):await Helper['delay'](0xbb8,this[_0x260e3f(0x196)],''+_0x42826b[_0x260e3f(0x16e)],this);}catch(_0x51c178){throw _0x51c178;}}async[a2_0x464dc4(0x1bb)](){const _0x1ccb61=a2_0x464dc4;try{await Helper[_0x1ccb61(0x1b4)](0x1f4,this[_0x1ccb61(0x196)],'Claiming\x20Gold...',this);const _0x3de99b=await this['fetch']('/api/v1/user-collection/claim-gold',_0x1ccb61(0x1aa),this[_0x1ccb61(0x1c9)]);_0x3de99b[_0x1ccb61(0x15b)]?(await this[_0x1ccb61(0x187)](),await Helper[_0x1ccb61(0x1b4)](0x3e8,this[_0x1ccb61(0x196)],_0x1ccb61(0x1a9)+_0x3de99b[_0x1ccb61(0x179)]['claimedCoin']+'\x20GOLD',this)):await Helper[_0x1ccb61(0x1b4)](0xbb8,this[_0x1ccb61(0x196)],''+_0x3de99b[_0x1ccb61(0x16e)],this);}catch(_0x249382){throw _0x249382;}}async['generateUpgradablePet'](){const _0x2894a3=a2_0x464dc4;let _0x56a16d=[];for(const _0x3a8acb of this[_0x2894a3(0x15d)]){const _0xf57202=_0x56a16d[_0x2894a3(0x1c4)](_0x37faa7=>_0x37faa7[_0x2894a3(0x18a)]===_0x3a8acb[_0x2894a3(0x18a)]&&_0x37faa7[_0x2894a3(0x1c7)]===_0x3a8acb['level']);_0xf57202?_0xf57202['count']+=0x1:_0x56a16d[_0x2894a3(0x18c)]({..._0x3a8acb,'count':0x1});}return _0x56a16d=_0x56a16d['filter'](_0x82dda9=>_0x82dda9[_0x2894a3(0x15f)]>=0x5),_0x56a16d;}}