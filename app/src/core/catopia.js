const a2_0xce22c8=a2_0x14db;(function(_0x3a842f,_0x84b317){const _0x3a4520=a2_0x14db,_0x4d2ddc=_0x3a842f();while(!![]){try{const _0x26d57a=parseInt(_0x3a4520(0x8b))/0x1*(-parseInt(_0x3a4520(0x9a))/0x2)+parseInt(_0x3a4520(0xdb))/0x3*(-parseInt(_0x3a4520(0x96))/0x4)+parseInt(_0x3a4520(0xec))/0x5+-parseInt(_0x3a4520(0xdc))/0x6+-parseInt(_0x3a4520(0xc8))/0x7+-parseInt(_0x3a4520(0xb3))/0x8*(-parseInt(_0x3a4520(0xf0))/0x9)+parseInt(_0x3a4520(0x8a))/0xa;if(_0x26d57a===_0x84b317)break;else _0x4d2ddc['push'](_0x4d2ddc['shift']());}catch(_0xe4cd4d){_0x4d2ddc['push'](_0x4d2ddc['shift']());}}}(a2_0x367f,0x82b2c));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';function a2_0x14db(_0x5ec611,_0x380d5d){const _0x367ffd=a2_0x367f();return a2_0x14db=function(_0x14db9c,_0x410ad1){_0x14db9c=_0x14db9c-0x78;let _0x1c8819=_0x367ffd[_0x14db9c];return _0x1c8819;},a2_0x14db(_0x5ec611,_0x380d5d);}function a2_0x367f(){const _0x16bd1c=['Planting\x20Gapes\x20seed\x20to\x20land...','WSS\x20Connection\x20Timeout','/api/v1/players/pet/upgrade','delay','query','Connecting\x20to\x20WSS...','/api/v1/chest/open-multiple','30MNPDti','449058XhvFJk','WSS\x20Connected...','/api/v1/players/chest?limit=3000','/claim','https://api.catopia.io','name','success','websocket','\x20Successfully\x20Upgraded\x20to\x20Level\x20','token','Buying\x20Grapes...','...','title','buyChest','toLowerCase','WSS\x20Error\x20:\x20','1651350tXsAZS','/api/v1/store/buy','reduce','\x20GOLD','9XTatuw','petCompanion','getAvailablePlant','Opening\x20multipe\x20chest...','plantString','getChest','queryObj','/api/v1/user/daily-mission/','plant','POST','accessToken','WSS\x20Connection\x20Closed\x20','WSS\x20Handshake\x20completed\x20and\x20connected.','Getting\x20Player\x20Plant...','\x20Level\x20','harvestAll','type','/api/v1/players/plant?limit=3000','chest','Claiming\x20Gold...','9490390CbTokg','23awrMmt','WSS\x20Handshake\x20Error:\x20','Successfully\x20Get\x20Misisons','getSeedList','Harvesting\x20all...','gold','openChest','Socket\x20ID:\x20','seed','petTypeId','wss://cowtopia-ws.tonfarmer.com','31468gCyymo','/api/v1/seed?limit=3000','Getting\x20player\x20pet...','Successfully\x20Buying\x201\x20Grapes','25740YGPXsp','Successfully\x20Login','plainToken','Getting\x20Seed\x20List...','push','gem','petTypeList','/api/v1/user-collection?limit=3000','pet','getMission','info','fetch','socket','error','getPet','\x20GEM\x20&\x20','buyingGrapes','Try\x20to\x20Login...','initWss','generateUpgradablePet','connect_timeout','WSS\x20Disconnected:\x20','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','disconnect','Successfully\x20Opening\x20Multiple\x20Chest','3786536qMNyqs','/api/v1/players/plant','level','mission','login','Getting\x20User\x20Land\x20Info...','count','entries','Successfully\x20get\x20player\x20pet','user','Claiming\x20Missions\x20','Error\x20:\x20','filter','message','WSS\x20Handshake\x20Timeout','Pet\x20','data','account','Upgrading\x20pet\x20','getLands','claimMission','5374341XPqiSK','Successfully\x20Get\x20Player\x20Plant','Buying\x20common\x20chest...','GET','claimedCoin','Successfully\x20planting\x20grapes\x20to\x20land\x20','find','plantSeed','getUser','refreshToken','Successfully\x20Claim\x20Misisons','land'];a2_0x367f=function(){return _0x16bd1c;};return a2_0x367f();}import a2_0x1b843e from'../utils/logger.js';import{io}from'socket.io-client';import{PetList}from'./pet_list.js';export class Catopia extends API{constructor(_0x187eae,_0x3e54a7,_0xa63706,_0x3f5f6a){const _0x672e81=a2_0x14db;super(_0x3e54a7,_0x672e81(0xe0),_0x3f5f6a),this[_0x672e81(0xc4)]=_0x187eae,this[_0x672e81(0xd8)]=_0x3e54a7,this[_0x672e81(0x7c)]=_0xa63706;}async[a2_0xce22c8(0xb7)](){const _0x21604e=a2_0xce22c8;try{await Helper[_0x21604e(0xd7)](0x1f4,this[_0x21604e(0xc4)],_0x21604e(0xab),this);const _0x31a2bb=await this[_0x21604e(0xa5)]('/api/v1/auth/telegram','POST',undefined,{'initData':this[_0x21604e(0xd8)]});await Helper['delay'](0x3e8,this[_0x21604e(0xc4)],_0x21604e(0x9b),this),this['token']=_0x31a2bb[_0x21604e(0xc3)][_0x21604e(0x80)],this[_0x21604e(0xd1)]=_0x31a2bb[_0x21604e(0xd1)];}catch(_0x13cce9){throw _0x13cce9;}}async['getUser'](_0x3e9bca=![]){const _0x841fb4=a2_0xce22c8;try{if(_0x3e9bca)await Helper[_0x841fb4(0xd7)](0x1f4,this[_0x841fb4(0xc4)],'Getting\x20User\x20Info...',this);const _0x15d763=await this['fetch'](_0x841fb4(0xa1),'GET',this['token']);if(_0x15d763[_0x841fb4(0xe2)]==!![]){if(_0x3e9bca)await Helper[_0x841fb4(0xd7)](0x3e8,this['account'],'Successfully\x20Get\x20User\x20Info',this);this[_0x841fb4(0xbc)]=_0x15d763[_0x841fb4(0xc3)];}else await Helper[_0x841fb4(0xd7)](0x1388,this[_0x841fb4(0xc4)],'Error\x20:\x20'+_0x15d763[_0x841fb4(0xc0)],this);}catch(_0xfd82f4){throw _0xfd82f4;}}async[a2_0xce22c8(0xac)](){return new Promise(async(_0x49ed72,_0x55fe64)=>{const _0x20ff86=a2_0x14db;await Helper[_0x20ff86(0xd7)](0x3e8,this[_0x20ff86(0xc4)],_0x20ff86(0xd9),this),this['socket']=io(_0x20ff86(0x95),{'auth':{'token':this[_0x20ff86(0x9c)]},'transports':[_0x20ff86(0xe3)]}),this[_0x20ff86(0xa6)]['on']('connect',async()=>{const _0x1000a9=_0x20ff86;await Helper[_0x1000a9(0xd7)](0x3e8,this[_0x1000a9(0xc4)],_0x1000a9(0xdd),this),a2_0x1b843e['info'](_0x1000a9(0x82)),a2_0x1b843e[_0x1000a9(0xa4)](_0x1000a9(0x92)+this[_0x1000a9(0xa6)]['id']),_0x49ed72();}),this[_0x20ff86(0xa6)]['on']('connect_error',async _0x4c4eac=>{const _0x6953bc=_0x20ff86;await Helper[_0x6953bc(0xd7)](0x3e8,this[_0x6953bc(0xc4)],'WSS\x20Connection\x20Error:\x20'+_0x4c4eac[_0x6953bc(0xc0)],this),a2_0x1b843e[_0x6953bc(0xa7)](_0x6953bc(0x8c)+_0x4c4eac[_0x6953bc(0xc0)]),_0x55fe64(_0x4c4eac);}),this['socket']['on'](_0x20ff86(0xae),async()=>{const _0x459993=_0x20ff86;await Helper[_0x459993(0xd7)](0x3e8,this['account'],_0x459993(0xd5),this),a2_0x1b843e[_0x459993(0xa7)]('WSS\x20Handshake\x20Timeout'),_0x55fe64(new Error(_0x459993(0xc1)));}),this[_0x20ff86(0xa6)]['on'](_0x20ff86(0xa7),async _0x41ecb5=>{const _0x4eca34=_0x20ff86;await Helper[_0x4eca34(0xd7)](0x3e8,this[_0x4eca34(0xc4)],_0x4eca34(0xeb)+_0x41ecb5[_0x4eca34(0xc0)],this),a2_0x1b843e[_0x4eca34(0xa7)](_0x4eca34(0xeb)+_0x41ecb5['message']),_0x55fe64(_0x41ecb5);}),this['socket']['on'](_0x20ff86(0xb1),async _0x20e737=>{const _0x188b70=_0x20ff86;await Helper[_0x188b70(0xd7)](0x3e8,this[_0x188b70(0xc4)],_0x188b70(0x81)+_0x20e737+'...',this),a2_0x1b843e[_0x188b70(0xa4)](_0x188b70(0xaf)+_0x20e737);});});}async['getMission'](_0x18c0aa=![]){const _0x49dc0d=a2_0xce22c8;try{if(_0x18c0aa)await Helper['delay'](0x1f4,this[_0x49dc0d(0xc4)],'Getting\x20Missions...',this);this['missions']=[];const _0x472267=await this[_0x49dc0d(0xa5)]('/api/v1/user/daily-mission?limit=3000',_0x49dc0d(0xcb),this['token']);if(_0x472267[_0x49dc0d(0xe2)]){if(_0x18c0aa)await Helper['delay'](0x3e8,this[_0x49dc0d(0xc4)],_0x49dc0d(0x8d),this);this['missions']=_0x472267['data'];}else await Helper[_0x49dc0d(0xd7)](0x1388,this[_0x49dc0d(0xc4)],'Error\x20:\x20'+_0x472267['message'],this);}catch(_0x883090){throw _0x883090;}}async[a2_0xce22c8(0xc7)](_0x5f40ae){const _0x45818e=a2_0xce22c8;try{await Helper[_0x45818e(0xd7)](0x1f4,this[_0x45818e(0xc4)],_0x45818e(0xbd)+_0x5f40ae[_0x45818e(0xb6)][_0x45818e(0xe8)]+_0x45818e(0xe7),this);const _0x48646d=await this[_0x45818e(0xa5)](_0x45818e(0x7d)+_0x5f40ae['id']+_0x45818e(0xdf),_0x45818e(0x7f),this[_0x45818e(0xe5)]);_0x48646d[_0x45818e(0xe2)]?(await Helper[_0x45818e(0xd7)](0x3e8,this[_0x45818e(0xc4)],_0x45818e(0xd2),this),await this[_0x45818e(0xd0)](),await this[_0x45818e(0xa3)]()):await Helper['delay'](0x1388,this[_0x45818e(0xc4)],_0x45818e(0xbe)+_0x48646d['message'],this);}catch(_0x2dbf40){throw _0x2dbf40;}}async[a2_0xce22c8(0x8e)](){const _0x50e72a=a2_0xce22c8;try{await Helper[_0x50e72a(0xd7)](0x1f4,this[_0x50e72a(0xc4)],_0x50e72a(0x9d),this);const _0x2fc9f9=await this[_0x50e72a(0xa5)](_0x50e72a(0x97),_0x50e72a(0xcb),this[_0x50e72a(0xe5)]);_0x2fc9f9[_0x50e72a(0xe2)]?(await Helper[_0x50e72a(0xd7)](0x3e8,this[_0x50e72a(0xc4)],'Successfully\x20Get\x20Seed\x20List',this),this[_0x50e72a(0x93)]=_0x2fc9f9[_0x50e72a(0xc3)]):await Helper[_0x50e72a(0xd7)](0x1388,this[_0x50e72a(0xc4)],_0x50e72a(0xbe)+_0x2fc9f9['message'],this);}catch(_0x6e083a){throw _0x6e083a;}}async['getAvailablePlant'](_0x32f7e9=![]){const _0x5d05bd=a2_0xce22c8;try{if(_0x32f7e9)await Helper[_0x5d05bd(0xd7)](0x1f4,this['account'],_0x5d05bd(0x83),this);const _0x27f38b=await this['fetch'](_0x5d05bd(0x87),_0x5d05bd(0xcb),this[_0x5d05bd(0xe5)]);if(_0x27f38b[_0x5d05bd(0xe2)]){if(_0x32f7e9)await Helper[_0x5d05bd(0xd7)](0x3e8,this[_0x5d05bd(0xc4)],_0x5d05bd(0xc9),this);this[_0x5d05bd(0x7e)]=_0x27f38b['data'];const _0x2b2f57=this['plant'][_0x5d05bd(0xee)]((_0x27c73e,_0x2311e1)=>{const _0x3876ee=_0x5d05bd,_0x1f8361=_0x2311e1['name'][_0x3876ee(0xea)]();return _0x27c73e[_0x1f8361]=(_0x27c73e[_0x1f8361]||0x0)+0x1,_0x27c73e;},{});this[_0x5d05bd(0x7a)]=Object[_0x5d05bd(0xba)](_0x2b2f57)['map'](([_0x1e3c16,_0x4a4e6])=>_0x4a4e6+'\x20'+_0x1e3c16+(_0x4a4e6>0x1?'s':''))['join']('\x20');}else await Helper[_0x5d05bd(0xd7)](0x1388,this[_0x5d05bd(0xc4)],_0x5d05bd(0xbe)+_0x27f38b[_0x5d05bd(0xc0)],this);}catch(_0x3c5b82){throw _0x3c5b82;}}async[a2_0xce22c8(0xaa)](){const _0xe63bc2=a2_0xce22c8;try{await Helper[_0xe63bc2(0xd7)](0x1f4,this[_0xe63bc2(0xc4)],_0xe63bc2(0xe6),this);const _0x42d5c9=await this[_0xe63bc2(0xa5)]('/api/v1/store/buy',_0xe63bc2(0x7f),this[_0xe63bc2(0xe5)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0xe63bc2(0xd0)](),_0x42d5c9['success']?(await Helper[_0xe63bc2(0xd7)](0x3e8,this[_0xe63bc2(0xc4)],_0xe63bc2(0x99),this),await this[_0xe63bc2(0x78)]()):(await Helper[_0xe63bc2(0xd7)](0x1388,this[_0xe63bc2(0xc4)],''+_0x42d5c9[_0xe63bc2(0xc0)],this),await this[_0xe63bc2(0x85)]());}catch(_0x5bf7eb){throw _0x5bf7eb;}}async[a2_0xce22c8(0xc6)](_0x577d9c=![]){const _0x24f8a1=a2_0xce22c8;try{if(_0x577d9c)await Helper[_0x24f8a1(0xd7)](0x1f4,this['account'],_0x24f8a1(0xb8),this);const _0x2f3973=await this[_0x24f8a1(0xa5)]('/api/v1/players/land?limit=3000',_0x24f8a1(0xcb),this[_0x24f8a1(0xe5)]);if(_0x2f3973[_0x24f8a1(0xe2)]){if(_0x577d9c)await Helper[_0x24f8a1(0xd7)](0x3e8,this['account'],'Successfully\x20Get\x20User\x20Land\x20Info',this);this[_0x24f8a1(0xd3)]=_0x2f3973[_0x24f8a1(0xc3)];}else await Helper[_0x24f8a1(0xd7)](0x1388,this[_0x24f8a1(0xc4)],_0x24f8a1(0xbe)+_0x2f3973['message'],this);}catch(_0x56d69f){throw _0x56d69f;}}async[a2_0xce22c8(0xcf)](_0x22340c){const _0x3b2a81=a2_0xce22c8;try{await Helper[_0x3b2a81(0xd7)](0x1f4,this[_0x3b2a81(0xc4)],_0x3b2a81(0xd4),this);const _0x355cc8=await this['fetch'](_0x3b2a81(0xb4),'POSt',this[_0x3b2a81(0xe5)],{'plantId':this['plant'][0x0]['id'],'landId':_0x22340c});_0x355cc8[_0x3b2a81(0xe2)]?(await Helper[_0x3b2a81(0xd7)](0x3e8,this[_0x3b2a81(0xc4)],_0x3b2a81(0xcd)+_0x22340c,this),await this[_0x3b2a81(0xc6)](),await this[_0x3b2a81(0x78)]()):await Helper[_0x3b2a81(0xd7)](0x1388,this['account'],_0x3b2a81(0xbe)+_0x355cc8[_0x3b2a81(0xc0)],this);}catch(_0x4bbb25){throw _0x4bbb25;}}async[a2_0xce22c8(0x85)](){const _0x10d419=a2_0xce22c8;try{await Helper[_0x10d419(0xd7)](0x1f4,this['account'],_0x10d419(0x8f),this);const _0x2ccf94=await this['fetch']('/api/v1/players/plant/harvestAll','POSt',this['token']);_0x2ccf94[_0x10d419(0xe2)]?(await Helper[_0x10d419(0xd7)](0x7d0,this['account'],_0x10d419(0xb0)+_0x2ccf94['data'][_0x10d419(0x9f)]+_0x10d419(0xa9)+_0x2ccf94[_0x10d419(0xc3)][_0x10d419(0x90)]+_0x10d419(0xef),this),await this[_0x10d419(0xd0)](),await this['getLands'](),await this[_0x10d419(0x78)]()):await Helper[_0x10d419(0xd7)](0x7d0,this[_0x10d419(0xc4)],''+_0x2ccf94['message'],this);}catch(_0x5a2fbf){throw _0x5a2fbf;}}async[a2_0xce22c8(0xa8)](_0x29eee9){const _0x568f47=a2_0xce22c8;try{if(_0x29eee9)await Helper['delay'](0x1f4,this[_0x568f47(0xc4)],_0x568f47(0x98),this);const _0x4290e8=await this['fetch']('/api/v1/players/pet?limit=3000',_0x568f47(0xcb),this['token']);if(_0x4290e8[_0x568f47(0xe2)]){if(_0x29eee9)await Helper['delay'](0xbb8,this[_0x568f47(0xc4)],_0x568f47(0xbb),this);this[_0x568f47(0xa2)]=_0x4290e8[_0x568f47(0xc3)];}else await Helper[_0x568f47(0xd7)](0xbb8,this[_0x568f47(0xc4)],''+_0x4290e8[_0x568f47(0xc0)],this);}catch(_0x17e2dd){throw _0x17e2dd;}}async[a2_0xce22c8(0xe9)](){const _0x105a85=a2_0xce22c8;try{await Helper[_0x105a85(0xd7)](0x1f4,this[_0x105a85(0xc4)],_0x105a85(0xca),this);const _0x28ae26=await this['fetch'](_0x105a85(0xed),_0x105a85(0x7f),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x28ae26[_0x105a85(0xe2)]?(await this[_0x105a85(0xd0)](),await this[_0x105a85(0x7b)]()):await Helper['delay'](0xbb8,this[_0x105a85(0xc4)],''+_0x28ae26[_0x105a85(0xc0)],this);}catch(_0x739d08){throw _0x739d08;}}async[a2_0xce22c8(0x7b)](){const _0xc7c122=a2_0xce22c8;try{const _0x14a682=await this[_0xc7c122(0xa5)](_0xc7c122(0xde),_0xc7c122(0xcb),this['token']);_0x14a682['success']?this[_0xc7c122(0x88)]=_0x14a682[_0xc7c122(0xc3)]:await Helper[_0xc7c122(0xd7)](0xbb8,this[_0xc7c122(0xc4)],''+res['message'],this);}catch(_0x50f923){throw _0x50f923;}}async[a2_0xce22c8(0x91)](){const _0xbc7ac4=a2_0xce22c8;try{await Helper[_0xbc7ac4(0xd7)](0x1f4,this['account'],_0xbc7ac4(0x79),this);const _0xbb2c43=await this[_0xbc7ac4(0xa5)](_0xbc7ac4(0xda),'POST',this['token'],{'petTypeIds':PetList[_0xbc7ac4(0xf1)][_0xbc7ac4(0xce)](_0x2d9a7f=>_0x2d9a7f[_0xbc7ac4(0x86)]=='A')[_0xbc7ac4(0xc3)],'chestIds':this[_0xbc7ac4(0x88)]['map'](_0x1001de=>{return _0x1001de['id'];})});_0xbb2c43[_0xbc7ac4(0xe2)]?(await this[_0xbc7ac4(0x7b)](),await Helper[_0xbc7ac4(0xd7)](0x3e8,this['account'],_0xbc7ac4(0xb2),this)):await Helper['delay'](0xbb8,this[_0xbc7ac4(0xc4)],''+_0xbb2c43[_0xbc7ac4(0xc0)],this);}catch(_0x3debdd){throw _0x3debdd;}}async['upgradePet'](_0x1fad73){const _0x1183f5=a2_0xce22c8;try{await Helper[_0x1183f5(0xd7)](0x1f4,this[_0x1183f5(0xc4)],_0x1183f5(0xc5)+_0x1fad73[_0x1183f5(0xe1)]+_0x1183f5(0x84)+_0x1fad73[_0x1183f5(0xb5)]+_0x1183f5(0xe7),this);const _0x2e4685=await this[_0x1183f5(0xa5)](_0x1183f5(0xd6),_0x1183f5(0x7f),this[_0x1183f5(0xe5)],{'level':_0x1fad73[_0x1183f5(0xb5)],'petTypeId':PetList[_0x1183f5(0xa0)][_0x1183f5(0xce)](_0x33b0a8=>_0x33b0a8['name']==_0x1fad73[_0x1183f5(0xe1)])[_0x1183f5(0x94)]});_0x2e4685[_0x1183f5(0xe2)]?(await this[_0x1183f5(0xa8)](),await Helper['delay'](0x3e8,this['account'],_0x1183f5(0xc2)+_0x1fad73['name']+_0x1183f5(0xe4)+(_0x1fad73[_0x1183f5(0xb5)]+0x1)+'\x20',this)):await Helper['delay'](0xbb8,this[_0x1183f5(0xc4)],''+_0x2e4685[_0x1183f5(0xc0)],this);}catch(_0x220330){throw _0x220330;}}async['claimGold'](){const _0x53eb60=a2_0xce22c8;try{await Helper[_0x53eb60(0xd7)](0x1f4,this[_0x53eb60(0xc4)],_0x53eb60(0x89),this);const _0x69103c=await this[_0x53eb60(0xa5)]('/api/v1/user-collection/claim-gold','POST',this[_0x53eb60(0xe5)]);_0x69103c[_0x53eb60(0xe2)]?(await this[_0x53eb60(0xd0)](),await Helper[_0x53eb60(0xd7)](0x3e8,this[_0x53eb60(0xc4)],'Successfully\x20Claim\x20Gold,\x20got\x20'+_0x69103c['data'][_0x53eb60(0xcc)]+'\x20GOLD',this)):await Helper[_0x53eb60(0xd7)](0xbb8,this['account'],''+_0x69103c[_0x53eb60(0xc0)],this);}catch(_0x2317bf){throw _0x2317bf;}}async[a2_0xce22c8(0xad)](){const _0x273455=a2_0xce22c8;let _0x1fed29=[];for(const _0x2226c4 of this[_0x273455(0xa2)]){const _0x305f3b=_0x1fed29[_0x273455(0xce)](_0x5644d3=>_0x5644d3[_0x273455(0xe1)]===_0x2226c4[_0x273455(0xe1)]&&_0x5644d3[_0x273455(0xb5)]===_0x2226c4['level']);_0x305f3b?_0x305f3b[_0x273455(0xb9)]+=0x1:_0x1fed29[_0x273455(0x9e)]({..._0x2226c4,'count':0x1});}return _0x1fed29=_0x1fed29[_0x273455(0xbf)](_0x83deeb=>_0x83deeb['count']>=0x5),_0x1fed29;}}