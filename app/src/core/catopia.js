const a2_0x4d4c60=a2_0x2d32;function a2_0x2d32(_0x353d17,_0x573fa9){const _0xb3b6a3=a2_0xb3b6();return a2_0x2d32=function(_0x2d328c,_0x2b922a){_0x2d328c=_0x2d328c-0x135;let _0x5719f9=_0xb3b6a3[_0x2d328c];return _0x5719f9;},a2_0x2d32(_0x353d17,_0x573fa9);}(function(_0x31cc1f,_0x375e7e){const _0x7dd9a3=a2_0x2d32,_0x8036af=_0x31cc1f();while(!![]){try{const _0x57ef24=parseInt(_0x7dd9a3(0x141))/0x1*(-parseInt(_0x7dd9a3(0x199))/0x2)+parseInt(_0x7dd9a3(0x170))/0x3+parseInt(_0x7dd9a3(0x13a))/0x4*(-parseInt(_0x7dd9a3(0x140))/0x5)+-parseInt(_0x7dd9a3(0x17c))/0x6+parseInt(_0x7dd9a3(0x14d))/0x7+-parseInt(_0x7dd9a3(0x13f))/0x8*(parseInt(_0x7dd9a3(0x180))/0x9)+parseInt(_0x7dd9a3(0x1a5))/0xa;if(_0x57ef24===_0x375e7e)break;else _0x8036af['push'](_0x8036af['shift']());}catch(_0x3d9894){_0x8036af['push'](_0x8036af['shift']());}}}(a2_0xb3b6,0x3bc34));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x98c4aa from'../utils/logger.js';function a2_0xb3b6(){const _0x535a67=['WSS\x20Handshake\x20Timeout','generateUpgradablePet','489846YtWQke','Opening\x20multipe\x20chest...','/api/v1/players/chest?limit=3000','entries','GET','/api/v1/user/daily-mission?limit=3000','wss://cowtopia-ws.tonfarmer.com','/api/v1/store/buy','WSS\x20Connection\x20Closed\x20','Successfully\x20Get\x20User\x20Land\x20Info','data','petTypeList','initWss','/api/v1/players/plant?limit=3000','getPet','WSS\x20Handshake\x20completed\x20and\x20connected.','petCompanion','Successfully\x20Get\x20Seed\x20List','/claim','COMPANION','pet','gem','Getting\x20User\x20Info...','Pet\x20','plant','getSeedList','WSS\x20Error\x20:\x20','query','\x20GOLD','connect_timeout','WSS\x20Connection\x20Timeout','websocket','Successfully\x20Get\x20Misisons','success','fetch','793995mJxflF','filter','missions','0\x20Grapes','queryObj','harvestAll','plantString','\x20Level\x20','openChest','Successfully\x20Get\x20Player\x20Plant','/api/v1/players/pet/fast-upgrade','/api/v1/user-collection?limit=3000','818214xMVoKO','getMission','claimedCoin','WSS\x20Connection\x20Error:\x20','9YpAmyO','petTypeId','level','Buying\x20Grapes...','buyingGrapes','count','map','user','token','POST','getLands','...','reduce','typeId','getUser','Successfully\x20Buying\x201\x20Grapes','Getting\x20player\x20pet...','WSS\x20Disconnected:\x20','Successfully\x20Get\x20User\x20Info','claimMission','Planting\x20Gapes\x20seed\x20to\x20land...','land','accessToken','chest','info','2FLnhfj','join','title','Getting\x20Player\x20Plant...','socket','error','push','login','Successfully\x20Claim\x20Misisons','\x20Grapes','POSt','/api/v1/players/land?limit=3000','3344420gnjurl','Socket\x20ID:\x20','Getting\x20User\x20Land\x20Info...','/api/v1/user-collection/claim-gold','type','getAvailablePlant','buyChest','Claiming\x20Missions\x20','Getting\x20Seed\x20List...','Error\x20:\x20','Successfully\x20Opening\x20Multiple\x20Chest','/api/v1/user/daily-mission/','plantSeed','refreshToken','3064SckcMK','Claiming\x20Gold...','connect','account','find','673840OuIJUh','995LPplOl','51264GSBkNZ','disconnect','/api/v1/chest/open-multiple','message','seed','/api/v1/players/pet?limit=3000','Successfully\x20get\x20player\x20pet','WSS\x20Connected...','delay','getChest'];a2_0xb3b6=function(){return _0x535a67;};return a2_0xb3b6();}import{io}from'socket.io-client';import{PetList}from'./pet_list.js';import{Config}from'../../config/config.js';export class Catopia extends API{constructor(_0x12b88c,_0x53477b,_0x107bc5,_0xa5b999){const _0x59ed5e=a2_0x2d32;super(_0x53477b,'https://api.catopia.io',_0xa5b999),this[_0x59ed5e(0x13d)]=_0x12b88c,this[_0x59ed5e(0x168)]=_0x53477b,this[_0x59ed5e(0x174)]=_0x107bc5;}async[a2_0x4d4c60(0x1a0)](){const _0x4febee=a2_0x4d4c60;try{await Helper['delay'](0x1f4,this[_0x4febee(0x13d)],'Try\x20to\x20Login...',this);const _0x3795ac=await this[_0x4febee(0x16f)]('/api/v1/auth/telegram',_0x4febee(0x189),undefined,{'initData':this[_0x4febee(0x168)]});await Helper['delay'](0x3e8,this[_0x4febee(0x13d)],'Successfully\x20Login',this),this[_0x4febee(0x188)]=_0x3795ac[_0x4febee(0x157)][_0x4febee(0x196)],this[_0x4febee(0x139)]=_0x3795ac[_0x4febee(0x139)];}catch(_0x13e3e1){throw _0x13e3e1;}}async[a2_0x4d4c60(0x18e)](_0x567f64=![]){const _0x25fa83=a2_0x4d4c60;try{if(_0x567f64)await Helper[_0x25fa83(0x149)](0x1f4,this[_0x25fa83(0x13d)],_0x25fa83(0x163),this);const _0xc4433=await this[_0x25fa83(0x16f)](_0x25fa83(0x17b),_0x25fa83(0x151),this[_0x25fa83(0x188)]);if(_0xc4433[_0x25fa83(0x16e)]==!![]){if(_0x567f64)await Helper[_0x25fa83(0x149)](0x3e8,this[_0x25fa83(0x13d)],_0x25fa83(0x192),this);this[_0x25fa83(0x187)]=_0xc4433['data'];}else await Helper[_0x25fa83(0x149)](0x1388,this[_0x25fa83(0x13d)],'Error\x20:\x20'+_0xc4433['message'],this);}catch(_0x8626e5){throw _0x8626e5;}}async[a2_0x4d4c60(0x159)](){return new Promise(async(_0x4f9fb1,_0x5e008f)=>{const _0x2c539a=a2_0x2d32;await Helper[_0x2c539a(0x149)](0x3e8,this[_0x2c539a(0x13d)],'Connecting\x20to\x20WSS...',this),this['socket']=io(_0x2c539a(0x153),{'auth':{'token':this['plainToken']},'transports':[_0x2c539a(0x16c)]}),this[_0x2c539a(0x19d)]['on'](_0x2c539a(0x13c),async()=>{const _0x2bbfdc=_0x2c539a;await Helper[_0x2bbfdc(0x149)](0x3e8,this[_0x2bbfdc(0x13d)],_0x2bbfdc(0x148),this),a2_0x98c4aa[_0x2bbfdc(0x198)](_0x2bbfdc(0x15c)),a2_0x98c4aa[_0x2bbfdc(0x198)](_0x2bbfdc(0x1a6)+this[_0x2bbfdc(0x19d)]['id']),_0x4f9fb1();}),this[_0x2c539a(0x19d)]['on']('connect_error',async _0x499240=>{const _0x213e6b=_0x2c539a;await Helper['delay'](0x3e8,this[_0x213e6b(0x13d)],_0x213e6b(0x17f)+_0x499240[_0x213e6b(0x144)],this),a2_0x98c4aa['error']('WSS\x20Handshake\x20Error:\x20'+_0x499240[_0x213e6b(0x144)]),_0x5e008f(_0x499240);}),this[_0x2c539a(0x19d)]['on'](_0x2c539a(0x16a),async()=>{const _0x5c377e=_0x2c539a;await Helper['delay'](0x3e8,this[_0x5c377e(0x13d)],_0x5c377e(0x16b),this),a2_0x98c4aa[_0x5c377e(0x19e)](_0x5c377e(0x14b)),_0x5e008f(new Error(_0x5c377e(0x14b)));}),this[_0x2c539a(0x19d)]['on'](_0x2c539a(0x19e),async _0xcba31b=>{const _0x293a2f=_0x2c539a;await Helper[_0x293a2f(0x149)](0x3e8,this[_0x293a2f(0x13d)],_0x293a2f(0x167)+_0xcba31b[_0x293a2f(0x144)],this),a2_0x98c4aa[_0x293a2f(0x19e)](_0x293a2f(0x167)+_0xcba31b['message']),_0x5e008f(_0xcba31b);}),this[_0x2c539a(0x19d)]['on'](_0x2c539a(0x142),async _0x74f201=>{const _0x52fb93=_0x2c539a;await Helper[_0x52fb93(0x149)](0x3e8,this['account'],_0x52fb93(0x155)+_0x74f201+_0x52fb93(0x18b),this),a2_0x98c4aa[_0x52fb93(0x198)](_0x52fb93(0x191)+_0x74f201);});});}async[a2_0x4d4c60(0x17d)](_0x33a2f1=![]){const _0x2a5961=a2_0x4d4c60;try{if(_0x33a2f1)await Helper[_0x2a5961(0x149)](0x1f4,this[_0x2a5961(0x13d)],'Getting\x20Missions...',this);this[_0x2a5961(0x172)]=[];const _0x3b0270=await this[_0x2a5961(0x16f)](_0x2a5961(0x152),'GET',this[_0x2a5961(0x188)]);if(_0x3b0270['success']){if(_0x33a2f1)await Helper[_0x2a5961(0x149)](0x3e8,this[_0x2a5961(0x13d)],_0x2a5961(0x16d),this);this['missions']=_0x3b0270[_0x2a5961(0x157)];}else await Helper[_0x2a5961(0x149)](0x1388,this['account'],_0x2a5961(0x135)+_0x3b0270[_0x2a5961(0x144)],this);}catch(_0x5ab964){throw _0x5ab964;}}async[a2_0x4d4c60(0x193)](_0x35a701){const _0x3d0617=a2_0x4d4c60;try{await Helper[_0x3d0617(0x149)](0x1f4,this['account'],_0x3d0617(0x1ac)+_0x35a701['mission'][_0x3d0617(0x19b)]+_0x3d0617(0x18b),this);const _0x231851=await this[_0x3d0617(0x16f)](_0x3d0617(0x137)+_0x35a701['id']+_0x3d0617(0x15f),_0x3d0617(0x189),this[_0x3d0617(0x188)]);_0x231851[_0x3d0617(0x16e)]?(await Helper['delay'](0x3e8,this['account'],_0x3d0617(0x1a1),this),await this[_0x3d0617(0x18e)](),await this[_0x3d0617(0x17d)]()):await Helper[_0x3d0617(0x149)](0x1388,this[_0x3d0617(0x13d)],_0x3d0617(0x135)+_0x231851[_0x3d0617(0x144)],this);}catch(_0x374105){throw _0x374105;}}async[a2_0x4d4c60(0x166)](){const _0x56d1d2=a2_0x4d4c60;try{await Helper[_0x56d1d2(0x149)](0x1f4,this[_0x56d1d2(0x13d)],_0x56d1d2(0x1ad),this);const _0x5dc236=await this[_0x56d1d2(0x16f)]('/api/v1/seed?limit=3000','GET',this[_0x56d1d2(0x188)]);_0x5dc236['success']?(await Helper[_0x56d1d2(0x149)](0x3e8,this[_0x56d1d2(0x13d)],_0x56d1d2(0x15e),this),this[_0x56d1d2(0x145)]=_0x5dc236['data']):await Helper['delay'](0x1388,this[_0x56d1d2(0x13d)],_0x56d1d2(0x135)+_0x5dc236[_0x56d1d2(0x144)],this);}catch(_0x5e943d){throw _0x5e943d;}}async[a2_0x4d4c60(0x1aa)](_0x1e5239=![]){const _0x101999=a2_0x4d4c60;try{if(_0x1e5239)await Helper['delay'](0x1f4,this['account'],_0x101999(0x19c),this);const _0x294dca=await this[_0x101999(0x16f)](_0x101999(0x15a),_0x101999(0x151),this[_0x101999(0x188)]);if(_0x294dca['success']){if(_0x1e5239)await Helper[_0x101999(0x149)](0x3e8,this[_0x101999(0x13d)],_0x101999(0x179),this);this[_0x101999(0x165)]=_0x294dca['data'];const _0x2c8c63=this[_0x101999(0x165)][_0x101999(0x18c)]((_0x3a261c,_0x145ab6)=>{const _0x5aecd8=_0x145ab6['name'];return _0x3a261c[_0x5aecd8]=(_0x3a261c[_0x5aecd8]||0x0)+0x1,_0x3a261c;},{});this['plantString']=Object[_0x101999(0x150)](_0x2c8c63)[_0x101999(0x186)](([_0x3afb05,_0x554322])=>_0x554322+_0x101999(0x1a2))[_0x101999(0x19a)]('\x20'),(this[_0x101999(0x176)]==''||this[_0x101999(0x176)]==undefined)&&(this['plantString']=_0x101999(0x173));}else await Helper[_0x101999(0x149)](0x1388,this[_0x101999(0x13d)],_0x101999(0x135)+_0x294dca[_0x101999(0x144)],this);}catch(_0x328822){throw _0x328822;}}async[a2_0x4d4c60(0x184)](){const _0x59b40a=a2_0x4d4c60;try{await Helper[_0x59b40a(0x149)](0x1f4,this['account'],_0x59b40a(0x183),this);const _0x1d0a1a=await this[_0x59b40a(0x16f)](_0x59b40a(0x154),_0x59b40a(0x189),this[_0x59b40a(0x188)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this[_0x59b40a(0x18e)](),_0x1d0a1a['success']?(await Helper[_0x59b40a(0x149)](0x3e8,this[_0x59b40a(0x13d)],_0x59b40a(0x18f),this),await this[_0x59b40a(0x1aa)]()):(await Helper[_0x59b40a(0x149)](0x1388,this[_0x59b40a(0x13d)],''+_0x1d0a1a[_0x59b40a(0x144)],this),await this[_0x59b40a(0x175)]());}catch(_0x32ad52){throw _0x32ad52;}}async['getLands'](_0x5be191=![]){const _0x5f1b39=a2_0x4d4c60;try{if(_0x5be191)await Helper[_0x5f1b39(0x149)](0x1f4,this[_0x5f1b39(0x13d)],_0x5f1b39(0x1a7),this);const _0x13f30d=await this['fetch'](_0x5f1b39(0x1a4),'GET',this[_0x5f1b39(0x188)]);if(_0x13f30d[_0x5f1b39(0x16e)]){if(_0x5be191)await Helper[_0x5f1b39(0x149)](0x3e8,this[_0x5f1b39(0x13d)],_0x5f1b39(0x156),this);this[_0x5f1b39(0x195)]=_0x13f30d[_0x5f1b39(0x157)];}else await Helper['delay'](0x1388,this[_0x5f1b39(0x13d)],'Error\x20:\x20'+_0x13f30d['message'],this);}catch(_0x53cbfe){throw _0x53cbfe;}}async[a2_0x4d4c60(0x138)](_0x425649){const _0x33cdfc=a2_0x4d4c60;try{await Helper[_0x33cdfc(0x149)](0x1f4,this[_0x33cdfc(0x13d)],_0x33cdfc(0x194),this);const _0x1f282d=await this[_0x33cdfc(0x16f)]('/api/v1/players/plant','POSt',this[_0x33cdfc(0x188)],{'plantId':this[_0x33cdfc(0x165)][0x0]['id'],'landId':_0x425649});_0x1f282d[_0x33cdfc(0x16e)]?(await Helper[_0x33cdfc(0x149)](0x3e8,this['account'],'Successfully\x20planting\x20grapes\x20to\x20land\x20'+_0x425649,this),await this[_0x33cdfc(0x18a)](),await this[_0x33cdfc(0x1aa)]()):await Helper['delay'](0x1388,this[_0x33cdfc(0x13d)],_0x33cdfc(0x135)+_0x1f282d[_0x33cdfc(0x144)],this);}catch(_0x5ac7b2){throw _0x5ac7b2;}}async['harvestAll'](){const _0x94a779=a2_0x4d4c60;try{await Helper['delay'](0x1f4,this[_0x94a779(0x13d)],'Harvesting\x20all...',this);const _0x3c8fbc=await this[_0x94a779(0x16f)]('/api/v1/players/plant/harvestAll',_0x94a779(0x1a3),this[_0x94a779(0x188)]);_0x3c8fbc['success']?(await Helper[_0x94a779(0x149)](0x7d0,this[_0x94a779(0x13d)],'Successfully\x20Harvest\x20All\x20Plant\x20Got\x20'+_0x3c8fbc['data'][_0x94a779(0x162)]+'\x20GEM\x20&\x20'+_0x3c8fbc['data']['gold']+_0x94a779(0x169),this),await this[_0x94a779(0x18e)](),await this[_0x94a779(0x18a)](),await this[_0x94a779(0x1aa)]()):await Helper[_0x94a779(0x149)](0x7d0,this[_0x94a779(0x13d)],''+_0x3c8fbc[_0x94a779(0x144)],this);}catch(_0x5e6b1a){throw _0x5e6b1a;}}async['getPet'](_0x122158){const _0x22b09f=a2_0x4d4c60;try{if(_0x122158)await Helper[_0x22b09f(0x149)](0x1f4,this[_0x22b09f(0x13d)],_0x22b09f(0x190),this);const _0x1bddee=await this['fetch'](_0x22b09f(0x146),_0x22b09f(0x151),this[_0x22b09f(0x188)]);if(_0x1bddee[_0x22b09f(0x16e)]){if(_0x122158)await Helper[_0x22b09f(0x149)](0xbb8,this[_0x22b09f(0x13d)],_0x22b09f(0x147),this);this[_0x22b09f(0x161)]=_0x1bddee['data'];}else await Helper['delay'](0xbb8,this[_0x22b09f(0x13d)],''+_0x1bddee[_0x22b09f(0x144)],this);}catch(_0x11a4fa){throw _0x11a4fa;}}async[a2_0x4d4c60(0x1ab)](){const _0x5500bc=a2_0x4d4c60;try{await Helper[_0x5500bc(0x149)](0x1f4,this['account'],'Buying\x20common\x20chest...',this);const _0x2bd627=await this['fetch'](_0x5500bc(0x154),'POST',this[_0x5500bc(0x188)],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x2bd627[_0x5500bc(0x16e)]?(await this[_0x5500bc(0x18e)](),await this[_0x5500bc(0x14a)]()):await Helper[_0x5500bc(0x149)](0xbb8,this[_0x5500bc(0x13d)],''+_0x2bd627[_0x5500bc(0x144)],this);}catch(_0x4c9f64){throw _0x4c9f64;}}async[a2_0x4d4c60(0x14a)](){const _0x54f5ae=a2_0x4d4c60;try{const _0x1dc3f5=await this[_0x54f5ae(0x16f)](_0x54f5ae(0x14f),'GET',this[_0x54f5ae(0x188)]);_0x1dc3f5[_0x54f5ae(0x16e)]?this[_0x54f5ae(0x197)]=_0x1dc3f5[_0x54f5ae(0x157)]:await Helper[_0x54f5ae(0x149)](0xbb8,this[_0x54f5ae(0x13d)],''+res[_0x54f5ae(0x144)],this);}catch(_0x274ba7){throw _0x274ba7;}}async[a2_0x4d4c60(0x178)](){const _0x2d17c5=a2_0x4d4c60;try{const _0x2539e8=Config[_0x2d17c5(0x160)]??'A';await Helper['delay'](0x1f4,this[_0x2d17c5(0x13d)],_0x2d17c5(0x14e),this);const _0x22f825=await this[_0x2d17c5(0x16f)](_0x2d17c5(0x143),'POST',this[_0x2d17c5(0x188)],{'petTypeIds':PetList[_0x2d17c5(0x15d)][_0x2d17c5(0x13e)](_0x3f2f3b=>_0x3f2f3b[_0x2d17c5(0x1a9)]==_0x2539e8)[_0x2d17c5(0x157)],'chestIds':this['chest'][_0x2d17c5(0x186)](_0x3ad7e9=>{return _0x3ad7e9['id'];})});_0x22f825['success']?(await this['getChest'](),await Helper['delay'](0x3e8,this[_0x2d17c5(0x13d)],_0x2d17c5(0x136),this)):await Helper['delay'](0xbb8,this[_0x2d17c5(0x13d)],''+_0x22f825[_0x2d17c5(0x144)],this);}catch(_0x15e077){throw _0x15e077;}}async['upgradePet'](_0x558936){const _0x118f16=a2_0x4d4c60;try{await Helper['delay'](0x1f4,this[_0x118f16(0x13d)],'Upgrading\x20pet\x20'+_0x558936['typeId']+_0x118f16(0x177)+_0x558936[_0x118f16(0x182)]+_0x118f16(0x18b),this);const _0x3d4a8f=PetList[_0x118f16(0x158)][_0x118f16(0x13e)](_0xd6f2c3=>_0xd6f2c3[_0x118f16(0x181)]==_0x558936['typeId']),_0x43d5fb=await this[_0x118f16(0x16f)](_0x118f16(0x17a),_0x118f16(0x189),this['token'],{'level':_0x558936['level'],'petTypeId':_0x3d4a8f[_0x118f16(0x181)]});_0x43d5fb[_0x118f16(0x16e)]?(await this[_0x118f16(0x15b)](),await Helper[_0x118f16(0x149)](0x3e8,this[_0x118f16(0x13d)],_0x118f16(0x164)+_0x558936[_0x118f16(0x18d)]+'\x20Successfully\x20Upgraded\x20to\x20Level\x20'+(_0x558936[_0x118f16(0x182)]+0x1)+'\x20',this)):await Helper[_0x118f16(0x149)](0xbb8,this[_0x118f16(0x13d)],''+_0x43d5fb[_0x118f16(0x144)],this);}catch(_0xbfa57f){throw _0xbfa57f;}}async['claimGold'](){const _0x15fa77=a2_0x4d4c60;try{await Helper['delay'](0x1f4,this[_0x15fa77(0x13d)],_0x15fa77(0x13b),this);const _0x55a398=await this[_0x15fa77(0x16f)](_0x15fa77(0x1a8),_0x15fa77(0x189),this[_0x15fa77(0x188)]);_0x55a398['success']?(await this[_0x15fa77(0x18e)](),await Helper['delay'](0x3e8,this[_0x15fa77(0x13d)],'Successfully\x20Claim\x20Gold,\x20got\x20'+_0x55a398[_0x15fa77(0x157)][_0x15fa77(0x17e)]+_0x15fa77(0x169),this)):await Helper[_0x15fa77(0x149)](0xbb8,this[_0x15fa77(0x13d)],''+_0x55a398[_0x15fa77(0x144)],this);}catch(_0x57d67a){throw _0x57d67a;}}async[a2_0x4d4c60(0x14c)](){const _0x815755=a2_0x4d4c60;let _0x1a2adf=[];for(const _0x161082 of this[_0x815755(0x161)]){const _0x275396=_0x1a2adf[_0x815755(0x13e)](_0x2bf9ab=>_0x2bf9ab[_0x815755(0x18d)]===_0x161082[_0x815755(0x18d)]&&_0x2bf9ab[_0x815755(0x182)]===_0x161082[_0x815755(0x182)]);_0x275396?_0x275396[_0x815755(0x185)]+=0x1:_0x1a2adf[_0x815755(0x19f)]({..._0x161082,'count':0x1});}return _0x1a2adf=_0x1a2adf[_0x815755(0x171)](_0x1b3391=>_0x1b3391[_0x815755(0x185)]>=0x5),_0x1a2adf;}}