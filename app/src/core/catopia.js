const a2_0x388da1=a2_0x1b36;function a2_0x1b36(_0x44f169,_0x2f5a46){const _0x3e5272=a2_0x3e52();return a2_0x1b36=function(_0x1b364d,_0x240811){_0x1b364d=_0x1b364d-0x1a3;let _0x442ae9=_0x3e5272[_0x1b364d];return _0x442ae9;},a2_0x1b36(_0x44f169,_0x2f5a46);}(function(_0x5c877e,_0x35d57e){const _0x2169af=a2_0x1b36,_0x3b2417=_0x5c877e();while(!![]){try{const _0x5e012a=parseInt(_0x2169af(0x1a5))/0x1+-parseInt(_0x2169af(0x1f5))/0x2+parseInt(_0x2169af(0x1c4))/0x3*(-parseInt(_0x2169af(0x1bd))/0x4)+parseInt(_0x2169af(0x1cc))/0x5+parseInt(_0x2169af(0x20b))/0x6*(parseInt(_0x2169af(0x1f8))/0x7)+parseInt(_0x2169af(0x204))/0x8+-parseInt(_0x2169af(0x1c9))/0x9;if(_0x5e012a===_0x35d57e)break;else _0x3b2417['push'](_0x3b2417['shift']());}catch(_0xc2f6c8){_0x3b2417['push'](_0x3b2417['shift']());}}}(a2_0x3e52,0x2c64c));import{API}from'../api/api.js';import{Helper}from'../utils/helper.js';import a2_0x1906a5 from'../utils/logger.js';import{io}from'socket.io-client';function a2_0x3e52(){const _0x18e777=['socket','name','14110FpRAZW','getLands','getUser','98yoksOY','message','Successfully\x20Opening\x20Multiple\x20Chest','Harvesting\x20all...','connect','/api/v1/user/daily-mission/','Successfully\x20Harvest\x20All\x20Plant\x20Got\x20','COMPANION','\x20Grapes','Successfully\x20Claim\x20Gold,\x20got\x20','land','initWss','1366632dTfKCf','plainToken','/api/v1/players/plant','missions','Successfully\x20Claim\x20Misisons','/api/v1/players/pet?limit=3000','Error\x20:\x20','37578RcniBl','/api/v1/players/chest?limit=3000','/api/v1/players/plant/harvestAll','buyChest','harvestAll','pet','entries','Upgrading\x20pet\x20','type','plantString','Successfully\x20Get\x20Misisons','Successfully\x20Get\x20User\x20Info','connect_timeout','\x20Level\x20','/api/v1/seed?limit=3000','237862eyNagT','Getting\x20Seed\x20List...','WSS\x20Handshake\x20Error:\x20','POSt','data','toLowerCase','Successfully\x20Get\x20User\x20Land\x20Info','claimedCoin','petTypeId','generateUpgradablePet','Successfully\x20Get\x20Seed\x20List','Getting\x20player\x20pet...','POST','getPet','buyingGrapes','getChest','wss://cowtopia-ws.tonfarmer.com','websocket','WSS\x20Disconnected:\x20','Buying\x20Grapes...','upgradePet','level','user','Successfully\x20get\x20player\x20pet','4FcAEwx','Opening\x20multipe\x20chest...','token','https://api.catopia.io','GET','account','Try\x20to\x20Login...','928365DMiGdH','reduce','gem','queryObj','openChest','1704753cLqOcB','...','chest','956950GugAmS','getMission','getSeedList','/api/v1/user-collection?limit=3000','Claiming\x20Missions\x20','claimGold','connect_error','getAvailablePlant','Getting\x20Player\x20Plant...','error','/api/v1/store/buy','info','/api/v1/players/land?limit=3000','WSS\x20Error\x20:\x20','fetch','Successfully\x20Login','\x20GOLD','success','/api/v1/user-collection/claim-gold','Socket\x20ID:\x20','Successfully\x20Buying\x201\x20Grapes','map','/api/v1/players/pet/upgrade','find','WSS\x20Handshake\x20Timeout','Planting\x20Gapes\x20seed\x20to\x20land...','claimMission','mission','petTypeList','query','Connecting\x20to\x20WSS...','Claiming\x20Gold...','plant','count','WSS\x20Connection\x20Error:\x20','/api/v1/auth/telegram','disconnect','delay','Successfully\x20planting\x20grapes\x20to\x20land\x20'];a2_0x3e52=function(){return _0x18e777;};return a2_0x3e52();}import{PetList}from'./pet_list.js';import{Config}from'../../config/config.js';export class Catopia extends API{constructor(_0x3cd474,_0x469486,_0x59bdaf,_0x4af3cd){const _0x7ec280=a2_0x1b36;super(_0x469486,_0x7ec280(0x1c0),_0x4af3cd),this[_0x7ec280(0x1c2)]=_0x3cd474,this[_0x7ec280(0x1e9)]=_0x469486,this[_0x7ec280(0x1c7)]=_0x59bdaf;}async['login'](){const _0x27d260=a2_0x1b36;try{await Helper[_0x27d260(0x1f1)](0x1f4,this[_0x27d260(0x1c2)],_0x27d260(0x1c3),this);const _0x3b6daf=await this[_0x27d260(0x1da)](_0x27d260(0x1ef),'POST',undefined,{'initData':this[_0x27d260(0x1e9)]});await Helper[_0x27d260(0x1f1)](0x3e8,this['account'],_0x27d260(0x1db),this),this[_0x27d260(0x1bf)]=_0x3b6daf[_0x27d260(0x1a9)]['accessToken'],this['refreshToken']=_0x3b6daf['refreshToken'];}catch(_0x3f5da8){throw _0x3f5da8;}}async[a2_0x388da1(0x1f7)](_0x105885=![]){const _0xcfd663=a2_0x388da1;try{if(_0x105885)await Helper['delay'](0x1f4,this[_0xcfd663(0x1c2)],'Getting\x20User\x20Info...',this);const _0xc2e286=await this[_0xcfd663(0x1da)](_0xcfd663(0x1cf),'GET',this[_0xcfd663(0x1bf)]);if(_0xc2e286[_0xcfd663(0x1dd)]==!![]){if(_0x105885)await Helper[_0xcfd663(0x1f1)](0x3e8,this[_0xcfd663(0x1c2)],_0xcfd663(0x216),this);this[_0xcfd663(0x1bb)]=_0xc2e286[_0xcfd663(0x1a9)];}else await Helper['delay'](0x1388,this[_0xcfd663(0x1c2)],_0xcfd663(0x20a)+_0xc2e286[_0xcfd663(0x1f9)],this);}catch(_0xce12bd){throw _0xce12bd;}}async[a2_0x388da1(0x203)](){return new Promise(async(_0xdce44d,_0x310f74)=>{const _0xafafbc=a2_0x1b36;await Helper[_0xafafbc(0x1f1)](0x3e8,this[_0xafafbc(0x1c2)],_0xafafbc(0x1ea),this),this[_0xafafbc(0x1f3)]=io(_0xafafbc(0x1b5),{'auth':{'token':this[_0xafafbc(0x205)]},'transports':[_0xafafbc(0x1b6)]}),this['socket']['on'](_0xafafbc(0x1fc),async()=>{const _0x12ec1f=_0xafafbc;await Helper[_0x12ec1f(0x1f1)](0x3e8,this[_0x12ec1f(0x1c2)],'WSS\x20Connected...',this),a2_0x1906a5[_0x12ec1f(0x1d7)]('WSS\x20Handshake\x20completed\x20and\x20connected.'),a2_0x1906a5[_0x12ec1f(0x1d7)](_0x12ec1f(0x1df)+this[_0x12ec1f(0x1f3)]['id']),_0xdce44d();}),this[_0xafafbc(0x1f3)]['on'](_0xafafbc(0x1d2),async _0x4a7e5c=>{const _0x98dea=_0xafafbc;await Helper[_0x98dea(0x1f1)](0x3e8,this[_0x98dea(0x1c2)],_0x98dea(0x1ee)+_0x4a7e5c[_0x98dea(0x1f9)],this),a2_0x1906a5[_0x98dea(0x1d5)](_0x98dea(0x1a7)+_0x4a7e5c['message']),_0x310f74(_0x4a7e5c);}),this[_0xafafbc(0x1f3)]['on'](_0xafafbc(0x217),async()=>{const _0x148820=_0xafafbc;await Helper[_0x148820(0x1f1)](0x3e8,this[_0x148820(0x1c2)],'WSS\x20Connection\x20Timeout',this),a2_0x1906a5[_0x148820(0x1d5)](_0x148820(0x1e4)),_0x310f74(new Error('WSS\x20Handshake\x20Timeout'));}),this[_0xafafbc(0x1f3)]['on'](_0xafafbc(0x1d5),async _0x2aabb4=>{const _0x379fac=_0xafafbc;await Helper[_0x379fac(0x1f1)](0x3e8,this[_0x379fac(0x1c2)],_0x379fac(0x1d9)+_0x2aabb4['message'],this),a2_0x1906a5[_0x379fac(0x1d5)]('WSS\x20Error\x20:\x20'+_0x2aabb4[_0x379fac(0x1f9)]),_0x310f74(_0x2aabb4);}),this[_0xafafbc(0x1f3)]['on'](_0xafafbc(0x1f0),async _0x30298a=>{const _0x335e6c=_0xafafbc;await Helper[_0x335e6c(0x1f1)](0x3e8,this['account'],'WSS\x20Connection\x20Closed\x20'+_0x30298a+_0x335e6c(0x1ca),this),a2_0x1906a5[_0x335e6c(0x1d7)](_0x335e6c(0x1b7)+_0x30298a);});});}async[a2_0x388da1(0x1cd)](_0x374297=![]){const _0x1e0eab=a2_0x388da1;try{if(_0x374297)await Helper[_0x1e0eab(0x1f1)](0x1f4,this['account'],'Getting\x20Missions...',this);this[_0x1e0eab(0x207)]=[];const _0x4d5474=await this['fetch']('/api/v1/user/daily-mission?limit=3000','GET',this['token']);if(_0x4d5474[_0x1e0eab(0x1dd)]){if(_0x374297)await Helper[_0x1e0eab(0x1f1)](0x3e8,this[_0x1e0eab(0x1c2)],_0x1e0eab(0x215),this);this[_0x1e0eab(0x207)]=_0x4d5474['data'];}else await Helper['delay'](0x1388,this[_0x1e0eab(0x1c2)],'Error\x20:\x20'+_0x4d5474['message'],this);}catch(_0x4ada50){throw _0x4ada50;}}async[a2_0x388da1(0x1e6)](_0x10d297){const _0x42813d=a2_0x388da1;try{await Helper['delay'](0x1f4,this[_0x42813d(0x1c2)],_0x42813d(0x1d0)+_0x10d297[_0x42813d(0x1e7)]['title']+'...',this);const _0x2cab47=await this[_0x42813d(0x1da)](_0x42813d(0x1fd)+_0x10d297['id']+'/claim','POST',this[_0x42813d(0x1bf)]);_0x2cab47[_0x42813d(0x1dd)]?(await Helper['delay'](0x3e8,this[_0x42813d(0x1c2)],_0x42813d(0x208),this),await this[_0x42813d(0x1f7)](),await this[_0x42813d(0x1cd)]()):await Helper[_0x42813d(0x1f1)](0x1388,this['account'],_0x42813d(0x20a)+_0x2cab47['message'],this);}catch(_0x3f9458){throw _0x3f9458;}}async[a2_0x388da1(0x1ce)](){const _0x1be88f=a2_0x388da1;try{await Helper['delay'](0x1f4,this[_0x1be88f(0x1c2)],_0x1be88f(0x1a6),this);const _0x53b5cc=await this[_0x1be88f(0x1da)](_0x1be88f(0x1a4),_0x1be88f(0x1c1),this[_0x1be88f(0x1bf)]);_0x53b5cc[_0x1be88f(0x1dd)]?(await Helper[_0x1be88f(0x1f1)](0x3e8,this[_0x1be88f(0x1c2)],_0x1be88f(0x1af),this),this['seed']=_0x53b5cc[_0x1be88f(0x1a9)]):await Helper['delay'](0x1388,this[_0x1be88f(0x1c2)],_0x1be88f(0x20a)+_0x53b5cc['message'],this);}catch(_0x51c6a2){throw _0x51c6a2;}}async[a2_0x388da1(0x1d3)](_0x19c5a4=![]){const _0x5ac654=a2_0x388da1;try{if(_0x19c5a4)await Helper[_0x5ac654(0x1f1)](0x1f4,this['account'],_0x5ac654(0x1d4),this);const _0x338943=await this['fetch']('/api/v1/players/plant?limit=3000',_0x5ac654(0x1c1),this[_0x5ac654(0x1bf)]);if(_0x338943[_0x5ac654(0x1dd)]){if(_0x19c5a4)await Helper[_0x5ac654(0x1f1)](0x3e8,this[_0x5ac654(0x1c2)],'Successfully\x20Get\x20Player\x20Plant',this);this[_0x5ac654(0x1ec)]=_0x338943[_0x5ac654(0x1a9)];const _0x2bd186=this[_0x5ac654(0x1ec)][_0x5ac654(0x1c5)]((_0x258103,_0x3111c9)=>{const _0x1719ea=_0x3111c9['name'];return _0x258103[_0x1719ea]=(_0x258103[_0x1719ea]||0x0)+0x1,_0x258103;},{});this[_0x5ac654(0x214)]=Object[_0x5ac654(0x211)](_0x2bd186)[_0x5ac654(0x1e1)](([_0x2633bb,_0x42faa1])=>_0x42faa1+_0x5ac654(0x200))['join']('\x20');}else await Helper['delay'](0x1388,this[_0x5ac654(0x1c2)],'Error\x20:\x20'+_0x338943['message'],this);}catch(_0x241c74){throw _0x241c74;}}async[a2_0x388da1(0x1b3)](){const _0x51508f=a2_0x388da1;try{await Helper[_0x51508f(0x1f1)](0x1f4,this[_0x51508f(0x1c2)],_0x51508f(0x1b8),this);const _0x3640c8=await this[_0x51508f(0x1da)]('/api/v1/store/buy',_0x51508f(0x1b1),this[_0x51508f(0x1bf)],{'storeId':0x11,'price':0x3e80,'unit':0x1});await this['getUser'](),_0x3640c8[_0x51508f(0x1dd)]?(await Helper[_0x51508f(0x1f1)](0x3e8,this[_0x51508f(0x1c2)],_0x51508f(0x1e0),this),await this[_0x51508f(0x1d3)]()):(await Helper[_0x51508f(0x1f1)](0x1388,this[_0x51508f(0x1c2)],''+_0x3640c8[_0x51508f(0x1f9)],this),await this[_0x51508f(0x20f)]());}catch(_0x2e5de0){throw _0x2e5de0;}}async[a2_0x388da1(0x1f6)](_0x3bb5ee=![]){const _0x4acf16=a2_0x388da1;try{if(_0x3bb5ee)await Helper[_0x4acf16(0x1f1)](0x1f4,this[_0x4acf16(0x1c2)],'Getting\x20User\x20Land\x20Info...',this);const _0x14be3c=await this[_0x4acf16(0x1da)](_0x4acf16(0x1d8),_0x4acf16(0x1c1),this[_0x4acf16(0x1bf)]);if(_0x14be3c['success']){if(_0x3bb5ee)await Helper['delay'](0x3e8,this[_0x4acf16(0x1c2)],_0x4acf16(0x1ab),this);this[_0x4acf16(0x202)]=_0x14be3c[_0x4acf16(0x1a9)];}else await Helper[_0x4acf16(0x1f1)](0x1388,this[_0x4acf16(0x1c2)],_0x4acf16(0x20a)+_0x14be3c['message'],this);}catch(_0x4b00ef){throw _0x4b00ef;}}async['plantSeed'](_0x32c19c){const _0x4bff49=a2_0x388da1;try{await Helper[_0x4bff49(0x1f1)](0x1f4,this[_0x4bff49(0x1c2)],_0x4bff49(0x1e5),this);const _0x11f073=await this[_0x4bff49(0x1da)](_0x4bff49(0x206),_0x4bff49(0x1a8),this[_0x4bff49(0x1bf)],{'plantId':this[_0x4bff49(0x1ec)][0x0]['id'],'landId':_0x32c19c});_0x11f073['success']?(await Helper[_0x4bff49(0x1f1)](0x3e8,this['account'],_0x4bff49(0x1f2)+_0x32c19c,this),await this[_0x4bff49(0x1f6)](),await this[_0x4bff49(0x1d3)]()):await Helper[_0x4bff49(0x1f1)](0x1388,this[_0x4bff49(0x1c2)],'Error\x20:\x20'+_0x11f073[_0x4bff49(0x1f9)],this);}catch(_0x24e54a){throw _0x24e54a;}}async['harvestAll'](){const _0x283ff4=a2_0x388da1;try{await Helper[_0x283ff4(0x1f1)](0x1f4,this[_0x283ff4(0x1c2)],_0x283ff4(0x1fb),this);const _0x2160c8=await this[_0x283ff4(0x1da)](_0x283ff4(0x20d),_0x283ff4(0x1a8),this[_0x283ff4(0x1bf)]);_0x2160c8[_0x283ff4(0x1dd)]?(await Helper[_0x283ff4(0x1f1)](0x7d0,this['account'],_0x283ff4(0x1fe)+_0x2160c8[_0x283ff4(0x1a9)][_0x283ff4(0x1c6)]+'\x20GEM\x20&\x20'+_0x2160c8['data']['gold']+_0x283ff4(0x1dc),this),await this[_0x283ff4(0x1f7)](),await this[_0x283ff4(0x1f6)](),await this[_0x283ff4(0x1d3)]()):await Helper[_0x283ff4(0x1f1)](0x7d0,this['account'],''+_0x2160c8[_0x283ff4(0x1f9)],this);}catch(_0x589eb8){throw _0x589eb8;}}async[a2_0x388da1(0x1b2)](_0xaeb84d){const _0x319496=a2_0x388da1;try{if(_0xaeb84d)await Helper[_0x319496(0x1f1)](0x1f4,this[_0x319496(0x1c2)],_0x319496(0x1b0),this);const _0x4e42ef=await this[_0x319496(0x1da)](_0x319496(0x209),_0x319496(0x1c1),this[_0x319496(0x1bf)]);if(_0x4e42ef[_0x319496(0x1dd)]){if(_0xaeb84d)await Helper[_0x319496(0x1f1)](0xbb8,this[_0x319496(0x1c2)],_0x319496(0x1bc),this);this['pet']=_0x4e42ef['data'];}else await Helper['delay'](0xbb8,this[_0x319496(0x1c2)],''+_0x4e42ef[_0x319496(0x1f9)],this);}catch(_0x2082c4){throw _0x2082c4;}}async[a2_0x388da1(0x20e)](){const _0x630ace=a2_0x388da1;try{await Helper[_0x630ace(0x1f1)](0x1f4,this[_0x630ace(0x1c2)],'Buying\x20common\x20chest...',this);const _0x1dbdc3=await this[_0x630ace(0x1da)](_0x630ace(0x1d6),_0x630ace(0x1b1),this['token'],{'storeId':0x2,'price':0x7530,'unit':0x1});_0x1dbdc3['success']?(await this[_0x630ace(0x1f7)](),await this[_0x630ace(0x1b4)]()):await Helper['delay'](0xbb8,this[_0x630ace(0x1c2)],''+_0x1dbdc3['message'],this);}catch(_0x2559a0){throw _0x2559a0;}}async[a2_0x388da1(0x1b4)](){const _0x57191b=a2_0x388da1;try{const _0x26fbd6=await this[_0x57191b(0x1da)](_0x57191b(0x20c),_0x57191b(0x1c1),this[_0x57191b(0x1bf)]);_0x26fbd6[_0x57191b(0x1dd)]?this[_0x57191b(0x1cb)]=_0x26fbd6[_0x57191b(0x1a9)]:await Helper['delay'](0xbb8,this[_0x57191b(0x1c2)],''+res[_0x57191b(0x1f9)],this);}catch(_0x37b9ae){throw _0x37b9ae;}}async[a2_0x388da1(0x1c8)](){const _0x4fd49a=a2_0x388da1;try{const _0x9678f9=Config[_0x4fd49a(0x1ff)]??'A';await Helper[_0x4fd49a(0x1f1)](0x1f4,this[_0x4fd49a(0x1c2)],_0x4fd49a(0x1be),this);const _0x2824e7=await this[_0x4fd49a(0x1da)]('/api/v1/chest/open-multiple','POST',this[_0x4fd49a(0x1bf)],{'petTypeIds':PetList['petCompanion'][_0x4fd49a(0x1e3)](_0x2e617d=>_0x2e617d[_0x4fd49a(0x213)]==_0x9678f9)[_0x4fd49a(0x1a9)],'chestIds':this['chest'][_0x4fd49a(0x1e1)](_0x1ea89f=>{return _0x1ea89f['id'];})});_0x2824e7[_0x4fd49a(0x1dd)]?(await this[_0x4fd49a(0x1b4)](),await Helper[_0x4fd49a(0x1f1)](0x3e8,this[_0x4fd49a(0x1c2)],_0x4fd49a(0x1fa),this)):await Helper[_0x4fd49a(0x1f1)](0xbb8,this[_0x4fd49a(0x1c2)],''+_0x2824e7[_0x4fd49a(0x1f9)],this);}catch(_0xb994dc){throw _0xb994dc;}}async[a2_0x388da1(0x1b9)](_0x363421){const _0x207b8e=a2_0x388da1;try{await Helper[_0x207b8e(0x1f1)](0x1f4,this[_0x207b8e(0x1c2)],_0x207b8e(0x212)+_0x363421['name']+_0x207b8e(0x1a3)+_0x363421[_0x207b8e(0x1ba)]+_0x207b8e(0x1ca),this);const _0x66392e=await this[_0x207b8e(0x1da)](_0x207b8e(0x1e2),'POST',this[_0x207b8e(0x1bf)],{'level':_0x363421[_0x207b8e(0x1ba)],'petTypeId':PetList[_0x207b8e(0x1e8)][_0x207b8e(0x1e3)](_0xb4a862=>_0xb4a862['name'][_0x207b8e(0x1aa)]()==_0x363421[_0x207b8e(0x1f4)][_0x207b8e(0x1aa)]())[_0x207b8e(0x1ad)]});_0x66392e[_0x207b8e(0x1dd)]?(await this[_0x207b8e(0x1b2)](),await Helper[_0x207b8e(0x1f1)](0x3e8,this['account'],'Pet\x20'+_0x363421[_0x207b8e(0x1f4)]+'\x20Successfully\x20Upgraded\x20to\x20Level\x20'+(_0x363421['level']+0x1)+'\x20',this)):await Helper[_0x207b8e(0x1f1)](0xbb8,this[_0x207b8e(0x1c2)],''+_0x66392e['message'],this);}catch(_0x4f34fa){throw _0x4f34fa;}}async[a2_0x388da1(0x1d1)](){const _0xe34d17=a2_0x388da1;try{await Helper[_0xe34d17(0x1f1)](0x1f4,this[_0xe34d17(0x1c2)],_0xe34d17(0x1eb),this);const _0x51798d=await this[_0xe34d17(0x1da)](_0xe34d17(0x1de),_0xe34d17(0x1b1),this[_0xe34d17(0x1bf)]);_0x51798d[_0xe34d17(0x1dd)]?(await this[_0xe34d17(0x1f7)](),await Helper[_0xe34d17(0x1f1)](0x3e8,this[_0xe34d17(0x1c2)],_0xe34d17(0x201)+_0x51798d['data'][_0xe34d17(0x1ac)]+'\x20GOLD',this)):await Helper['delay'](0xbb8,this[_0xe34d17(0x1c2)],''+_0x51798d[_0xe34d17(0x1f9)],this);}catch(_0x18b819){throw _0x18b819;}}async[a2_0x388da1(0x1ae)](){const _0x2c8c42=a2_0x388da1;let _0x14e028=[];for(const _0x1fcd59 of this[_0x2c8c42(0x210)]){const _0x7a4984=_0x14e028[_0x2c8c42(0x1e3)](_0x5274ac=>_0x5274ac[_0x2c8c42(0x1f4)]===_0x1fcd59['name']&&_0x5274ac[_0x2c8c42(0x1ba)]===_0x1fcd59['level']);_0x7a4984?_0x7a4984['count']+=0x1:_0x14e028['push']({..._0x1fcd59,'count':0x1});}return _0x14e028=_0x14e028['filter'](_0x11f977=>_0x11f977[_0x2c8c42(0x1ed)]>=0x5),_0x14e028;}}