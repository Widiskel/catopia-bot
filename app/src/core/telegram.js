const a4_0x52f4ae=a4_0x1aa4;(function(_0x2bde76,_0x5014ac){const _0x1acc06=a4_0x1aa4,_0x46cc42=_0x2bde76();while(!![]){try{const _0x53a87c=parseInt(_0x1acc06(0x10a))/0x1*(parseInt(_0x1acc06(0xee))/0x2)+-parseInt(_0x1acc06(0x101))/0x3+-parseInt(_0x1acc06(0xe6))/0x4+-parseInt(_0x1acc06(0xef))/0x5+parseInt(_0x1acc06(0x100))/0x6+parseInt(_0x1acc06(0xed))/0x7*(parseInt(_0x1acc06(0xea))/0x8)+parseInt(_0x1acc06(0xfa))/0x9;if(_0x53a87c===_0x5014ac)break;else _0x46cc42['push'](_0x46cc42['shift']());}catch(_0x20e74c){_0x46cc42['push'](_0x46cc42['shift']());}}}(a4_0x4ae0,0xf0923));import a4_0x2d78c3 from'input';import{Helper}from'../utils/helper.js';import{Api,TelegramClient}from'telegram';import{StoreSession}from'telegram/sessions/StoreSession.js';function a4_0x1aa4(_0x237b9d,_0x72ed6){const _0x4ae064=a4_0x4ae0();return a4_0x1aa4=function(_0x1aa460,_0x21d1c8){_0x1aa460=_0x1aa460-0xd0;let _0x8e0de6=_0x4ae064[_0x1aa460];return _0x8e0de6;},a4_0x1aa4(_0x237b9d,_0x72ed6);}import a4_0x59d6dd from'../utils/logger.js';import{FloodWaitError}from'telegram/errors/RPCErrorList.js';import{Config}from'../../config/config.js';import{HttpsProxyAgent}from'https-proxy-agent';function a4_0x4ae0(){const _0x1106d5=['sessionName','sessionCreation','https://cowtopia-prod.tonfarmer.com/','bot','Your\x20session\x20List\x20:\x0a\x20\x0a','resolvePeer','length','indexOf','Enter\x20your\x20Telegram\x20Password?','Enter\x20your\x20Telegram\x20Phone\x20Number\x20?','\x20-\x20Created','\x20-\x20Webview\x20Connected','getSession','client','6578864LFPUpN','message','catopia_game_bot','RequestWebView','509480BAFmwA','onBoarding','proxy','14zTXlXX','1618754yoVMhv','8340600qYSGJy','\x0a\x20\x0aYou\x20alreay\x20have\x20sessions,\x20cancel(CTRL+C)\x20or\x20create\x20new\x20Session\x20:','TELEGRAM_APP_ID','stringify','<empty>\x20\x0a\x20\x0aPlease\x20enter\x20Session\x20Name\x20:','info','log','serverAddress','useSession','\x0a\x20\x0a1.\x20Create\x20Session.\x20\x0a2.\x20Reset\x20Sessions\x20\x0a3.\x20Start\x20Bot\x20\x0a\x20\x0aInput\x20your\x20choice\x20:','text','25705026HZlwqQ','error','\x20-\x20Resolving\x20Peer','save','messages','getEntity','5920194IkSDSO','3872166rWkhSk','url','storeSession','agent','session','warn','peer','You\x20don\x27t\x20have\x20any\x20sessions,\x20please\x20create\x20first','invoke','2DbxKCL','createDir','initWebView','getTelegramQuery','start','init','\x20|\x20Sleep\x20','disconnect','destroy','sessions','Enter\x20your\x20Telegram\x20Verification\x20Code\x20?','\x20|\x20FloodWait\x20','Session\x20','android'];a4_0x4ae0=function(){return _0x1106d5;};return a4_0x4ae0();}export class Telegram{[a4_0x52f4ae(0x103)];constructor(){const _0x37d2b8=a4_0x52f4ae;this['sessionName']=_0x37d2b8(0xd3),this[_0x37d2b8(0x102)]=_0x37d2b8(0xda),this[_0x37d2b8(0xdb)]=_0x37d2b8(0xe8);}async[a4_0x52f4ae(0x10f)](){const _0x2840a0=a4_0x52f4ae;try{await this['onBoarding']();}catch(_0xab7f79){console['log'](_0xab7f79),a4_0x59d6dd[_0x2840a0(0xfb)](''+JSON[_0x2840a0(0xf2)](_0xab7f79));throw _0xab7f79;}}async[a4_0x52f4ae(0xeb)](){const _0x3c23ea=a4_0x52f4ae;try{let _0x203fd1='Welcome\x20to\x20Cowtopia\x20Bot\x20\x0aBy\x20:\x20Widiskel\x20\x0a\x20\x0aLets\x20getting\x20started.\x0a\x0aYour\x20Session\x20List:\x0a';const _0x13d0c4=Helper[_0x3c23ea(0xe4)]('sessions');if(_0x13d0c4[_0x3c23ea(0xde)]==0x0)_0x203fd1+='<empty>\x20\x0a\x20\x0aPlease\x20enter\x20Session\x20Name\x20:';else for(const _0x531e8c of _0x13d0c4){_0x203fd1+='-\x20'+_0x531e8c+'\x0a';}_0x203fd1+='\x0a\x20\x0aPlease\x20Choose\x20a\x20menu:\x20\x0a',_0x203fd1+=_0x3c23ea(0xf8);const _0x5c3c5e=await a4_0x2d78c3['text'](_0x203fd1);if(_0x5c3c5e==0x1)await this[_0x3c23ea(0xd9)]();else{if(_0x5c3c5e==0x2)Helper['resetSession'](this['sessionName']),await Helper['delay'](0xbb8),await this['onBoarding']();else _0x5c3c5e==0x3?Helper[_0x3c23ea(0xe4)](this['sessionName'])?.[_0x3c23ea(0xde)]==0x0&&(console[_0x3c23ea(0xf4)](_0x3c23ea(0x108)),await this['onBoarding']()):(console[_0x3c23ea(0xfb)]('Invalid\x20input,\x20Please\x20try\x20again'),await this[_0x3c23ea(0xeb)]());}}catch(_0x31eae3){throw _0x31eae3;}}async[a4_0x52f4ae(0xd9)](){const _0x1a604a=a4_0x52f4ae;try{const _0x471aec=Helper[_0x1a604a(0xe4)](_0x1a604a(0xd3));let _0x459173=_0x1a604a(0xdc);for(const _0x3eb600 of _0x471aec){_0x459173+=_0x471aec[_0x1a604a(0xdf)](_0x3eb600)+0x1+'.\x20'+_0x3eb600+'\x0a';}_0x471aec[_0x1a604a(0xde)]==0x0?_0x459173+=_0x1a604a(0xf3):_0x459173+=_0x1a604a(0xf0);const _0x3518ca=await a4_0x2d78c3['text'](_0x459173);this[_0x1a604a(0xd8)]=Helper[_0x1a604a(0x10b)](_0x3518ca),await this[_0x1a604a(0xf7)](this[_0x1a604a(0xd8)]),await this[_0x1a604a(0xd1)](),a4_0x59d6dd['info']('Session\x20'+this['sessionName']+_0x1a604a(0xe2)),console[_0x1a604a(0xf5)]('Session\x20'+this[_0x1a604a(0xd8)]+_0x1a604a(0xe2)),this[_0x1a604a(0x103)][_0x1a604a(0xfd)](),await Helper['delay'](0xbb8),await this[_0x1a604a(0x10f)]();}catch(_0x1ae2c3){throw _0x1ae2c3;}}async[a4_0x52f4ae(0xf7)](_0x29d201,_0x3c8ff6){const _0x1c8c3=a4_0x52f4ae;try{this[_0x1c8c3(0xec)]=_0x3c8ff6;const _0x4d2ec4={'connectionRetries':0x5};this[_0x1c8c3(0xec)]&&(_0x4d2ec4[_0x1c8c3(0x104)]=new HttpsProxyAgent(this['proxy'])),this[_0x1c8c3(0x103)]=new StoreSession(_0x29d201),this[_0x1c8c3(0xe5)]=new TelegramClient(this['storeSession'],Config[_0x1c8c3(0xf1)],Config['TELEGRAM_APP_HASH'],_0x4d2ec4),this[_0x1c8c3(0x103)]['save'](),await this['client'][_0x1c8c3(0x10e)]({'phoneNumber':async()=>await a4_0x2d78c3[_0x1c8c3(0xf9)](_0x1c8c3(0xe1)),'password':async()=>await a4_0x2d78c3[_0x1c8c3(0xf9)](_0x1c8c3(0xe0)),'phoneCode':async()=>await a4_0x2d78c3[_0x1c8c3(0xf9)](_0x1c8c3(0xd4)),'onError':_0x5ac86c=>{const _0x297e36=_0x1c8c3;console[_0x297e36(0xf5)](_0x5ac86c[_0x297e36(0xe7)]);}}),console['log']();}catch(_0x5ca73c){throw _0x5ca73c;}}async[a4_0x52f4ae(0xdd)](){const _0x43d955=a4_0x52f4ae;try{a4_0x59d6dd['info']('Session\x20'+this['session']+_0x43d955(0xfc));while(this[_0x43d955(0x107)]==undefined){try{this[_0x43d955(0x107)]=await this[_0x43d955(0xe5)][_0x43d955(0xff)](this['bot']);break;}catch(_0x203fb7){if(_0x203fb7 instanceof FloodWaitError){const _0x1db550=_0x203fb7['seconds'];a4_0x59d6dd[_0x43d955(0x106)](this[_0x43d955(0xe5)]['session'][_0x43d955(0xf6)]+_0x43d955(0xd5)+_0x203fb7),a4_0x59d6dd[_0x43d955(0xf4)](this[_0x43d955(0xe5)][_0x43d955(0x105)][_0x43d955(0xf6)]+_0x43d955(0xd0)+_0x1db550+'s'),await Helper['delay']((_0x1db550+0x3)*0x3e8);}else throw _0x203fb7;}}}catch(_0x1ac472){throw _0x1ac472;}}async[a4_0x52f4ae(0xd1)](){const _0x112c68=a4_0x52f4ae;await this['client'][_0x112c68(0xd1)](),await this[_0x112c68(0xe5)][_0x112c68(0xd2)](),this[_0x112c68(0x107)]=undefined,this[_0x112c68(0xd8)]=undefined;}async[a4_0x52f4ae(0x10c)](){const _0x582c25=a4_0x52f4ae;try{const _0x3d04d0=await this['client'][_0x582c25(0x109)](new Api[(_0x582c25(0xfe))][(_0x582c25(0xe9))]({'peer':this[_0x582c25(0x107)],'bot':this['peer'],'fromBotMenu':!![],'url':this['url'],'platform':_0x582c25(0xd7)}));a4_0x59d6dd[_0x582c25(0xf4)](_0x582c25(0xd6)+this[_0x582c25(0x105)]+_0x582c25(0xe3));const _0x3137d0=_0x3d04d0[_0x582c25(0x102)];return Helper[_0x582c25(0x10d)](_0x3137d0,0x3);}catch(_0x4fdf9){throw _0x4fdf9;}}}